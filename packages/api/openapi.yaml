openapi: 3.0.0
info:
  contact:
    email: api-support@psp.com
    name: PSP API Support
  description: PSP 运营后台 API - 面向内部运营人员
  license:
    name: Proprietary
  termsOfService: 'https://psp.com/terms/'
  title: PSP Admin API
  version: '1.0'
servers:
  - url: /
paths:
  /admin/v1/canary/comparisons:
    get:
      parameters:
        - description: 发布 ID
          in: query
          name: release_id
          required: true
          schema:
            type: string
        - description: 租户 ID
          in: query
          name: tenant_id
          schema:
            type: string
        - description: 一致性过滤
          in: query
          name: is_consistent
          schema:
            type: boolean
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
        - description: 限制数量
          in: query
          name: limit
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app.ListComparisonResultsResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 分页查询灰度发布的对比结果
      summary: '[内部] 查询对比结果列表'
  '/admin/v1/canary/comparisons/{withdrawal_id}':
    get:
      parameters:
        - description: 提现 ID
          in: path
          name: withdrawal_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app.ComparisonResultResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 根据提现ID查询对比结果
      summary: '[内部] 根据提现ID获取对比结果'
  /admin/v1/canary/releases:
    get:
      parameters:
        - description: 阶段过滤
          in: query
          name: phase
          schema:
            type: string
        - description: 健康状态过滤
          in: query
          name: health_status
          schema:
            type: string
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
        - description: 限制数量
          in: query
          name: limit
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app.ListReleasesResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 分页查询灰度发布列表
      summary: '[内部] 查询灰度发布列表'
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app.ReleaseResponse'
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 创建新的 Temporal Payout 灰度发布
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/app.CreateReleaseRequest'
        description: 创建发布请求
        required: true
      summary: '[内部] 创建灰度发布'
  '/admin/v1/canary/releases/{id}':
    get:
      parameters:
        - description: 发布 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app.ReleaseResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 根据 ID 获取灰度发布详情
      summary: '[内部] 获取灰度发布详情'
  '/admin/v1/canary/releases/{id}/health':
    get:
      parameters:
        - description: 发布 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_canary_app.HealthCheckResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 获取灰度发布的健康状态和指标
      summary: '[内部] 检查灰度发布健康状态'
  '/admin/v1/canary/releases/{id}/metrics':
    get:
      parameters:
        - description: 发布 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app.ComparisonMetricsResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 获取灰度发布的对比指标汇总
      summary: '[内部] 获取对比指标'
  '/admin/v1/canary/releases/{id}/promote':
    post:
      parameters:
        - description: 发布 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app.ReleaseResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 将灰度发布推进到下一阶段
      summary: '[内部] 推进灰度发布阶段'
  '/admin/v1/canary/releases/{id}/rollback':
    post:
      parameters:
        - description: 发布 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app.ReleaseResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 回滚灰度发布到初始状态
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/app.RollbackReleaseRequest'
        description: 回滚请求
        required: true
      summary: '[内部] 回滚灰度发布'
  '/admin/v1/canary/releases/{id}/tenants/disable':
    post:
      parameters:
        - description: 发布 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app.ReleaseResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 为灰度发布禁用目标租户
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/app.DisableTenantRequest'
        description: 禁用租户请求
        required: true
      summary: '[内部] 禁用租户'
  '/admin/v1/canary/releases/{id}/tenants/enable':
    post:
      parameters:
        - description: 发布 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app.ReleaseResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 为灰度发布启用目标租户
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/app.EnableTenantRequest'
        description: 启用租户请求
        required: true
      summary: '[内部] 启用租户'
  /admin/v1/canary/tenants/candidates:
    get:
      parameters:
        - description: 最大日交易量
          in: query
          name: max_daily_volume
          schema:
            type: integer
        - description: 最大单笔金额
          in: query
          name: max_single_amount
          schema:
            type: integer
        - description: 最小历史天数
          in: query
          name: min_historical_days
          schema:
            type: integer
        - description: 返回数量
          in: query
          name: limit
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app.TenantCandidatesResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Canary
      description: 获取低风险的灰度候选租户列表
      summary: '[内部] 获取候选租户'
  /api/admin/auth/login:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.AuthLoginResponse
          description: 登录成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 认证失败
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 账户已锁定
      tags:
        - Admin Auth
      description: 使用邮箱和密码登录租户管理后台
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.AuthLoginRequest
        description: 登录请求
        required: true
      summary: 租户管理员登录
  /api/admin/auth/logout:
    post:
      responses:
        '204':
          description: 登出成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
      tags:
        - Admin Auth
      description: 吊销 refresh_token 使其失效
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.AuthRefreshTokenRequest
        description: 登出请求
        required: true
      summary: 用户登出
  /api/admin/auth/mfa/verify:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.AuthLoginResponse
          description: 验证成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: MFA 验证失败
      tags:
        - Admin Auth
      description: 验证 TOTP 或 Passkey 完成 MFA 认证
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.AuthVerifyMFARequest
        description: MFA 验证请求
        required: true
      summary: 验证 MFA
  /api/admin/auth/refresh:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.AuthLoginResponse
          description: 刷新成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Token 无效或过期
      tags:
        - Admin Auth
      description: 使用 refresh_token 获取新的 access_token
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.AuthRefreshTokenRequest
        description: 刷新请求
        required: true
      summary: 刷新访问令牌
  /api/admin/auth/tokens/revoke-all:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.RevokeTokenResponse
          description: 撤销成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器错误
      security:
        - BearerAuth: []
      tags:
        - Admin Auth
      description: 撤销当前用户的所有 Token，用于密码修改、安全事件等场景
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.RevokeAllTokensRequest
        description: 撤销请求
        required: true
      summary: 撤销所有 Token
  /api/admin/mfa/backup-codes/regenerate:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantRegenerateBackupCodesResponse
          description: 新备用码
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 验证当前 MFA 后重新生成备用码
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.RegenerateBackupCodesInput
        description: 请求
        required: true
      summary: 重新生成备用码
  /api/admin/mfa/methods:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.MFAMethodsResponse
          description: MFA 方法列表
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 获取当前用户的所有 MFA 认证方法
      summary: 获取 MFA 方法列表
  /api/admin/mfa/passkey/authentication/options:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantPasskeyAuthOptionsResponse
          description: 验证选项
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
        '503':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Passkey 未配置
      tags:
        - Admin MFA
      description: 生成 Passkey 验证所需的 WebAuthn 选项
      summary: 获取 Passkey 验证选项
  /api/admin/mfa/passkey/authentication/verify:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantPasskeyVerifyResponse
          description: 验证成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
        '503':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Passkey 未配置
      tags:
        - Admin MFA
      description: 使用 Passkey 完成 MFA 验证
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.VerifyPasskeyInput
        description: 验证请求
        required: true
      summary: 验证 Passkey
  /api/admin/mfa/passkey/registration/complete:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantPasskeyBindResponse
          description: 绑定成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
        '503':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Passkey 未配置
      tags:
        - Admin MFA
      description: 完成 Passkey 注册并绑定到用户
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.BindPasskeyInput
        description: 绑定请求
        required: true
      summary: 绑定 Passkey
  /api/admin/mfa/passkey/registration/options:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantPasskeyRegistrationOptionsResponse
          description: 注册选项
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 生成 Passkey 注册所需的 WebAuthn 选项
      summary: 获取 Passkey 注册选项
  /api/admin/mfa/primary:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 设置成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 将指定的 MFA 方法设为主要验证方式
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.SetPrimaryMFAInput
        description: 请求
        required: true
      summary: 设置主要 MFA
  /api/admin/mfa/status:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.MFAStatusResponse
          description: MFA 状态
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 获取当前用户的 MFA 设置状态
      summary: 获取 MFA 状态
  /api/admin/mfa/totp/bind:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 绑定成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 验证码无效
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 设置不存在或已过期
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 验证 TOTP 验证码并完成绑定
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/psp_com_internal_tenant_app.TOTPBindInput'
        description: 绑定请求
        required: true
      summary: 绑定 TOTP
  /api/admin/mfa/totp/setup:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantTOTPInitResponse
          description: TOTP 设置信息
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: TOTP 已绑定
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 生成 TOTP 密钥和备用码，开始 TOTP 设置流程。前端负责使用返回的信息生成二维码。
      summary: 初始化 TOTP 设置
  '/api/admin/mfa/{mfa_id}':
    delete:
      parameters:
        - description: MFA ID
          in: path
          name: mfa_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 删除成功
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 永久删除指定的 MFA 方法
      summary: 删除 MFA
  '/api/admin/mfa/{mfa_id}/disable':
    post:
      parameters:
        - description: MFA ID
          in: path
          name: mfa_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 禁用成功
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 禁用指定的 MFA 方法（不删除）
      summary: 禁用 MFA
  /api/v1/admin/custom-reports:
    get:
      parameters:
        - description: '状态过滤 (draft, active, paused, archived)'
          in: query
          name: status
          schema:
            type: string
        - description: 数据源过滤
          in: query
          name: data_source
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerListTemplatesResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - CustomReports
      summary: 列表查询自定义报表模板
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_customreport_app.TemplateDTO
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '409':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 模板名称已存在
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - CustomReports
      description: 创建新的自定义报表模板
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerCreateTemplateRequest
        description: 创建请求
        required: true
      summary: 创建自定义报表模板
  '/api/v1/admin/custom-reports/executions/{execution_id}':
    get:
      parameters:
        - description: 执行ID
          in: path
          name: execution_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_customreport_app.ExecutionDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 执行记录未找到
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - CustomReports
      summary: 获取执行详情
  /api/v1/admin/custom-reports/fields:
    get:
      parameters:
        - description: 数据源类型
          in: query
          name: data_source
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_customreport_app.AvailableFieldsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - CustomReports
      summary: 获取数据源可用字段列表
  '/api/v1/admin/custom-reports/{id}':
    delete:
      parameters:
        - description: 模板ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 模板未找到
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - CustomReports
      summary: 删除自定义报表模板
    get:
      parameters:
        - description: 模板ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_customreport_app.TemplateDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 模板未找到
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - CustomReports
      summary: 获取自定义报表模板详情
    put:
      parameters:
        - description: 模板ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_customreport_app.TemplateDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 模板未找到
        '409':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 版本冲突
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - CustomReports
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerUpdateTemplateRequest
        description: 更新请求
        required: true
      summary: 更新自定义报表模板
  '/api/v1/admin/custom-reports/{id}/activate':
    post:
      parameters:
        - description: 模板ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_customreport_app.TemplateDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误或状态转换无效
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 模板未找到
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - CustomReports
      summary: 激活自定义报表模板
  '/api/v1/admin/custom-reports/{id}/executions':
    get:
      parameters:
        - description: 模板ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerListExecutionsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - CustomReports
      summary: 查询报表执行历史
  '/api/v1/admin/custom-reports/{id}/pause':
    post:
      parameters:
        - description: 模板ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_customreport_app.TemplateDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误或状态转换无效
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 模板未找到
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - CustomReports
      summary: 暂停自定义报表模板
  '/api/v1/admin/custom-reports/{id}/trigger':
    post:
      parameters:
        - description: 模板ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_customreport_app.ExecutionDTO
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误或模板未激活
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 模板未找到
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - CustomReports
      summary: 手动触发报表生成
  /api/v1/admin/user-behavior/active-users:
    get:
      parameters:
        - description: '用户类型: admin, agent, merchant, system'
          in: query
          name: user_type
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_time
          required: true
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_time
          required: true
          schema:
            type: string
        - description: '页码 (默认: 1)'
          in: query
          name: page
          schema:
            type: integer
        - description: '每页数量 (默认: 20, 最大: 100)'
          in: query
          name: page_size
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_userbehavior_app.ActiveUsersResult
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-user-behavior
      description: 获取指定时间范围内的活跃用户列表，支持分页
      summary: '[内部] 获取活跃用户列表'
  /api/v1/admin/user-behavior/anomalies:
    get:
      parameters:
        - description: '用户类型: admin, agent, merchant, system'
          in: query
          name: user_type
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_time
          required: true
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_time
          required: true
          schema:
            type: string
        - description: >-
            异常类型: unusual_login_time, multiple_failed_logins, unusual_location,
            high_frequency_operations, suspicious_data_access,
            permission_escalation
          in: query
          name: anomaly_type
          schema:
            type: string
        - description: '页码 (默认: 1)'
          in: query
          name: page
          schema:
            type: integer
        - description: '每页数量 (默认: 20, 最大: 100)'
          in: query
          name: page_size
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_userbehavior_app.AnomaliesResult
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-user-behavior
      description: 获取指定时间范围内检测到的异常行为列表，支持按类型过滤和分页
      summary: '[内部] 获取异常行为列表'
  /api/v1/admin/user-behavior/feature-usage:
    get:
      parameters:
        - description: '用户类型: admin, agent, merchant, system'
          in: query
          name: user_type
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_time
          required: true
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_time
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_userbehavior_app.FeatureUsageResult
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-user-behavior
      description: 获取指定时间范围内的功能使用统计，包含各功能使用次数、使用人数等
      summary: '[内部] 获取功能使用统计'
  /api/v1/admin/user-behavior/logins:
    get:
      parameters:
        - description: '用户类型: admin, agent, merchant, system'
          in: query
          name: user_type
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_time
          required: true
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_time
          required: true
          schema:
            type: string
        - description: '时间粒度: hour, day, week, month'
          in: query
          name: granularity
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_userbehavior_app.LoginAnalysis
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-user-behavior
      description: 获取指定时间范围内的登录行为分析，包含登录次数、成功率、登录趋势等
      summary: '[内部] 获取登录行为分析'
  /api/v1/admin/user-behavior/operations:
    get:
      parameters:
        - description: '用户类型: admin, agent, merchant, system'
          in: query
          name: user_type
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_time
          required: true
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_time
          required: true
          schema:
            type: string
        - description: '时间粒度: hour, day, week, month'
          in: query
          name: granularity
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_userbehavior_app.OperationAnalysis
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-user-behavior
      description: 获取指定时间范围内的操作行为分析，包含操作次数、操作类型分布、��作趋势等
      summary: '[内部] 获取操作行为分析'
  /api/v1/admin/user-behavior/summary:
    get:
      parameters:
        - description: '用户类型: admin, agent, merchant, system'
          in: query
          name: user_type
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_time
          required: true
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_time
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_userbehavior_app.BehaviorSummary
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-user-behavior
      description: 获取指定时间范围内的用户行为分析概览，包含总用户数、活跃用户数、登录次数、操作次数等
      summary: '[内部] 获取用户行为分析概览'
  '/api/v1/admin/user-behavior/users/{user_id}':
    get:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_time
          required: true
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_time
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_userbehavior_app.UserDetailResult
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 用户不存在
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-user-behavior
      description: 获取指定用户在时间范围内的行为详情，包含登录历史、操作历史、异常记录等
      summary: '[内部] 获取单用户行为详情'
  '/api/v1/admin/users/{user_id}/mfa/lock-status':
    get:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerGetMFALockStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Admin MFA Management
      description: 管理员查看用户的 MFA 锁定状态（失败次数、是否锁定）
      summary: 获取用户 MFA 锁定状态
  '/api/v1/admin/users/{user_id}/mfa/unlock':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
          description: 解锁成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 用户不存在
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Admin MFA Management
      description: 管理员解锁被锁定的用户 MFA（5次验证失败后锁定）
      summary: 解锁用户 MFA
  /api/v1/agent-users:
    get:
      parameters:
        - description: 代理商 ID
          in: query
          name: agent_id
          schema:
            type: string
        - description: 状态筛选
          in: query
          name: status
          schema:
            type: string
        - description: 角色 ID 筛选
          in: query
          name: role_id
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.ListAgentUsersResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User Admin
      description: 管理员跨代理商查询所有代理商用户
      summary: 查询全局代理商用户列表
  '/api/v1/agent-users/{user_id}':
    delete:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 删除指定的代理商用户
      summary: 删除代理商用户
    get:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 根据用户 ID 获取代理商用户详情
      summary: 获取代理商用户详情
    put:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 更新代理商用户的基本信息
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_agent_app.UpdateAgentUserRequest
        description: 更新用户请求
        required: true
      summary: 更新代理商用户信息
  '/api/v1/agent-users/{user_id}/activate':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 激活指定的代理商用户
      summary: 激活代理商用户
  '/api/v1/agent-users/{user_id}/deactivate':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 停用指定的代理商用户
      summary: 停用代理商用户
  '/api/v1/agent-users/{user_id}/lock':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 锁定指定的代理商用户
      summary: 锁定代理商用户
  '/api/v1/agent-users/{user_id}/mfa':
    delete:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 管理员重置指定代理商用户的 MFA 设置
      summary: 重置代理商用户 MFA
    get:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentMFAStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 获取指定代理商用户的 MFA 状态
      summary: 获取代理商用户 MFA 状态
  '/api/v1/agent-users/{user_id}/password':
    put:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 修改代理商用户密码
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_agent_app.AgentChangePasswordRequest
        description: 修改密码请求
        required: true
      summary: 修改代理商用户密码
  '/api/v1/agent-users/{user_id}/roles':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 为指定代理商用户分配角色
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_agent_app.AgentAssignRoleRequest
        description: 分配角色请求
        required: true
      summary: 分配代理商用户角色
  '/api/v1/agent-users/{user_id}/status':
    patch:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            format: uuid
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentUserActionResponse
          description: 状态变更成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 权限不足
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 用户不存在
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 状态冲突
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器内部错误
      security:
        - ApiKeyAuth: []
      tags:
        - Agent User
      description: 统一的状态变更端点，支持 activate/deactivate/lock/unlock 操作
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_agent_app.AgentUserActionRequest
        description: '操作请求 (action: activate/deactivate/lock/unlock)'
        required: true
      summary: 变更代理商用户状态
  '/api/v1/agent-users/{user_id}/unlock':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 解锁指定的代理商用户
      summary: 解锁代理商用户
  /api/v1/agents:
    get:
      parameters:
        - description: 状态筛选
          in: query
          name: status
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.ListAgentsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 查询代理商列表（支持分页和状态筛选）
      summary: 查询代理商列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_agent_app.AgentResponse'
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 创建新的代理商
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_agent_app.CreateAgentRequest
        description: 创建代理商请求
        required: true
      summary: 创建代理商
  '/api/v1/agents/{agent_id}/status':
    patch:
      parameters:
        - description: 代理商 ID
          in: path
          name: agent_id
          required: true
          schema:
            format: uuid
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentActionResponse
          description: 状态变更成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 权限不足
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 代理商不存在
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 状态冲突
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器内部错误
      security:
        - ApiKeyAuth: []
      tags:
        - Agent
      description: 统一的状态变更端点，支持 approve/reject/reset/activate/suspend/close 操作
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_agent_app.AgentActionRequest
        description: '操作请求 (action: approve/reject/reset/activate/suspend/close)'
        required: true
      summary: 变更代理商状态
  '/api/v1/agents/{agent_id}/users':
    get:
      parameters:
        - description: 代理商 ID
          in: path
          name: agent_id
          required: true
          schema:
            type: string
        - description: 状态筛选
          in: query
          name: status
          schema:
            type: string
        - description: 角色 ID 筛选
          in: query
          name: role_id
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.ListAgentUsersResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 获取指定代理商的所有用户列表
      summary: 查询代理商用户列表
    post:
      parameters:
        - description: 代理商 ID
          in: path
          name: agent_id
          required: true
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentUserResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent User
      description: 为指定代理商创建新用户
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_agent_app.CreateAgentUserRequest
        description: 创建用户请求
        required: true
      summary: 创建代理商用户
  '/api/v1/agents/{id}':
    get:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_agent_app.AgentResponse'
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 根据 ID 获取代理商详情
      summary: 获取代理商详情
    put:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_agent_app.AgentResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 更新代理商基本信息
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_agent_app.UpdateAgentRequest
        description: 更新代理商请求
        required: true
      summary: 更新代理商
  '/api/v1/agents/{id}/activate':
    post:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentStatusChangeResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 激活已审核通过的代理商
      summary: 激活代理商
  '/api/v1/agents/{id}/approve':
    post:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentStatusChangeResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 将待审核代理商审核通过
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerApproveAgentRequest
        description: 审核通过请求
        required: true
      summary: 审核通过代理商
  '/api/v1/agents/{id}/close':
    post:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentStatusChangeResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 永久关闭代理商账户
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerCloseAgentRequest
        description: 关闭请求
        required: true
      summary: 关闭代理商
  '/api/v1/agents/{id}/commission-rules':
    get:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_agent_app.CommissionRuleResponse
                type: array
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 查询代理商的所有佣金规则
      summary: 查询佣金规则列表
    post:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.CommissionRuleResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 为代理商配置新的佣金规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_agent_app.ConfigureCommissionRuleRequest
        description: 配置佣金规则请求
        required: true
      summary: 配置佣金规则
  '/api/v1/agents/{id}/commission-rules/{rule_id}':
    delete:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 删除代理商的佣金规则
      summary: 删除佣金规则
    put:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.CommissionRuleResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 更新代理商的佣金规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_agent_app.UpdateCommissionRuleRequest
        description: 更新佣金规则请求
        required: true
      summary: 更新佣金规则
  '/api/v1/agents/{id}/merchants':
    get:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.ListMerchantIDsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 查询代理商关联的商户ID列表
      summary: 查询代理商的商户列表
    post:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 将商户分配给指定代理商
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerAssignMerchantRequest
        description: 分配商户请求
        required: true
      summary: 分配商户给代理商
  '/api/v1/agents/{id}/reject':
    post:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentStatusChangeResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 将待审核代理商审核拒绝
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerRejectAgentRequest
        description: 审核拒绝请求
        required: true
      summary: 审核拒绝代理商
  '/api/v1/agents/{id}/reset':
    post:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentStatusChangeResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 将被拒绝的代理商重置为待审核状态
      summary: 重置代理商为待审核状态
  '/api/v1/agents/{id}/suspend':
    post:
      parameters:
        - description: 代理商 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_agent_app.AgentStatusChangeResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Agent
      description: 暂停活跃的代理商
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerSuspendAgentRequest
        description: 暂停请求
        required: true
      summary: 暂停代理商
  /api/v1/analytics/advanced/anomalies:
    get:
      parameters:
        - description: 商户ID (UUID)
          in: query
          name: merchant_id
          schema:
            type: string
        - description: '状态 (detected, acknowledged, resolved, dismissed)'
          in: query
          name: status
          schema:
            type: string
        - description: 开始时间 (Unix毫秒)
          in: query
          name: start_time
          required: true
          schema:
            format: int64
            type: integer
        - description: 结束时间 (Unix毫秒)
          in: query
          name: end_time
          required: true
          schema:
            format: int64
            type: integer
        - description: 页码
          in: query
          name: page
          schema:
            default: 1
            type: integer
        - description: 每页数量
          in: query
          name: page_size
          schema:
            default: 20
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.ListAnomaliesResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-analytics-advanced
      description: 获取检测到的异常记录列表
      summary: 获取异常列表
  '/api/v1/analytics/advanced/anomalies/{id}/acknowledge':
    post:
      parameters:
        - description: 异常ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.AnomalyRecordDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-analytics-advanced
      description: 确认指定异常记录
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_analytics_app.AcknowledgeAnomalyRequest
        description: 确认请求
        required: true
      summary: 确认异常
  /api/v1/analytics/advanced/anomaly/detect:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.AnomalyDetectResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-analytics-advanced
      description: 基于 Z-score 方法检测业务异常
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_analytics_app.AnomalyDetectRequest
        description: 检测请求
        required: true
      summary: 异常检测
  /api/v1/analytics/advanced/behavior/profile:
    get:
      parameters:
        - description: 商户ID (UUID)
          in: query
          name: merchant_id
          required: true
          schema:
            type: string
        - description: '画像类型 (transaction, payment, refund)'
          in: query
          name: profile_type
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.BehaviorProfileResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-analytics-advanced
      description: 获取指定商户的行为画像
      summary: 获取行为画像
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.BehaviorProfileResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-analytics-advanced
      description: 为指定商户生成行为画像
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_analytics_app.BehaviorProfileRequest
        description: 画像请求
        required: true
      summary: 生成行为画像
  /api/v1/analytics/advanced/trend/predict:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.TrendPredictionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-analytics-advanced
      description: 基于 Holt-Winters 算法生成趋势预测
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_analytics_app.TrendPredictRequest
        description: 预测请求
        required: true
      summary: 趋势预测
  /api/v1/analytics/channels/performance:
    get:
      parameters:
        - description: 开始时间（Unix毫秒）
          in: query
          name: start_time
          required: true
          schema:
            type: integer
        - description: 结束时间（Unix毫秒）
          in: query
          name: end_time
          required: true
          schema:
            type: integer
        - description: 商户ID（可选）
          in: query
          name: merchant_id
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_analytics_app.ChannelStatDTO
                type: array
          description: 通道性能数据列表
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器内部错误
      tags:
        - Admin Analytics
      description: 获取各支付通道的性能指标，包括成功率、平均处理时间等
      summary: 获取通道性能数据
  /api/v1/analytics/comparison:
    get:
      parameters:
        - description: 当前周期开始时间（Unix毫秒）
          in: query
          name: current_start_time
          required: true
          schema:
            type: integer
        - description: 当前周期结束时间（Unix毫秒）
          in: query
          name: current_end_time
          required: true
          schema:
            type: integer
        - description: 对比周期开始时间（Unix毫秒）
          in: query
          name: compare_start_time
          required: true
          schema:
            type: integer
        - description: 对比周期结束时间（Unix毫秒）
          in: query
          name: compare_end_time
          required: true
          schema:
            type: integer
        - description: 商户ID（可选）
          in: query
          name: merchant_id
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.ComparisonResponse
          description: 对比报告数据
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器内部错误
      tags:
        - Admin Analytics
      description: 对比两个时间段的交易数据，计算变化率
      summary: 获取对比报告
  /api/v1/analytics/dashboard:
    get:
      parameters:
        - description: 开始时间（Unix毫秒）
          in: query
          name: start_time
          required: true
          schema:
            type: integer
        - description: 结束时间（Unix毫秒）
          in: query
          name: end_time
          required: true
          schema:
            type: integer
        - description: 时间粒度
          in: query
          name: granularity
          schema:
            enum:
              - minute
              - hour
              - day
            type: string
        - description: 商户ID（可选，用于筛选特定商户）
          in: query
          name: merchant_id
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.DashboardResponse
          description: 仪表盘数据
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器内部错误
      tags:
        - Admin Analytics
      description: 获取交易概览、退款统计、趋势数据和通道分布等仪表盘信息
      summary: 获取仪表盘数据
  /api/v1/analytics/export:
    post:
      responses:
        '200':
          content:
            application/json: {}
            application/octet-stream: {}
          description: 导出的文件（CSV/Excel/JSON）
          headers:
            Content-Disposition:
              description: 文件名（attachment）
              schema:
                type: string
            Content-Type:
              description: >-
                文件 MIME 类型: text/csv; charset=utf-8 (csv) 或
                application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
                (xlsx) 或 application/json; charset=utf-8 (json)
              schema:
                type: string
            X-Export-Total-Records:
              description: 导出的记录总数
              schema:
                type: string
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            application/octet-stream:
              schema:
                additionalProperties: true
                type: object
          description: >-
            请求参数错误（时间范围、格式等）"
            example({"error":"invalid_request","message":"Invalid request
            format: missing field"})
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            application/octet-stream:
              schema:
                additionalProperties: true
                type: object
          description: >-
            服务器内部错误" example({"error":"export_failed","message":"Failed to
            generate report. Please try again or contact support."})
        '503':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            application/octet-stream:
              schema:
                additionalProperties: true
                type: object
          description: >-
            导出服务不可用（通常为配置错误，非运行时问题）"
            example({"error":"service_unavailable","message":"Export service is
            not available. Please try again later."})
      tags:
        - Admin Analytics
      description: |-
        导出分析报告为 CSV、Excel 或 JSON 格式，支持交易、退款、账本、商户四种报表类型。
        ���持流式导出，最大导出 100,000 条记录，时间范围不超过 90 天。
        导出文件直接返回，适用于中小数据量（建议 < 100,000 条）。

        性能说明:
        - 小数据量 (< 10,000 条): 通常 < 5 秒
        - 中等数据量 (10,000-50,000 条): 通常 5-30 秒
        - 大数据量 (50,000-100,000 条): 通常 30-60 秒
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_analytics_app.ExportReportRequest
        description: >-
          导出请求参数。必需字段: report_type(transaction/refund/ledger/merchant),
          format(csv/xlsx/json), start_time(Unix毫秒), end_time(Unix毫秒), tenant_id
          由认证中间件自动设置
        required: true
      summary: 导出分析报告
  /api/v1/analytics/export/async:
    get:
      parameters:
        - description: 每页数量（最大100）
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
        - description: 商户ID（可选，用于筛选特定商户的任务）
          in: query
          name: merchant_id
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.ListAsyncExportTasksResponse
          description: 任务列表和分页信息
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            请求参数错误" example({"error":"invalid_parameter","message":"Invalid
            limit or offset"})
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            服务器内部错误" example({"error":"query_failed","message":"Failed to list
            tasks"})
      tags:
        - Admin Analytics
      description: 分页列出当前租户的异步导出任务，支持商户ID过滤
      summary: 列出异步导出任务
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.CreateAsyncExportResponse
          description: 任务创建成功，返回任务ID和状态
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            请求参数错误" example({"error":"invalid_request","message":"Invalid
            request format"})
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            服务器内部错误" example({"error":"task_creation_failed","message":"Failed
            to create export task"})
        '503':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            服务不可用" example({"error":"service_unavailable","message":"Async
            export service is not available"})
      tags:
        - Admin Analytics
      description: |-
        创建异步导出任务，用于大数据量（>100,000条）的报表导出。
        任务创建后会在后台处理，完成后文件可保留72小时，支持 Webhook 回调通知。

        使用场景:
        - 大数据量导出 (> 100,000 条记录)
        - 长时间范围查询 (> 30 天)
        - 需要异步处理的批量导出
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_analytics_app.CreateAsyncExportRequest
        description: '创建异步导出任务请求。必需字段: report_type, format, start_time, end_time'
        required: true
      summary: 创建异步导出任务
  /api/v1/analytics/export/async/stats:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.AsyncExportTaskStatsResponse
          description: 任务统计信息
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            服务器内部错误" example({"error":"query_failed","message":"Failed to get
            task statistics"})
      tags:
        - Admin Analytics
      description: 获取当前租户的异步导出任务统计信息，包括各状态任务数量
      summary: 获取异步导出任务统计
  '/api/v1/analytics/export/async/{task_id}':
    delete:
      parameters:
        - description: 任务ID（UUID格式）
          in: path
          name: task_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: '任务取消成功" example({"message":"Task canceled successfully"})'
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            请求参数错误或任务无法取消" example({"error":"cancel_failed","message":"Cannot
            cancel task: task not in pending status"})
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            任务不存在" example({"error":"task_not_found","message":"Task not
            found"})
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            服务器内部错误" example({"error":"cancel_failed","message":"Failed to
            cancel task"})
      tags:
        - Admin Analytics
      description: 取消待处理（pending）状态的异步导出任务。只有 pending 状态的任务可以取消。
      summary: 取消异步导出任务
    get:
      parameters:
        - description: 任务ID（UUID格式）
          in: path
          name: task_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.AsyncExportTaskResponse
          description: 任务状态和详细信息
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            请求参数错误（无效的UUID）"
            example({"error":"invalid_task_id","message":"Invalid task ID
            format"})
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            任务不存在" example({"error":"task_not_found","message":"Task not
            found"})
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            服务器内部错误" example({"error":"query_failed","message":"Failed to query
            task status"})
      tags:
        - Admin Analytics
      description: 根据任务ID查询异步导出任务的状态、进度和结果信息
      summary: 查询异步导出任务状态
  '/api/v1/analytics/export/async/{task_id}/download':
    get:
      parameters:
        - description: 任务ID（UUID格式）
          in: path
          name: task_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.DownloadInfoResponse
          description: 下载信息
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            请求参数错误或任务无法下载" example({"error":"download_failed","message":"Task is
            not completed"})
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            任务不存在" example({"error":"task_not_found","message":"Task not
            found"})
        '410':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            文件已过期" example({"error":"file_expired","message":"Task file has
            expired"})
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            服务器内部错误" example({"error":"download_failed","message":"Failed to get
            download info"})
      tags:
        - Admin Analytics
      description: 获取已完成任务的文件下载信息。只有 completed 状态且未过期的任务可以下载。
      summary: 获取异步导出任务下载信息
  '/api/v1/analytics/export/async/{task_id}/retry':
    post:
      parameters:
        - description: 原任务ID（UUID格式）
          in: path
          name: task_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.CreateAsyncExportResponse
          description: 新任务创建成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            请求参数错误或任务无法重试" example({"error":"retry_failed","message":"Only
            failed tasks can be retried"})
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            任务不存在" example({"error":"task_not_found","message":"Task not
            found"})
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: >-
            服务器内部错误" example({"error":"retry_failed","message":"Failed to retry
            task"})
      tags:
        - Admin Analytics
      description: 为失败（failed）状态的任务创建一个新任务，复制原任务的参数。返回新任务信息。
      summary: 重试失败的异步导出任务
  /api/v1/analytics/merchants/top:
    get:
      parameters:
        - description: 开始时间（Unix毫秒）
          in: query
          name: start_time
          required: true
          schema:
            type: integer
        - description: 结束时间（Unix毫秒）
          in: query
          name: end_time
          required: true
          schema:
            type: integer
        - description: 返回数量
          in: query
          name: limit
          schema:
            default: 10
            type: integer
        - description: 排序字段
          in: query
          name: sort_by
          schema:
            enum:
              - total_amount
              - transaction_count
              - success_rate
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.TopMerchantsResponse
          description: Top商户数据
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器内部错误
      tags:
        - Admin Analytics
      description: 按交易量、交易额或成功率排序获取 Top 商户列表
      summary: 获取 Top 商户
  /api/v1/analytics/realtime:
    get:
      parameters:
        - description: 商户ID（可选）
          in: query
          name: merchant_id
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.RealTimeMetricsResponse
          description: 实时指标数据
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器内部错误
      tags:
        - Admin Analytics
      description: 获取最近1分钟和1小时的实时交易指标
      summary: 获取实时指标
  /api/v1/analytics/realtime/enhanced:
    get:
      parameters:
        - description: 商户ID（可选，UUID格式）
          in: query
          name: merchant_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.RealTimeMetricsEnhancedResponse
          description: 增强版实时指标数据
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器内部错误
      tags:
        - Admin Analytics
      description: 获取实时交易指标及待处理订单统计
      summary: 获取增强版实时指标
  /api/v1/analytics/success-rate/trend:
    get:
      parameters:
        - description: 开始时间（Unix毫秒）
          in: query
          name: start_time
          required: true
          schema:
            type: integer
        - description: 结束时间（Unix毫秒）
          in: query
          name: end_time
          required: true
          schema:
            type: integer
        - description: 时间粒度
          in: query
          name: granularity
          schema:
            default: hour
            enum:
              - hour
              - day
            type: string
        - description: 分组维度
          in: query
          name: group_by
          schema:
            default: payment_method
            enum:
              - channel
              - payment_method
            type: string
        - description: 商户ID（可选，UUID格式）
          in: query
          name: merchant_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.SuccessRateTrendResponse
          description: 成功率趋势数据
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器内部错误
      tags:
        - Admin Analytics
      description: 获取指定时间范围内按通道或支付方式分组的成功率趋势数据
      summary: 获取成功率趋势
  /api/v1/analytics/transactions/anomalies:
    get:
      parameters:
        - description: 开始时间（Unix毫秒）
          in: query
          name: start_time
          required: true
          schema:
            type: integer
        - description: 结束时间（Unix毫秒）
          in: query
          name: end_time
          required: true
          schema:
            type: integer
        - description: 商户ID（可选，UUID格式）
          in: query
          name: merchant_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.TransactionAnomaliesResponse
          description: 异常订单统计数据
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器内部错误
      tags:
        - Admin Analytics
      description: 获取指定时间范围内按失败原因分组的异常订单统计
      summary: 获取异常订单统计
  /api/v1/analytics/transactions/currency-distribution:
    get:
      parameters:
        - description: 开始时间（Unix毫秒）
          in: query
          name: start_time
          required: true
          schema:
            type: integer
        - description: 结束时间（Unix毫秒）
          in: query
          name: end_time
          required: true
          schema:
            type: integer
        - description: 商户ID（可选，UUID格式）
          in: query
          name: merchant_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.CurrencyDistributionResponse
          description: 币种分布数据
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器内部错误
      tags:
        - Admin Analytics
      description: 获取指定时间范围内各币种的交易统计及占比
      summary: 获取币种分布统计
  /api/v1/analytics/transactions/period-summary:
    get:
      parameters:
        - description: 时段类型
          in: query
          name: period
          required: true
          schema:
            enum:
              - today
              - this_week
              - this_month
            type: string
        - description: 商户ID（可选，UUID格式）
          in: query
          name: merchant_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_analytics_app.PeriodSummaryResponse
          description: 时段摘要数据
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器内部错误
      tags:
        - Admin Analytics
      description: 获取预设时段（今天/本周/本月）的交易统计及与上一时段的对比数据
      summary: 获取时段摘要（快捷对比）
  /api/v1/analytics/transactions/stats:
    get:
      parameters:
        - description: 开始时间（Unix毫秒）
          in: query
          name: start_time
          required: true
          schema:
            type: integer
        - description: 结束时间（Unix毫秒）
          in: query
          name: end_time
          required: true
          schema:
            type: integer
        - description: 时间粒度（minute/hour/day）
          in: query
          name: granularity
          schema:
            default: day
            type: string
        - description: 页码
          in: query
          name: page
          schema:
            default: 1
            type: integer
        - description: 每页数量
          in: query
          name: page_size
          schema:
            default: 20
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_analytics_app.TransactionStatDTO
                type: array
          description: 交易统计数据列表
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器内部错误
      tags:
        - Admin Analytics
      description: 按时间粒度获取交易统计，支持分页和多维度分组
      summary: 获取交易统计数据
  /api/v1/audit-logs:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
        - description: 操作者ID
          in: query
          name: operator_id
          schema:
            type: string
        - description: >-
            操作分类 (merchant, payment, channel, risk, settlement, agent, system,
            user, report, audit)
          in: query
          name: action_category
          schema:
            type: string
        - description: 操作类型
          in: query
          name: action
          schema:
            type: string
        - description: 资源类型
          in: query
          name: resource_type
          schema:
            type: string
        - description: 资源ID
          in: query
          name: resource_id
          schema:
            type: string
        - description: '操作结果 (success, failed, denied)'
          in: query
          name: result
          schema:
            type: string
        - description: 开始时间 (RFC3339格式)
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间 (RFC3339格式)
          in: query
          name: end_time
          schema:
            type: string
        - description: 搜索关键词
          in: query
          name: search
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerListAuditLogsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-audit
      description: 查询操作审计日志，支持多条件筛选和全文搜索
      summary: '[内部] 获取审计日志列表'
  /api/v1/audit-logs/stats:
    get:
      parameters:
        - description: 开始时间 (RFC3339格式)
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间 (RFC3339格式)
          in: query
          name: end_time
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerAuditStatsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-audit
      description: 获取审计日志的统计信息
      summary: '[内部] 获取审计日志统计'
  /api/v1/audit-logs/stats/by-category:
    get:
      parameters:
        - description: 开始时间 (RFC3339格式)
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间 (RFC3339格式)
          in: query
          name: end_time
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_admin_app.HandlerCategoryStatsResponse
                type: array
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-audit
      description: 按操作分类获取审计日志的统计信息
      summary: '[内部] 按分类获取审计统计'
  '/api/v1/audit-logs/{log_id}':
    get:
      parameters:
        - description: 审计日志ID
          example: '"00000000-0000-0000-0000-000000000001"'
          in: path
          name: log_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerAuditLogResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-audit
      description: 根据ID获取审计日志详情
      summary: '[内部] 获取审计日志详情'
  /api/v1/auth/login:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerAdminLoginResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 凭证无效
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 账户被锁定或风控拒绝
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin Auth
      description: Admin 用户登录，验证 Keycloak 后返回会话 ID 和 MFA 状态
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerAdminLoginRequest
        description: 登录请求
        required: true
      summary: Admin 登录
  /api/v1/auth/logout:
    post:
      responses:
        '204':
          description: 登出成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin Auth
      description: Admin 用户登出（吊销 Token）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerLogoutRequest
        description: 登出请求
        required: true
      summary: Admin 登出
  /api/v1/auth/mfa/backup-codes/regenerate:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerRegenerateBackupCodesResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Admin MFA
      description: 用户重新生成 TOTP 备用码（需要验证当前 TOTP）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerRegenerateBackupCodesRequest
        description: 重新生成请求
        required: true
      summary: 重新生成备用码
  /api/v1/auth/mfa/backup-codes/remaining:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerGetRemainingBackupCodesResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Admin MFA
      description: 用户查看剩余的备用码数量
      summary: 获取剩余备用码数量
  /api/v1/auth/mfa/passkey/authentication-options:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.PasskeyAuthenticationOptionsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 获取 WebAuthn 验证所需的 challenge 和允许的凭证列表
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerPasskeyAuthenticationOptionsRequest
        description: Passkey 验证选项请求
        required: true
      summary: 获取 Passkey 验证选项
  /api/v1/auth/mfa/passkey/bind:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.PasskeyBindResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 验证 WebAuthn attestation 响应并绑定 Passkey
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerPasskeyBindRequest
        description: Passkey 绑定请求
        required: true
      summary: 绑定 Passkey
  /api/v1/auth/mfa/passkey/registration-options:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantPasskeyRegistrationOptionsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 获取 WebAuthn 注册所需的 challenge 和配置信息
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerPasskeyRegistrationOptionsRequest
        description: Passkey 注册选项请求
        required: true
      summary: 获取 Passkey 注册选项
  /api/v1/auth/mfa/passkey/verify:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerMFAVerifyResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 账户被锁定
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 验证 WebAuthn assertion 响应并返回 Token
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerPasskeyVerifyRequest
        description: Passkey 验证请求
        required: true
      summary: 验证 Passkey
  /api/v1/auth/mfa/status:
    get:
      parameters:
        - description: 会话 ID
          in: query
          name: session_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
      tags:
        - Admin MFA
      description: 根据会话 ID 获取当前 MFA 状态
      summary: 获取 MFA 状态
  /api/v1/auth/mfa/totp/bind:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
          description: 绑定成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: '验证 TOTP 验证码并绑定到用户账户 (Issue #847: 使用 setup_id 从数据库获取 secret)'
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerTOTPBindRequest
        description: TOTP 绑定请求
        required: true
      summary: 绑定 TOTP
  /api/v1/auth/mfa/totp/init:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerTOTPInitResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 会话无效或已过期
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: 为用户生成 TOTP 密钥信息，前端负责生成二维码
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerTOTPInitRequest
        description: TOTP 初始化请求
        required: true
      summary: 初始化 TOTP
  /api/v1/auth/mfa/verify:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerMFAVerifyResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 账户被锁定
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin MFA
      description: '验证 TOTP 验证码或备用码，成功后返回 Keycloak Token (Issue #847: 添加锁定检查和备用码消费)'
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerMFAVerifyRequest
        description: MFA 验证请求
        required: true
      summary: 验证 MFA 代码
  /api/v1/auth/refresh:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerAdminLoginResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin Auth
      description: 使用 Refresh Token 获取新的 Access Token
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerRefreshTokenRequest
        description: 刷新 Token 请求
        required: true
      summary: 刷新 Access Token
  /api/v1/auth/sensitive-action/passkey/options:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/internal_interfaces_admin_handler.SensitiveActionPasskeyOptionsOutput
          description: 获取成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 未认证
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器内部错误
      security:
        - BearerAuth: []
      tags:
        - Auth
      description: 获取 WebAuthn 验证选项，用于 Passkey 用户执行敏感操作前的验证
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/internal_interfaces_admin_handler.SensitiveActionPasskeyOptionsInput
        description: 请求参数
        required: true
      summary: 获取 Passkey 敏感操作验证选项
  /api/v1/auth/sensitive-action/verify:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/internal_interfaces_admin_handler.SensitiveActionVerifyOutput
          description: 验证成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: MFA 验证失败
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 用户被锁定
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器内部错误
      security:
        - BearerAuth: []
      tags:
        - Auth
      description: 验证 MFA 码并生成敏感操作 Token，用于执行高风险操作
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/internal_interfaces_admin_handler.SensitiveActionVerifyInput
        description: 验证请求
        required: true
      summary: 敏感操作 MFA 验证
  /api/v1/auth/sensitive-action/verify-passkey:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/internal_interfaces_admin_handler.SensitiveActionVerifyOutput
          description: 验证成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Passkey 验证失败
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 用户被锁定
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器内部错误
      security:
        - BearerAuth: []
      tags:
        - Auth
      description: 验证 Passkey (WebAuthn) 并生成敏感操作 Token，用于执行高风险操作
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/internal_interfaces_admin_handler.SensitiveActionPasskeyVerifyInput
        description: 验证请求
        required: true
      summary: Passkey 敏感操作 MFA 验证
  /api/v1/auth/tokens/revoke-all:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerRevokeTokenResponse
          description: 撤销成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器错误
      security:
        - BearerAuth: []
      tags:
        - Admin Auth
      description: 撤销当前用户的所有 Token，用于密码修改、安全事件等场景
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerRevokeAllTokensRequest
        description: 撤销请求
        required: true
      summary: 撤销所有 Token
  /api/v1/auth/trusted-devices:
    delete:
      responses:
        '204':
          description: 成功撤销所有设备
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Admin Trusted Devices
      description: 撤销当前用户的所有信任设备
      summary: 撤销所有信任设备
    get:
      parameters:
        - description: 仅显示活跃设备
          in: query
          name: active_only
          schema:
            type: boolean
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerListTrustedDevicesResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Admin Trusted Devices
      description: 列出当前登录用户的所有信任设备
      summary: 列出信任设备
  '/api/v1/auth/trusted-devices/{device_id}':
    delete:
      parameters:
        - description: 设备 ID
          in: path
          name: device_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 成功撤销
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 无效的设备 ID
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 设备不存在
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Admin Trusted Devices
      description: 撤销指定的信任设备
      summary: 撤销信任设备
  '/api/v1/auth/trusted-devices/{device_id}/name':
    patch:
      parameters:
        - description: 设备 ID
          in: path
          name: device_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 成功更新
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 无效请求
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 设备不存在
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Admin Trusted Devices
      description: 更新指定信任设备的名称
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerUpdateDeviceNameRequest
        description: 更新请求
        required: true
      summary: 更新设备名称
  /api/v1/channels:
    get:
      parameters:
        - description: 每页数量（默认20，最大100）
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  data:
                    items:
                      $ref: >-
                        #/components/schemas/psp_com_internal_channel_app.ChannelResponse
                    type: array
                  limit:
                    type: integer
                  offset:
                    type: integer
                  total:
                    type: integer
                type: object
          description: OK
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Channel
      description: 分页查询通道列表
      summary: 查询通道列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.ChannelResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Channel
      description: 创建新的支付通道
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.CreateChannelRequest
        description: 创建通道请求
        required: true
      summary: 创建通道
  /api/v1/channels/verification-report:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.VerificationReportResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Channel
      description: 获取最近的通道验证报告（执行实时验证）
      summary: 获取验证报告
  /api/v1/channels/verify-all:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.VerificationReportResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Channel
      description: 对租户所有激活通道执行验证
      requestBody:
        $ref: >-
          #/components/requestBodies/psp_com_internal_channel_app.ChannelVerifyRequest
      summary: 验证所有激活通道
  '/api/v1/channels/{channel_id}':
    get:
      parameters:
        - description: 通道 ID
          in: path
          name: channel_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.ChannelResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Channel
      description: 根据 ID 获取通道详情
      summary: 获取通道详情
    put:
      parameters:
        - description: 通道 ID
          in: path
          name: channel_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.ChannelResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Channel
      description: 更新通道配置
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.UpdateChannelRequest
        description: 更新通道请求
        required: true
      summary: 更新通道
  '/api/v1/channels/{channel_id}/config':
    get:
      parameters:
        - description: 通道 ID
          in: path
          name: channel_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.GetChannelConfigResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - ChannelConfig
      description: 获取指定通道的结构化配置（包含 common_config、payin_config、payout_config、auth_config）
      summary: 获取通道配置
    put:
      parameters:
        - description: 通道 ID
          in: path
          name: channel_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.GetChannelConfigResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - ChannelConfig
      description: 更新指定通道的结构化配置，支持部分更新（只更新传入的字段）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.UpdateChannelConfigRequest
        description: 配置更新请求
        required: true
      summary: 更新通道配置
  '/api/v1/channels/{channel_id}/disable':
    put:
      parameters:
        - description: 通道 ID
          in: path
          name: channel_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.ChannelResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Channel
      description: 停用指定通道
      summary: 禁用通道
  '/api/v1/channels/{channel_id}/enable':
    put:
      parameters:
        - description: 通道 ID
          in: path
          name: channel_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.ChannelResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Channel
      description: 激活指定通道
      summary: 启用通道
  '/api/v1/channels/{channel_id}/health':
    get:
      parameters:
        - description: 通道 ID
          in: path
          name: channel_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.HealthCheckResultDTO
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Channel
      description: 检查指定通道的健康状态
      summary: 获取通道健康状态
  '/api/v1/channels/{channel_id}/limits':
    get:
      parameters:
        - description: 通道 ID
          in: path
          name: channel_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_risk_app.LimitResponse'
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Limit
      description: 查询通道的交易限额配置
      summary: 获取通道限额
    put:
      parameters:
        - description: 通道 ID
          in: path
          name: channel_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_risk_app.LimitResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Limit
      description: 创建或更新通道的交易限额配置
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/psp_com_internal_risk_app.LimitRequest'
        description: 限额配置
        required: true
      summary: 设置通道限额
  '/api/v1/channels/{channel_id}/test-transaction':
    post:
      parameters:
        - description: 通道 ID
          in: path
          name: channel_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.TestTransactionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Channel
      description: 在指定通道创建测试交易
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.TestTransactionRequest
        description: 测试交易请求
        required: true
      summary: 执行测试交易
  '/api/v1/channels/{channel_id}/verify':
    post:
      parameters:
        - description: 通道 ID
          in: path
          name: channel_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.ChannelVerifyResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Channel
      description: 对指定通道执行完整验证，包括健康检查、凭证验证
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.ChannelVerifyRequest
        description: 验证请求
        required: true
      summary: 验证单个通道
  /api/v1/config:
    get:
      parameters:
        - description: >-
            配置分类 (general, security, rate_limit, notification, payment, channel,
            feature_flag)
          in: query
          name: category
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_systemconfig_app.ListConfigsResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config
      description: 获取系统配置列表，支持按分类过滤
      summary: 获取系统配置列表
  /api/v1/config/categories:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_systemconfig_app.ListCategoriesResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config-categories
      description: List all configuration categories
      summary: List configuration categories
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_systemconfig_app.CategoryResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Category code already exists
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config-categories
      description: Create a new configuration category
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_systemconfig_app.CreateCategoryRequest
        description: Create category request
        required: true
      summary: Create configuration category
  /api/v1/config/categories/tree:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_systemconfig_app.CategoryTreeResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config-categories
      description: Get all configuration categories as a hierarchical tree structure
      summary: Get configuration category tree
  '/api/v1/config/categories/{category_id}':
    delete:
      parameters:
        - description: Category ID
          in: path
          name: category_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: System category cannot be deleted
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Category has children or configs
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config-categories
      description: Delete a configuration category (non-system categories only)
      summary: Delete configuration category
    get:
      parameters:
        - description: Category ID
          in: path
          name: category_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_systemconfig_app.CategoryResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config-categories
      description: Get a configuration category by ID
      summary: Get configuration category
    put:
      parameters:
        - description: Category ID
          in: path
          name: category_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_systemconfig_app.CategoryResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: System category cannot be modified
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config-categories
      description: Update an existing configuration category
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_systemconfig_app.UpdateCategoryRequest
        description: Update category request
        required: true
      summary: Update configuration category
  '/api/v1/config/categories/{category_id}/move':
    post:
      parameters:
        - description: Category ID
          in: path
          name: category_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_systemconfig_app.CategoryResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: System category cannot be moved
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Circular reference detected
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config-categories
      description: Move a configuration category to a new parent
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_systemconfig_app.MoveCategoryRequestBody
        description: Move category request
        required: true
      summary: Move configuration category
  /api/v1/config/rate-limits:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_systemconfig_app.RateLimitsConfig
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config
      description: 获取系统限流配置，包括 API、支付、Webhook 的限流设置
      summary: 获取限流配置
    put:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_systemconfig_app.RateLimitsConfig
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config
      description: 批量更新系统限流配置
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_systemconfig_app.UpdateRateLimitsRequest
        description: 限流配置
        required: true
      summary: 更新限流配置
  '/api/v1/config/{key}':
    put:
      parameters:
        - description: 配置键名
          in: path
          name: key
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_systemconfig_app.ConfigItem
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config
      description: 更新指定配置项的值
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_systemconfig_app.UpdateConfigRequest
        description: 更新配置请求
        required: true
      summary: 更新配置项
  '/api/v1/config/{key}/history':
    get:
      parameters:
        - description: 配置键名
          in: path
          name: key
          required: true
          schema:
            type: string
        - description: 分页大小
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 分页偏移
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_systemconfig_app.ListVersionsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-config
      description: 获取指定配置项的变更历史记录
      summary: 获取配置变更历史
  /api/v1/corrections:
    get:
      parameters:
        - description: 状态筛选
          in: query
          name: status
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
      tags:
        - Transaction Correction
      description: 查询交易修正申请列表
      summary: 查询修正列表
  /api/v1/corrections/pending-approval:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
      tags:
        - Transaction Correction
      description: 查询待审批的交易修正申请（审批人专用）
      summary: 查询待审批修正
  /api/v1/corrections/pending-review:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
      tags:
        - Transaction Correction
      description: 查询待审核的交易修正申请（审核人专用）
      summary: 查询待审核修正
  '/api/v1/corrections/{correction_id}':
    get:
      parameters:
        - description: 修正申请 ID
          in: path
          name: correction_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.CorrectionResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      tags:
        - Transaction Correction
      description: 获取交易修正申请详情
      summary: 获取修正详情
  '/api/v1/corrections/{correction_id}/approve':
    post:
      parameters:
        - description: 修正申请 ID
          in: path
          name: correction_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.CorrectionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction Correction
      description: 审批交易修正申请（审批人不能是申请人）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerApprovalRequest
        description: 审批备注
      summary: 审批交易修正
  '/api/v1/corrections/{correction_id}/reject':
    post:
      parameters:
        - description: 修正申请 ID
          in: path
          name: correction_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.CorrectionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction Correction
      description: 拒绝交易修正申请
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerRejectRequest
        description: 拒绝原因
        required: true
      summary: 拒绝交易修正
  '/api/v1/corrections/{correction_id}/review':
    post:
      parameters:
        - description: 修正申请 ID
          in: path
          name: correction_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.CorrectionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction Correction
      description: 审核交易修正申请并执行（审核人不能是申请人或审批人）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerApprovalRequest
        description: 审核备注
      summary: 审核并执行交易修正
  /api/v1/disputes:
    get:
      parameters:
        - description: 商户ID筛选
          in: query
          name: merchant_id
          schema:
            type: string
        - description: '争议状态: open/under_review/won/lost/expired'
          in: query
          name: status
          schema:
            type: string
        - description: '争议原因: fraud/product_not_received/etc.'
          in: query
          name: reason
          schema:
            type: string
        - description: 开始日期(RFC3339)
          in: query
          name: start_date
          schema:
            type: string
        - description: 结束日期(RFC3339)
          in: query
          name: end_date
          schema:
            type: string
        - description: '每页数量(默认20,最大100)'
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_payment_creditcard_app.ListDisputesResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - ApiKeyAuth: []
      tags:
        - Admin - Disputes
      description: 获取所有争议/拒付列表，支持分页和筛选（Admin 可跨商户查询）
      summary: 获取争议列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_payment_creditcard_app.DisputeResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - ApiKeyAuth: []
      tags:
        - Admin - Disputes
      description: 管理员手动创建争议记录（用于通道 Webhook 失败补录）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_payment_creditcard_app.CreateDisputeRequest
        description: 创建争议请求
        required: true
      summary: 手动创建争议
  /api/v1/disputes/pending-evidence:
    get:
      parameters:
        - description: 截止天数内(默认3天)
          in: query
          name: days
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - ApiKeyAuth: []
      tags:
        - Admin - Disputes
      description: 获取即将过期需要提交证据的争议列表
      summary: 获取待提交证据的争议
  /api/v1/disputes/stats:
    get:
      parameters:
        - description: 商户ID筛选（可选）
          in: query
          name: merchant_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_payment_creditcard_app.DisputeSummaryResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - ApiKeyAuth: []
      tags:
        - Admin - Disputes
      description: 获取争议统计分析数据
      summary: 获取争议统计
  '/api/v1/disputes/{id}':
    get:
      parameters:
        - description: 争议ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_payment_creditcard_app.DisputeResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      security:
        - ApiKeyAuth: []
      tags:
        - Admin - Disputes
      description: 根据ID获取争议的详细信息
      summary: 获取争议详情
  '/api/v1/disputes/{id}/evidence':
    post:
      parameters:
        - description: 争议ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_payment_creditcard_app.DisputeResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      security:
        - ApiKeyAuth: []
      tags:
        - Admin - Disputes
      description: 管理员代商户提交证据材料
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_payment_creditcard_app.SubmitEvidenceRequest
        description: 证据信息
        required: true
      summary: 上传争议证据
  '/api/v1/disputes/{id}/resolve':
    post:
      parameters:
        - description: 争议ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_payment_creditcard_app.DisputeResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      security:
        - ApiKeyAuth: []
      tags:
        - Admin - Disputes
      description: 管理员解决争议（标记为胜诉/败诉/过期）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_payment_creditcard_app.ResolveDisputeRequest
        description: 解决争议请求
        required: true
      summary: 解决争议
  /api/v1/email/config:
    delete:
      responses:
        '204':
          description: 删除成功
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Email
      description: 删除租户的邮件服务器配置及 Vault 中的凭证
      summary: 删除邮件配置
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_email_app.EmailConfigResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Email
      description: 获取租户的邮件服务器配置（凭证脱敏）
      summary: 获取邮件配置
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_email_app.EmailConfigResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Email
      description: 为租户创建邮件服务器配置（SMTP/SendGrid/SES）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_email_app.CreateEmailConfigRequest
        description: 邮件配置请求
        required: true
      summary: 创建邮件配置
    put:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_email_app.EmailConfigResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 版本冲突
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Email
      description: 更新租户的邮件服务器配置
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_email_app.UpdateEmailConfigRequest
        description: 更新请求
        required: true
      summary: 更新邮件配置
  /api/v1/email/config/secrets:
    put:
      responses:
        '204':
          description: 更新成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '503':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Vault 不可用
      tags:
        - Email
      description: 更新邮件服务的敏感凭证（密码、API Key）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_email_app.UpdateEmailSecretsRequest
        description: 凭证更新请求
        required: true
      summary: 更新邮件凭证
  /api/v1/email/config/test:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_email_app.TestEmailConfigResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Email
      description: 发送测试邮件验证配置是否正确
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_email_app.TestEmailConfigRequest
        description: 测试请求
        required: true
      summary: 测试邮件配置
  /api/v1/emails/config:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_email_app.ConfigStatus'
          description: OK
      tags:
        - Email
      description: 获取当前邮件服务的配置状态
      summary: 查询邮件配置状态
  /api/v1/emails/records:
    get:
      parameters:
        - description: 收件人邮箱
          in: query
          name: email
          schema:
            type: string
        - description: 邮件模板
          in: query
          name: template
          schema:
            type: string
        - description: 发送状态
          in: query
          name: status
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_at
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_at
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_email_app.ListRecordsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Email
      description: 分页查询邮件发送记录
      summary: 查询邮件发送记录
  /api/v1/emails/registration:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_email_app.RecordResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '429':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求过于频繁
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Email
      description: 发送用户注册验证邮件
      requestBody:
        content:
          application/json:
            schema:
              type: object
        description: 注册邮件请求
        required: true
      summary: 发送注册验证邮件
  /api/v1/emails/reset-password:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_email_app.RecordResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '429':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求过于频繁
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Email
      description: 发送用户密码重置邮件
      requestBody:
        content:
          application/json:
            schema:
              type: object
        description: 重置密码邮件请求
        required: true
      summary: 发送重置密码邮件
  /api/v1/emails/test:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_email_app.RecordResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '429':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求过于频繁
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Email
      description: 发送测试邮件以验证邮件服务配置
      requestBody:
        content:
          application/json:
            schema:
              type: object
        description: 测试邮件请求
        required: true
      summary: 发送测试邮件
  '/api/v1/emails/{id}':
    get:
      parameters:
        - description: 邮件记录 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_email_app.QueuedEmailResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 无效的 ID
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 记录不存在
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Email
      description: 根据 ID 获取邮件发送记录详情
      summary: 获取邮件记录详情
  '/api/v1/emails/{id}/retry':
    post:
      parameters:
        - description: 邮件记录 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_email_app.QueuedEmailResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 无效的 ID 或邮件状态不是 failed
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 记录不存在
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Email
      description: 重试发送状态为 failed 的邮件，重置尝试次数并重新入队
      summary: 重试发送失败的邮件
  /api/v1/fees/import:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_ops_import.ImportResult'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Import/Export
      description: 通过 CSV 文件批量导入费率配置
      requestBody:
        $ref: '#/components/requestBodies/postApiV1FeesImport'
      summary: 批量导入费率
  /api/v1/fees/template:
    get:
      parameters:
        - description: '格式 (csv, excel)'
          in: query
          name: format
          schema:
            default: csv
            type: string
      responses:
        '200':
          description: 模板文件
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            application/octet-stream:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Import/Export
      description: 下载费率批量导入的 CSV/Excel 模板文件
      summary: 下载费率导入模板
  /api/v1/funds-operations:
    get:
      parameters:
        - description: 商户ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 操作类型
          in: query
          name: operation_type
          schema:
            type: string
        - description: 状态
          in: query
          name: status
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            maximum: 100
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.ListOperationsResponse
          description: OK
      tags:
        - FundsOperations
      description: 查询资金操作列表，支持按商户、类型、状态筛选
      summary: 查询资金操作列表
  /api/v1/funds-operations/adjustments:
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.FundsOperationResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
      tags:
        - FundsOperations
      description: 运营人员创建调账申请（支持五种调账类型和增加/减少方向）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_ops_app.CreateAdjustmentRequest
        description: 调账请求
        required: true
      summary: 创建调账申请
  /api/v1/funds-operations/deposits:
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.FundsOperationResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
      tags:
        - FundsOperations
      description: 运营人员录入商户线下充值信息，状态为待初审
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_ops_app.CreateDepositRequest
        description: 充值请求
        required: true
      summary: 创建充值申请
  /api/v1/funds-operations/executing-withdrawals:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            maximum: 100
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.ListOperationsResponse
          description: OK
      tags:
        - FundsOperations
      description: 获取已通过终审但尚未确认执行的提现操作列表（status=executing）
      summary: 查询待执行提现列表
  /api/v1/funds-operations/pending-final-approval:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            maximum: 100
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.ListOperationsResponse
          description: OK
      tags:
        - FundsOperations
      description: 查询待终审的资金操作列表
      summary: 查询待终审列表
  /api/v1/funds-operations/pending-first-approval:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            maximum: 100
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.ListOperationsResponse
          description: OK
      tags:
        - FundsOperations
      description: 查询待初审的资金操作列表
      summary: 查询待初审列表
  /api/v1/funds-operations/withdrawals:
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.FundsOperationResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 余额不足
      tags:
        - FundsOperations
      description: 运营人员为商户创建提现申请，自动检查余额并冻结
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_ops_app.CreateWithdrawalRequest
        description: 提现请求
        required: true
      summary: 创建提现申请
  '/api/v1/funds-operations/{id}':
    get:
      parameters:
        - description: 操作ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.FundsOperationResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      tags:
        - FundsOperations
      description: 获取指定资金操作的详细信息
      summary: 获取资金操作详情
  '/api/v1/funds-operations/{id}/attachments':
    get:
      parameters:
        - description: Operation ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_ops_app.AttachmentResponse
                type: array
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
      tags:
        - FundsOperations
      description: 获取指定资金操作的所有附件
      summary: 获取操作附件列表
    post:
      parameters:
        - description: 操作ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.AttachmentResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 文件类型不支持或超过大小限制
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 附件数量已达上限
        '503':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 存储服务未配置
      tags:
        - FundsOperations
      description: 上传资金操作的凭证附件
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                description:
                  description: 描述
                  type: string
              type: object
        required: true
      summary: 上传凭证附件
  '/api/v1/funds-operations/{id}/attachments/{attachment_id}':
    delete:
      parameters:
        - description: Operation ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: Attachment ID
          in: path
          name: attachment_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 不允许删除
      tags:
        - FundsOperations
      description: 删除操作的附件（仅在待审核状态允许）
      summary: 删除附件
  '/api/v1/funds-operations/{id}/attachments/{attachment_id}/download':
    get:
      parameters:
        - description: Operation ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: Attachment ID
          in: path
          name: attachment_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.DownloadURLResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      tags:
        - FundsOperations
      description: 获取附件的预签名下载链接
      summary: 获取附件下载链接
  '/api/v1/funds-operations/{operation_id}/status':
    patch:
      parameters:
        - description: 操作ID
          in: path
          name: operation_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.FundsOperationActionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Forbidden
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
      tags:
        - FundsOperations
      description: 统一的状态变更端点，支持 first_approve/final_approve/reject/confirm_execution
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_ops_app.FundsOperationActionRequest
        description: 操作请求
        required: true
      summary: 变更资金操作状态
  /api/v1/gateway-webhooks/events:
    get:
      parameters:
        - description: '通道提供商：sitobank, bradesco 等'
          in: query
          name: provider
          schema:
            type: string
        - description: 事件类型：pix_invoice_paid 等
          in: query
          name: webhook_type
          schema:
            type: string
        - description: 处理状态：pending/processing/completed/failed/dlq
          in: query
          name: status
          schema:
            type: string
        - description: 每页数量（默认20，最大100）
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量（默认0）
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_pkg_response.PaginatedResponse-psp_com_internal_admin_app_HandlerWebhookEventDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - GatewayWebhook
      description: 按通道/类型/状态分页查询通道推送的 Webhook 事件
      summary: 查询 Webhook 事件列表
  '/api/v1/gateway-webhooks/events/{id}':
    get:
      parameters:
        - description: 事件 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerWebhookEventDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - GatewayWebhook
      description: 获取指定 Webhook 事件的基础信息（含处理状态与重试信息）
      summary: 获取 Webhook 事件详情
  /api/v1/gateway-webhooks/failures:
    get:
      parameters:
        - description: 返回数量（默认20，最大100）
          in: query
          name: limit
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_admin_app.HandlerWebhookEventDTO
                type: array
          description: OK
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - GatewayWebhook
      description: 快速获取最近失败的 Webhook 事件（便于排查问题）
      summary: 查询最近失败的事件
  /api/v1/gateway-webhooks/pending-retries:
    get:
      parameters:
        - description: 返回数量（默认50）
          in: query
          name: limit
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_admin_app.HandlerWebhookEventDTO
                type: array
          description: OK
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - GatewayWebhook
      description: 获取即将进行重试的 Webhook 事件列表
      summary: 查询待重试的事件
  /api/v1/gateway-webhooks/providers:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  type: string
                type: array
          description: OK
      tags:
        - GatewayWebhook
      description: 返回可用于筛选的通道提供商列表
      summary: 获取通道提供商列表
  /api/v1/gateway-webhooks/search:
    get:
      parameters:
        - description: 通道交易ID
          in: query
          name: provider_tx_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_admin_app.HandlerWebhookEventDTO
                type: array
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - GatewayWebhook
      description: 根据通道提供商的交易ID搜索相关 Webhook 事件
      summary: 按通道交易ID搜索
  /api/v1/gateway-webhooks/stats:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_webhook_app.WebhookLogStats
          description: OK
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - GatewayWebhook
      description: 返回 Webhook 事件的统计信息（成功率、失败数、DLQ 数等）
      summary: 获取 Webhook 统计信息
  /api/v1/gateway-webhooks/types:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  type: string
                type: array
          description: OK
      tags:
        - GatewayWebhook
      description: 返回可用于筛选的 Webhook 事件类型列表
      summary: 获取 Webhook 类型列表
  /api/v1/imports:
    get:
      parameters:
        - description: '任务类型 (merchant, fee, reconciliation)'
          in: query
          name: task_type
          schema:
            type: string
        - description: '任务状态 (pending, processing, completed, failed, canceled)'
          in: query
          name: status
          schema:
            type: string
        - description: 分页大小
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 分页偏移
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_import.ListImportTasksResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Import/Export
      description: 查询导入任务列表（支持筛选和分页）
      summary: 列出导入任务
  '/api/v1/imports/{id}':
    get:
      parameters:
        - description: 任务 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_import.ImportTaskResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Import/Export
      description: 根据任务 ID 获取导入任务的详细信息和进度
      summary: 获取导入任务详情
  '/api/v1/imports/{id}/cancel':
    post:
      parameters:
        - description: 任务 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Import/Export
      description: 取消正在进行的导入任务
      summary: 取消导入任务
  '/api/v1/kyb/evaluate/{merchant_id}':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_kyb_app.EvaluateKYBResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - KYB Management
      description: 对指定商户执行 KYB 自动审核评估
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.EvaluateKYBRequest
        description: 评估请求
        required: true
      summary: 执行 KYB 评估
  /api/v1/kyb/rules:
    get:
      parameters:
        - description: 规则类型
          in: query
          name: rule_type
          schema:
            type: string
        - description: 是否激活
          in: query
          name: is_active
          schema:
            type: boolean
        - description: 分页大小
          in: query
          name: limit
          schema:
            type: integer
        - description: 分页偏移
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_kyb_app.ListRulesResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - KYB Management
      description: 查询 KYB 自动审核规则列表（支持筛选和分页）
      summary: 列出 KYB 规则
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_kyb_app.RuleResponse'
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '409':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - KYB Management
      description: 创建新的 KYB 自动审核规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/psp_com_internal_kyb_app.CreateRuleRequest'
        description: 创建规则请求
        required: true
      summary: 创建 KYB 规则
  '/api/v1/kyb/rules/{rule_id}':
    delete:
      parameters:
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - KYB Management
      description: 删除指定的 KYB 自动审核规则
      summary: 删除 KYB 规则
    get:
      parameters:
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_kyb_app.RuleResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - KYB Management
      description: 根据 ID 获取 KYB 规则详情
      summary: 获取 KYB 规则详情
    put:
      parameters:
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_kyb_app.RuleResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - KYB Management
      description: 更新现有的 KYB 自动审核规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/psp_com_internal_kyb_app.UpdateRuleRequest'
        description: 更新规则请求
        required: true
      summary: 更新 KYB 规则
  /api/v1/ledger/accounts:
    get:
      parameters:
        - description: '币种筛选 (BRL, MXN, INR)'
          in: query
          name: currency
          schema:
            type: string
        - description: '账户类型筛选 (merchant_settlement, platform_revenue)'
          in: query
          name: category
          schema:
            type: string
        - description: '状态筛选 (active, frozen, closed)'
          in: query
          name: status
          schema:
            type: string
        - description: 商户账户 ID 筛选
          in: query
          name: merchant_account_id
          schema:
            type: string
        - description: 每页大小
          in: query
          name: limit
          schema:
            default: 20
            maximum: 100
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_pkg_response.PaginatedResponse-psp_com_internal_ledger_app_AccountWithBalance
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Ledger Accounts
      description: 查询租户下的账本账户列表，支持按币种、类型、状态、商户账户ID筛选，返回带余额信息
      summary: 查询账本账户列表
  '/api/v1/ledger/accounts/{account_id}/freeze':
    post:
      parameters:
        - description: 账本账户 ID
          in: path
          name: account_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ledger_app.AccountCommandResult
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 账户状态冲突（已关闭）或乐观锁冲突
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Ledger
      description: 冻结指定的账本账户，冻结后该账户将无法进行资金操作
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerFreezeAccountRequest
        description: 冻结请求
      summary: 冻结账本账户
  '/api/v1/ledger/accounts/{account_id}/unfreeze':
    post:
      parameters:
        - description: 账本账户 ID
          in: path
          name: account_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ledger_app.AccountCommandResult
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 账户状态冲突（已关闭）或乐观锁冲突
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Ledger
      description: 解冻指定的账本账户，解冻后该账户恢复正常资金操作
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerUnfreezeAccountRequest
        description: 解冻请求
      summary: 解冻账本账户
  '/api/v1/ledger/accounts/{id}':
    get:
      parameters:
        - description: 账户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ledger_app.AccountDetailResult
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Ledger Accounts
      description: 获取指定账本账户的详细信息，包括余额、商户名称、冻结原因等
      summary: 获取账本账户详情
  '/api/v1/ledger/entries/{entry_id}':
    get:
      parameters:
        - description: 分录 ID
          in: path
          name: entry_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Ledger
      description: 根据分录 ID 获取详细信息
      summary: 获取分录详情
  '/api/v1/ledger/merchant-accounts/{merchant_account_id}/balance':
    get:
      parameters:
        - description: 商户账户 ID
          in: path
          name: merchant_account_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Ledger
      description: 获取商户账户的余额信息
      summary: 获取账户余额
  '/api/v1/ledger/merchant-accounts/{merchant_account_id}/entries':
    get:
      parameters:
        - description: 商户账户 ID
          in: path
          name: merchant_account_id
          required: true
          schema:
            type: string
        - description: 业务类型筛选
          in: query
          name: business_type
          schema:
            type: string
        - description: 方向筛选 (debit/credit)
          in: query
          name: direction
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_time
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Ledger
      description: 查询商户账户的账本分录（支持分页和筛选）
      summary: 查询账户分录列表
  '/api/v1/ledger/merchant-accounts/{merchant_account_id}/entries/batch':
    get:
      parameters:
        - description: 商户账户 ID
          in: path
          name: merchant_account_id
          required: true
          schema:
            type: string
        - description: 业务类型筛选
          in: query
          name: business_type
          schema:
            type: string
        - description: 方向筛选 (debit/credit)
          in: query
          name: direction
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_time
          schema:
            type: string
        - description: 最小金额
          in: query
          name: min_amount
          schema:
            type: integer
        - description: 最大金额
          in: query
          name: max_amount
          schema:
            type: integer
        - description: 游标（首页不传，翻页传入上一页返回的 next_cursor）
          in: query
          name: cursor
          schema:
            type: string
        - description: 每页数量
          in: query
          name: page_size
          schema:
            default: 20
            maximum: 1000
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Ledger
      description: 使用游标分页查询商户账户的账本分录（高性能，适合大数据量场景）
      summary: 游标分页批量查询分录
  '/api/v1/ledger/merchant-accounts/{merchant_account_id}/summary':
    get:
      parameters:
        - description: 商户账户 ID
          in: path
          name: merchant_account_id
          required: true
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_time
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Ledger
      description: 获取商户账户的交易汇总统计
      summary: 获取交易汇总
  '/api/v1/ledger/merchant-accounts/{merchant_account_id}/summary-by-type':
    get:
      parameters:
        - description: 商户账户 ID
          in: path
          name: merchant_account_id
          required: true
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_time
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Ledger
      description: 获取商户账户按业务类型分组的交易汇总统计
      summary: 获取按类型分组的交易汇总
  /api/v1/limits/alerts:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Limit
      description: 查询当前租户的限额告警列表
      summary: 查询限额告警
  /api/v1/limits/usage:
    get:
      parameters:
        - description: 主体类型 (merchant/channel)
          in: query
          name: subject_type
          required: true
          schema:
            type: string
        - description: 主体 ID
          in: query
          name: subject_id
          required: true
          schema:
            type: string
        - description: 周期类型 (daily/monthly)
          in: query
          name: period_type
          schema:
            default: daily
            type: string
        - description: 周期标识 (如 2024-01-01)
          in: query
          name: period_key
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_risk_app.UsageResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      tags:
        - Limit
      description: 查询商户或通道的限额使用情况
      summary: 查询限额用量
  /api/v1/me/mfa/methods:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.MeMFAMethodsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Me MFA
      description: 获取当前登录用户已配置的所有 MFA 方法
      summary: 获取当前用户 MFA 方法列表
  /api/v1/me/mfa/status:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.MeMFAStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Me MFA
      description: 获取当前登录用户的 MFA 配置状态，包括是否启用、主要方法等
      summary: 获取当前用户 MFA 状态
  /api/v1/me/mfa/totp/bind:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.MeTOTPBindResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 验证码无效或设置已过期
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Me MFA
      description: 验证 TOTP 验证码并绑定到当前用户账户
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.MeTOTPBindRequest
        description: TOTP 绑定请求
        required: true
      summary: 绑定 TOTP
  /api/v1/me/mfa/totp/setup:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.MeTOTPSetupResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 已存在活跃的 TOTP 绑定
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Me MFA
      description: 为当前用户生成 TOTP 密钥信息，前端负责生成二维码
      summary: 初始化 TOTP 设置
  /api/v1/me/permissions:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.MePermissionsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Me
      description: 获取当前登录用户的权限列表，供前端用于 UI 控制（按钮显示/隐藏等）
      summary: 获取当前用户权限
  /api/v1/merchant-accounts:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: '状态筛选 (active, frozen, closed)'
          in: query
          name: status
          schema:
            type: string
        - description: '账户类型 (settlement, reserve, fee)'
          in: query
          name: account_type
          schema:
            type: string
        - description: '支付方式 (pix, spei, credit_card, ...)'
          in: query
          name: payment_method
          schema:
            type: string
        - description: '币种 (BRL, MXN, ...)'
          in: query
          name: currency
          schema:
            type: string
        - description: 关键词搜索（商户名/编码/账户编码）
          in: query
          name: keyword
          schema:
            type: string
        - description: 创建时间起始 (RFC3339)
          in: query
          name: created_from
          schema:
            type: string
        - description: 创建时间结束 (RFC3339)
          in: query
          name: created_to
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListMerchantAccountsAdminResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant Account Admin
      description: 管理员跨商户查询所有商户账户（支持筛选和分页）
      summary: 查询全局商户账户列表
  /api/v1/merchant-users:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: '状态筛选 (active, inactive, locked)'
          in: query
          name: status
          schema:
            type: string
        - description: '用户类型 (admin, merchant, operator)'
          in: query
          name: user_type
          schema:
            type: string
        - description: 关键词搜索（用户名/邮箱/姓名/商户名/商户编码）
          in: query
          name: keyword
          schema:
            type: string
        - description: '角色代码筛选（如 admin, operator 等）'
          in: query
          name: role
          schema:
            type: string
        - description: 创建时间起始 (RFC3339)
          in: query
          name: created_from
          schema:
            type: string
        - description: 创建时间结束 (RFC3339)
          in: query
          name: created_to
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListMerchantUsersAdminResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant User Admin
      description: 管理员跨商户查询所有商户用户（支持筛选和分页）
      summary: 查询全局商户用户列表
  '/api/v1/merchant-users/{id}/mfa':
    get:
      parameters:
        - description: 商户用户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/internal_interfaces_admin_handler.MerchantUserMFAResponse
          description: 成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 参数错误
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 用户不存在
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 内部错误
      tags:
        - Merchant User
      description: 获取指定商户用户的 MFA 启用状态、方法列表
      summary: 获取商户用户 MFA 状态
  '/api/v1/merchant-users/{id}/mfa/disable':
    post:
      parameters:
        - description: 商户用户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 参数错误
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 用户不存在
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 内部错误
      tags:
        - Merchant User
      description: 禁用指定商户用户的所有 MFA 方法
      summary: 禁用商户用户 MFA
  '/api/v1/merchant-users/{user_id}':
    delete:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 删除指定商户用户
      summary: 删除商户用户
  /api/v1/merchants:
    get:
      parameters:
        - description: 状态筛选 (pending/active/suspended/closed/rejected)
          example: '"active"'
          in: query
          name: status
          schema:
            type: string
        - description: KYB 状态筛选 (pending/in_review/verified/rejected)
          example: '"verified"'
          in: query
          name: kyb_status
          schema:
            type: string
        - description: 国家代码筛选
          example: '"BR"'
          in: query
          name: country_code
          schema:
            type: string
        - description: 关键字搜索（商户名称/商户编码/邮箱）
          example: '"Loja"'
          in: query
          name: keyword
          schema:
            type: string
        - description: 创建时间起始 (RFC3339)
          example: '"2024-01-01T00:00:00Z"'
          in: query
          name: created_from
          schema:
            type: string
        - description: 创建时间结束 (RFC3339)
          example: '"2024-12-31T23:59:59Z"'
          in: query
          name: created_to
          schema:
            type: string
        - description: 每页数量 (1-100)
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListMerchantsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 查询商户列表（支持多条件筛选和分页）
      summary: 查询商户列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 创建新的商户
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.CreateMerchantRequest
        description: 创建商户请求
        required: true
      summary: 创建商户
  /api/v1/merchants/batch-activate:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.BatchMerchantStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 批量激活商户并记录审计日志
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.BatchMerchantStatusRequest
        description: 批量激活请求
        required: true
      summary: 批量激活商户
  /api/v1/merchants/batch-status:
    patch:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.BatchActionResponse
          description: 批量操作结果
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 权限不足
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器内部错误
      security:
        - ApiKeyAuth: []
      tags:
        - Merchant
      description: 批量变更商户状态，支持 activate/suspend 操作。一次最多支持 100 个商户。
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.BatchActionRequest
        description: '批量操作请求 (action: activate/suspend)'
        required: true
      summary: 批量变更商户状态
  /api/v1/merchants/batch-suspend:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.BatchMerchantStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 批量暂停商户并记录审计日志
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.BatchMerchantStatusRequest
        description: 批量暂停请求
        required: true
      summary: 批量暂停商户
  '/api/v1/merchants/code/{code}':
    get:
      parameters:
        - description: 商户编码
          in: path
          name: code
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 根据商户编码获取商户详情
      summary: 根据商户编码获取商户
  /api/v1/merchants/dashboard:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.MerchantDashboardResponse
          description: 成功
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 内部错误
      security:
        - BearerAuth: []
      tags:
        - 商户管理
      description: 获取商户总览统计数据，包括各状态商户数量、状态分布、Top 商户排名、最近新增商户
      summary: 获取商户总览仪表盘
  /api/v1/merchants/export:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ExportMerchantsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 根据筛选条件导出商户列表为 CSV/XLSX 格式
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.ExportMerchantsRequest
        description: 导出请求
        required: true
      summary: 导出商户列表
  /api/v1/merchants/export/download:
    get:
      parameters:
        - description: 文件路径
          in: query
          name: file_path
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/octet-stream: {}
          description: OK
        '404':
          content:
            application/octet-stream:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      tags:
        - Merchant
      description: 根据文件路径下载导出文件
      summary: 下载导出文件
  '/api/v1/merchants/export/{task_id}':
    get:
      parameters:
        - description: 任务 ID
          in: path
          name: task_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ExportMerchantsResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      tags:
        - Merchant
      description: 获取导出任务的处理状态
      summary: 获取导出任务状态
  /api/v1/merchants/import:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_ops_import.ImportResult'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Import/Export
      description: 通过 CSV 文件批量导入商户数据
      requestBody:
        $ref: '#/components/requestBodies/postApiV1FeesImport'
      summary: 批量导入商户
  /api/v1/merchants/import/template:
    get:
      parameters:
        - description: '格式 (csv, excel)'
          in: query
          name: format
          schema:
            default: csv
            type: string
      responses:
        '200':
          description: 模板文件
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            application/octet-stream:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Import/Export
      description: 下载商户批量导入的 CSV/Excel 模板文件
      summary: 下载商户导入模板
  /api/v1/merchants/stats:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantStatsResponse
          description: OK
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 获取商户按状态和 KYB 状态的统计数据
      summary: 获取商户统计数据
  '/api/v1/merchants/{id}':
    delete:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: '关闭商户(状态变为 closed,而非软删除)'
      summary: 删除商户
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 根据 ID 获取商户详情
      summary: 获取商户详情
    put:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 更新商户的基本信息
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.UpdateMerchantRequest
        description: 更新商户请求
        required: true
      summary: 更新商户资料
  '/api/v1/merchants/{id}/activate':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ChangeStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 激活商户并记录审计日志
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.ActivateMerchantRequest
        description: 激活商户请求
        required: true
      summary: 激活商户
  '/api/v1/merchants/{id}/approve':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ChangeStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Forbidden
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - ApiKeyAuth: []
      tags:
        - Merchant
      description: 将待审核商户审核通过并自动激活
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.ApproveMerchantRequest
        description: 审核通过请求
        required: true
      summary: 审核通过商户
  '/api/v1/merchants/{id}/detail':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantDetailResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 获取商户的完整详细信息，包含关联账户、用户等数据
      summary: 获取商户详情
  '/api/v1/merchants/{id}/kyb-status':
    put:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 更新商户的 KYB 认证状态
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.UpdateKYBStatusRequest
        description: 更新 KYB 状态请求
        required: true
      summary: 更新 KYB 状态
  '/api/v1/merchants/{id}/overview':
    get:
      parameters:
        - description: ���户ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: 查询天数 (1-365)
          in: query
          name: days
          schema:
            type: integer
        - description: 查询开始时间 (RFC3339格式)
          in: query
          name: start_time
          schema:
            type: string
        - description: 查询结束时间 (RFC3339格式)
          in: query
          name: end_time
          schema:
            type: string
        - description: 货币代码
          in: query
          name: currency
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.MerchantOverviewResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 参数错误
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 商户不存在
      security:
        - BearerAuth: []
      tags:
        - 商户管理
      description: 获取指定商户的交易统计、余额、风评等概览信息
      summary: '[内部] 获取商户概览信息'
  '/api/v1/merchants/{id}/reject':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ChangeStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Forbidden
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - ApiKeyAuth: []
      tags:
        - Merchant
      description: 将待审核商户审核拒绝
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.RejectMerchantRequest
        description: 审核拒绝请求
        required: true
      summary: 审核拒绝商户
  '/api/v1/merchants/{id}/reset':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ChangeStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Forbidden
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      security:
        - ApiKeyAuth: []
      tags:
        - Merchant
      description: 将审核拒绝的商户重置为待审核状态
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.ResetMerchantRequest
        description: 重置请求
        required: true
      summary: 重置为待审核
  '/api/v1/merchants/{id}/risk-level':
    put:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 更新商户的风险等级
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.UpdateRiskLevelRequest
        description: 更新风险等级请求
        required: true
      summary: 更新风险等级
  '/api/v1/merchants/{id}/status':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 变更商户状态，支持审计日志记录
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
        description: 状态变更请求
        required: true
      summary: 变更商户状态
  '/api/v1/merchants/{id}/status-logs':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 查询商户的状态变更审计日志
      summary: 查询状态变更历史
  '/api/v1/merchants/{id}/suspend':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ChangeStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Merchant
      description: 暂停商户并记录审计日志
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.SuspendMerchantRequest
        description: 暂停商户请求
        required: true
      summary: 暂停商户
  '/api/v1/merchants/{id}/webhooks':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_webhook_merchant_app.WebhookConfigView
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Webhook
      description: 管理员查看商户的 Webhook 配置（URL/Headers/状态）
      summary: 查看商户 Webhook 配置
  '/api/v1/merchants/{merchant_id}/ip-whitelists':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListIPWhitelistsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin IP Whitelist
      description: 获取指定商户的所有 IP 白名单配置
      summary: '[内部] 查询商户的 IP 白名单列表'
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.IPWhitelistResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: IP 地址已存在
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin IP Whitelist
      description: 为商户添加 IP 白名单规则（支持单个 IP 或 CIDR 格式）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.CreateIPWhitelistRequest
        description: 创建请求
        required: true
      summary: '[内部] 创建 IP 白名单'
  '/api/v1/merchants/{merchant_id}/ip-whitelists/{whitelist_id}':
    delete:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 白名单 ID
          in: path
          name: whitelist_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 删除成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin IP Whitelist
      description: 删除指定的 IP 白名单规则（软删除）
      summary: '[内部] 删除 IP 白名单'
    patch:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 白名单 ID
          in: path
          name: whitelist_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 更新成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin IP Whitelist
      description: 更新 IP 白名单的启用状态
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.UpdateIPWhitelistStatusRequest
        description: 状态更新请求
        required: true
      summary: '[内部] 启用/禁用 IP 白名单'
  '/api/v1/merchants/{merchant_id}/limits':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_risk_app.LimitResponse'
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Limit
      description: 查询商户的交易限额配置
      summary: 获取商户限额
    put:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_risk_app.LimitResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Limit
      description: 创建或更新商户的交易限额配置
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/psp_com_internal_risk_app.LimitRequest'
        description: 限额配置
        required: true
      summary: 设置商户限额
  '/api/v1/merchants/{merchant_id}/merchant-accounts':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 账户类型
          in: query
          name: account_type
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListMerchantAccountsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - MerchantAccount
      description: 查询商户的所有资金账户
      summary: '[内部] 查询商户账户列表'
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantAccountResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - MerchantAccount
      description: 为商户创建新的资金账户
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.CreateMerchantAccountRequest
        description: 创建账户请求
        required: true
      summary: '[内部] 创建商户账户'
  '/api/v1/merchants/{merchant_id}/merchant-accounts/{account_id}':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 账户 ID
          in: path
          name: account_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantAccountResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - MerchantAccount
      description: 根据 ID 获取账户详情
      summary: '[内部] 获取账户详情'
  '/api/v1/merchants/{merchant_id}/merchant-accounts/{account_id}/api-keys':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 账户 ID
          in: path
          name: account_id
          required: true
          schema:
            type: string
        - description: '按类型筛选: sandbox / production'
          in: query
          name: key_type
          schema:
            type: string
        - description: '按状态筛选: active / revoked / expired'
          in: query
          name: status
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListAdminAPIKeysResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin API Key
      description: 获取指定账户的所有 API 密钥（不包含密钥内容）
      summary: '[内部] 查询账户的 API 密钥列表'
  '/api/v1/merchants/{merchant_id}/merchant-accounts/{account_id}/api-keys/stats':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 账户 ID
          in: path
          name: account_id
          required: true
          schema:
            type: string
        - description: 开始日期 (YYYY-MM-DD)
          in: query
          name: start_date
          schema:
            type: string
        - description: 结束日期 (YYYY-MM-DD)
          in: query
          name: end_date
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.AccountAPIKeysStatsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin API Key
      description: 获取账户所有 API 密钥的调用统计信息
      summary: '[内部] 获取账户 API 密钥使用统计'
  '/api/v1/merchants/{merchant_id}/merchant-accounts/{account_id}/api-keys/{api_key_id}/disable':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 账户 ID
          in: path
          name: account_id
          required: true
          schema:
            type: string
        - description: API 密钥 ID
          in: path
          name: api_key_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.AdminAPIKeyActionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin API Key
      description: 禁用指定的 API 密钥
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.AdminAPIKeyActionRequest
        description: 禁用原因
        required: true
      summary: '[内部] 禁用 API 密钥'
  '/api/v1/merchants/{merchant_id}/merchant-accounts/{account_id}/deactivate':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 账户 ID
          in: path
          name: account_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantAccountResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - MerchantAccount
      description: 停用指定账户
      summary: '[内部] 停用账户'
  '/api/v1/merchants/{merchant_id}/merchant-accounts/{account_id}/freeze':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 账户 ID
          in: path
          name: account_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantAccountResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - MerchantAccount
      description: 冻结指定账户
      summary: '[内部] 冻结账户'
  '/api/v1/merchants/{merchant_id}/merchant-accounts/{account_id}/unfreeze':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 账户 ID
          in: path
          name: account_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantAccountResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - MerchantAccount
      description: 解冻指定账户
      summary: '[内部] 解冻账户'
  '/api/v1/merchants/{merchant_id}/secrets':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListSecretsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin Merchant Secret
      description: 获取指定商户的所有签名公钥配置（Ed25519/RSA）
      summary: '[内部] 查询商户的签名公钥列表'
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.SecretResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 公钥名称已存在
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin Merchant Secret
      description: 为商户添加签名公钥（支持 Ed25519、RSA2048、RSA4096）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.CreateSecretRequest
        description: 创建请求
        required: true
      summary: '[内部] 创建签名公钥'
  '/api/v1/merchants/{merchant_id}/secrets/{secret_id}':
    delete:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 公钥 ID
          in: path
          name: secret_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 撤销成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 公钥已撤销
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Admin Merchant Secret
      description: 撤销指定的签名公钥（状态变为 revoked）
      summary: '[内部] 撤销签名公钥'
  '/api/v1/merchants/{merchant_id}/status':
    patch:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            format: uuid
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ActionResponse
          description: 状态变更成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 权限不足
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 商户不存在
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 状态冲突（如商户已激活）
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器内部错误
      security:
        - ApiKeyAuth: []
      tags:
        - Merchant
      description: 统一的状态变更端点，支持 activate/suspend/approve/reject/reset 操作
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/psp_com_internal_merchant_app.ActionRequest'
        description: '操作请求 (action: activate/suspend/approve/reject/reset)'
        required: true
      summary: 变更商户状态
  '/api/v1/merchants/{merchant_id}/users':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListUsersResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 获取指定商户的所有用户列表
      summary: 查询商户的所有用户
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.UserResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 为指定商户创建新的用户
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.CreateUserRequest
        description: 创建用户请求
        required: true
      summary: 创建商户用户
  /api/v1/mfa/summary:
    get:
      parameters:
        - description: 用户类型过滤
          in: query
          name: user_type
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - Admin MFA Management
      description: 获取租户的 MFA 统计汇总信息，用于 Dashboard 展示
      summary: 获取 MFA 统计汇总
  /api/v1/mfa/users:
    get:
      parameters:
        - description: 商户 ID 过滤
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 用户类型过滤
          in: query
          name: user_type
          schema:
            type: string
        - description: 搜索关键词（用户名/邮箱/姓名）
          in: query
          name: search
          schema:
            type: string
        - description: 页码
          in: query
          name: page
          schema:
            default: 1
            type: integer
        - description: 每页数量
          in: query
          name: page_size
          schema:
            default: 20
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - Admin MFA Management
      description: 分页查询用户列表，包含 MFA 状态汇总信息
      summary: 获取用户 MFA 状态列表
  '/api/v1/mfa/users/{user_id}':
    get:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 参数错误
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 用户不存在
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - Admin MFA Management
      description: 获取用户的详细 MFA 信息，包括 MFA 方法列表和信任设备列表
      summary: 获取用户 MFA 详情
  '/api/v1/mfa/users/{user_id}/backup-codes/regenerate':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: TOTP 验证失败
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: MFA 不存在
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - Admin MFA Management
      description: 为用户重新生成 MFA 备用码（需要验证当前 TOTP 码）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerAdminRegenerateBackupCodesRequest
        description: 重新生成参数
        required: true
      summary: 重新生成用户备用码
  '/api/v1/mfa/users/{user_id}/backup-codes/remaining':
    get:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
        - description: MFA ID（可选，默认使用 primary TOTP）
          in: query
          name: mfa_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 参数错误
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: MFA 不存在
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - Admin MFA Management
      description: 查询指定用户的 MFA 备用码剩余数量
      summary: 获取用户剩余备用码数量
  '/api/v1/mfa/users/{user_id}/devices/revoke-all':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - Admin MFA Management
      description: 管理员撤销用户的所有信任设备
      summary: 撤销用户所有信任设备
  '/api/v1/mfa/users/{user_id}/devices/{device_id}/revoke':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
        - description: 设备 ID
          in: path
          name: device_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - Admin MFA Management
      description: 管理员撤销用户的指定信任设备
      summary: 撤销用户信任设备
  '/api/v1/mfa/users/{user_id}/methods/{mfa_id}':
    delete:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
        - description: MFA ID
          in: path
          name: mfa_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - Admin MFA Management
      description: 管理员删除用户的指定 MFA 认证方法
      summary: 删除用户 MFA 方法
  '/api/v1/mfa/users/{user_id}/methods/{mfa_id}/disable':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
        - description: MFA ID
          in: path
          name: mfa_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - Admin MFA Management
      description: 管理员禁用用户的指定 MFA 认证方法
      summary: 禁用用户 MFA 方法
  '/api/v1/mfa/users/{user_id}/reset':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - Admin MFA Management
      description: 管理员重置用户的所有 MFA 绑定，可选择是否同时撤销信任设备
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerResetUserMFARequest
        description: 重置参数
        required: true
      summary: 重置用户所有 MFA
  '/api/v1/mfa/users/{user_id}/unlock':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 参数错误
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - Admin MFA Management
      description: 管理员解锁因多次失败而锁定的用户 MFA
      summary: 解锁用户 MFA
  /api/v1/monitor/alert-rules:
    get:
      parameters:
        - description: '严重级别过滤 (critical, warning, info)'
          in: query
          name: severity
          schema:
            type: string
        - description: 启用状态过滤
          in: query
          name: enabled
          schema:
            type: boolean
        - description: 每页数量，默认 20
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量，默认 0
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.ListAlertRulesResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-monitor
      description: 获取告警规则列表，支持按严重级别和启用状态过滤
      summary: 获取告警规则列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.AlertRuleResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-monitor
      description: 创建新的告警规则，支持配置指标类型、条件、阈值、严重级别和通知渠道
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_monitor_app.CreateAlertRuleRequest
        description: 创建告警规则请求
        required: true
      summary: 创建告警规则
  '/api/v1/monitor/alert-rules/{rule_id}':
    delete:
      parameters:
        - description: 告警规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 删除成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 告警规则不存在
        '410':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 告警规则已删除
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-monitor
      description: 删除告警规则（软删除）
      summary: 删除告警规则
    get:
      parameters:
        - description: 告警规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.AlertRuleResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 告警规则不存在
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-monitor
      description: 根据 ID 获取告警规则详情
      summary: 获取告警规则详情
    put:
      parameters:
        - description: 告警规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.AlertRuleResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 告警规则不存在
        '409':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 版本冲突（乐观锁失败）
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-monitor
      description: 更新告警规则（部分更新），需要传递当前版本号用于乐观锁
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_monitor_app.UpdateAlertRuleRequest
        description: 更新告警规则请求
        required: true
      summary: 更新告警规则
  '/api/v1/monitor/alert-rules/{rule_id}/toggle':
    post:
      parameters:
        - description: 告警规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.AlertRuleResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 告警规则不存在
        '409':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 版本冲突（乐观锁失败）
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 内部错误
      tags:
        - admin-monitor
      description: 启用或禁用告警规则，需要传递当前版本号用于乐观锁
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_monitor_app.ToggleAlertRuleRequest
        description: 切换状态请求
        required: true
      summary: 切换告警规则状态
  /api/v1/monitor/alerts:
    get:
      parameters:
        - description: '告警状态 (active, acknowledged, resolved)'
          in: query
          name: status
          schema:
            type: string
        - description: '严重级别 (critical, warning, info)'
          in: query
          name: severity
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.ListAlertsResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 获取系统告警列表，支持按状态、严重级别、时间范围过滤
      summary: 获取告警列表
  /api/v1/monitor/alerts/stats:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.AlertStatsResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 获取告警的汇总统计信息
      summary: 获取告警统计
  '/api/v1/monitor/alerts/{alert_id}':
    get:
      parameters:
        - description: 告警ID
          in: path
          name: alert_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_monitor_app.Alert'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      tags:
        - admin-monitor
      description: 获取指定ID的告警详情
      summary: 获取单个告警
  '/api/v1/monitor/alerts/{alert_id}/ack':
    put:
      parameters:
        - description: 告警ID
          in: path
          name: alert_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      tags:
        - admin-monitor
      description: 确认指定告警，标记为已处理
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_monitor_app.AcknowledgeAlertRequest
        description: 确认信息
        required: true
      summary: 确认告警
  '/api/v1/monitor/alerts/{alert_id}/resolve':
    post:
      parameters:
        - description: 告警ID
          in: path
          name: alert_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
      tags:
        - admin-monitor
      description: 将指定告警标记为已解决
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_monitor_app.ResolveAlertRequest
        description: 解决信息
        required: true
      summary: 解决告警
  /api/v1/monitor/cache/clear:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.ClearCacheResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 清理指定类型或模式的缓存，支持 DryRun 模式
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_monitor_app.ClearCacheRequest
        description: 清理请求参数
        required: true
      summary: 清理缓存
  /api/v1/monitor/cache/health:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.CacheHealthResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 获取 Redis 缓存的健康状态，包括连接状态、延迟等
      summary: 获取缓存健康状态
  /api/v1/monitor/cache/stats:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.CacheStatsResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 获取 Redis 缓存的统计信息，包括命中率、内存使用等
      summary: 获取缓存统计信息
  /api/v1/monitor/cache/warmup:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.WarmupCacheResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 预热指定类型的缓存，从数据库加载热点数据到缓存
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_monitor_app.WarmupCacheRequest
        description: 预热请求参数
        required: true
      summary: 预热缓存
  /api/v1/monitor/dashboard:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.DashboardResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 获取实时监控大盘数据，包括交易概览、通道状态、告警汇总等
      summary: 获取监控大盘
  /api/v1/monitor/database:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.DatabaseStatsResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 获取 PostgreSQL 连接池状态信息
      summary: 获取数据库连接池统计
  /api/v1/monitor/metrics:
    get:
      parameters:
        - description: 时间范围（分钟），默认60
          in: query
          name: range_minutes
          schema:
            type: integer
        - description: '数据粒度 (1m, 5m, 15m, 1h)'
          in: query
          name: interval
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.MetricsResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 获取系统性能指标时序数据，用于监控图表展示
      summary: 获取系统指标
  /api/v1/monitor/queues:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.QueueStatsResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 获取 Kafka 消息队列状态信息
      summary: 获取消息队列统计
  /api/v1/monitor/services:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.ServicesHealthResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 获取各微服务的健康状态信息
      summary: 获取服务健康状态
  /api/v1/monitor/system:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.SystemStatsResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 获取 CPU、内存、磁盘、网络等系统资源信息
      summary: 获取系统资源统计
  /api/v1/monitor/transactions:
    get:
      parameters:
        - description: '时间范围 (1h, 6h, 24h, 7d)'
          in: query
          name: time_range
          schema:
            type: string
        - description: 支付方式过滤
          in: query
          name: payment_method
          schema:
            type: string
        - description: 通道代码过滤
          in: query
          name: channel_code
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_monitor_app.TransactionMonitorResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-monitor
      description: 获取交易监控数据，包括交易汇总、按支付方式/通道统计、最近失败交易
      summary: 获取交易监控
  /api/v1/notifications:
    get:
      parameters:
        - description: 通知状态 (逗号分隔)
          in: query
          name: status
          schema:
            type: string
        - description: 通知类别 (逗号分隔)
          in: query
          name: category
          schema:
            type: string
        - description: 开始时间 (RFC3339)
          in: query
          name: start_at
          schema:
            type: string
        - description: 结束时间 (RFC3339)
          in: query
          name: end_at
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Notification
      description: 查询当前用户的站内通知列表
      summary: 查询通知列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Notification
      description: 发送站内通知给指定用户
      requestBody:
        content:
          application/json:
            schema:
              type: object
        description: 创建通知请求
        required: true
      summary: 创建站内通知
  /api/v1/notifications/unread-count:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Notification
      description: 查询当前用户未读的站内通知数量
      summary: 查询未读通知数量
  /api/v1/onboarding:
    get:
      parameters:
        - description: 状态筛选 (draft/submitted/under_review/approved/rejected/archived)
          example: '"submitted"'
          in: query
          name: status
          schema:
            type: string
        - description: >-
            步骤筛选
            (basic_info/kyb_verification/documents_upload/fee_config/api_setup/completed)
          example: '"basic_info"'
          in: query
          name: current_step
          schema:
            type: string
        - description: 国家代码筛选
          example: '"BR"'
          in: query
          name: country_code
          schema:
            type: string
        - description: 关键字搜索（商户名称/申请编号/邮箱/税号）
          example: '"Loja"'
          in: query
          name: keyword
          schema:
            type: string
        - description: 提交时间起始 (RFC3339)
          example: '"2024-01-01T00:00:00Z"'
          in: query
          name: submitted_from
          schema:
            type: string
        - description: 提交时间结束 (RFC3339)
          example: '"2024-12-31T23:59:59Z"'
          in: query
          name: submitted_to
          schema:
            type: string
        - description: 创建时间起始 (RFC3339)
          example: '"2024-01-01T00:00:00Z"'
          in: query
          name: created_from
          schema:
            type: string
        - description: 创建时间结束 (RFC3339)
          example: '"2024-12-31T23:59:59Z"'
          in: query
          name: created_to
          schema:
            type: string
        - description: 每页数量 (1-100)
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListOnboardingsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Onboarding
      description: 查询商户入驻申请列表，支持多条件筛选和分页
      summary: 查询入驻申请列表
  /api/v1/onboarding/stats:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.OnboardingStatsResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Onboarding
      description: 获取入驻申请的状态统计和步骤统计
      summary: 获取入驻统计数据
  '/api/v1/onboarding/{id}':
    get:
      parameters:
        - description: 入驻申请 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.OnboardingResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Onboarding
      description: 根据 ID 获取入驻申请详情
      summary: 获取入驻申请详情
  '/api/v1/onboarding/{id}/status':
    patch:
      parameters:
        - description: 入驻申请 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.UpdateOnboardingStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - Onboarding
      description: 审批入驻申请（开始审核、批准、拒绝、归档）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.UpdateOnboardingStatusRequest
        description: 更新状态请求
        required: true
      summary: 更新入驻申请状态
  /api/v1/pricing/default:
    get:
      parameters:
        - description: 支付方式过滤
          in: query
          name: payment_method
          schema:
            type: string
        - description: 每页数量（默认20）
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量（默认0）
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListDefaultPricingResponse
          description: OK
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Pricing
      description: 查询租户的所有默认费率配置
      summary: 查询默认费率列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.DefaultPricingResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Pricing
      description: 设置租户级别的默认费率配置
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.SetDefaultPricingRequest
        description: 设置默认费率请求
        required: true
      summary: 设置默认费率
  /api/v1/pricing/default/effective:
    get:
      parameters:
        - description: 支付方式
          in: query
          name: payment_method
          required: true
          schema:
            type: string
        - description: 交易类型
          in: query
          name: transaction_type
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.DefaultPricingResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Pricing
      description: 获取指定支付方式和交易类型的当前有效默认费率
      summary: 获取有效的默认费率
  '/api/v1/pricing/default/{pricing_id}':
    get:
      parameters:
        - description: 费率配置 ID
          in: path
          name: pricing_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.DefaultPricingResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Pricing
      description: 根据 ID 获取默认费率配置
      summary: 获取默认费率详情
  '/api/v1/pricing/merchants/{merchant_id}':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantPricingResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Pricing
      description: 获取商户所有账户的费率配置
      summary: 获取商户费率配置
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_merchant_app.FeeResponse'
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Pricing
      description: 为指定商户账户设置费率配置
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.SetMerchantPricingRequest
        description: 设置商户费率请求
        required: true
      summary: 设置商户费率
  /api/v1/providers:
    get:
      parameters:
        - description: '支付方式过滤（如 pix, spei, creditcard）'
          in: query
          name: payment_method
          schema:
            type: string
        - description: 分页大小
          in: query
          name: limit
          schema:
            default: 50
            type: integer
        - description: 分页偏移
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  data:
                    items:
                      $ref: >-
                        #/components/schemas/psp_com_internal_channel_app.ProviderResponse
                    type: array
                  total:
                    type: integer
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Provider
      description: 查询支付通道提供商列表，支持按支付方式过滤
      summary: 查询提供商列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.ProviderResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Provider
      description: 创建新的支付通道提供商
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.CreateProviderRequest
        description: 创建提供商请求
        required: true
      summary: 创建提供商
  '/api/v1/providers/{provider_id}':
    get:
      parameters:
        - description: 提供商 ID
          in: path
          name: provider_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.ProviderResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Provider
      description: 根据 ID 获取提供商详情
      summary: 获取提供商详情
    put:
      parameters:
        - description: 提供商 ID
          in: path
          name: provider_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.ProviderResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Provider
      description: 更新提供商信息
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.UpdateProviderRequest
        description: 更新提供商请求
        required: true
      summary: 更新提供商
  /api/v1/rbac/check-permission:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.CheckPermissionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 检查当前用户是否拥有指定权限
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.CheckPermissionRequest
        description: 检查权限请求
        required: true
      summary: 检查用户权限
  /api/v1/rbac/check-permissions:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.CheckPermissionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 批量检查当前用户是否拥有指定的多个权限
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.CheckPermissionsRequest
        description: 批量检查权限请求
        required: true
      summary: 批量检查权限
  /api/v1/rbac/me/permissions:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.UserPermissionsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 获取当前登录用户的所有权限
      summary: 获取当前用户权限
  /api/v1/rbac/permissions:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.PermissionListResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 获取系统中定义的所有权限
      summary: 查询所有可用权限
  /api/v1/rbac/permissions/by-category:
    get:
      parameters:
        - description: 权限分类
          in: query
          name: category
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.PermissionListResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 获取指定分类的权限列表
      summary: 按分类查询权限
  /api/v1/rbac/roles:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_pkg_response.PaginatedResponse-psp_com_internal_tenant_app_RoleSummaryResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 获取角色列表（分页）
      summary: 查询角色列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_tenant_app.RoleResponse'
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 创建新的角色
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.CreateRoleRequest
        description: 创建角色请求
        required: true
      summary: 创建角色
  '/api/v1/rbac/roles/{role_id}':
    delete:
      parameters:
        - description: 角色 ID
          in: path
          name: role_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 删除指定角色
      summary: 删除角色
    get:
      parameters:
        - description: 角色 ID
          in: path
          name: role_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_tenant_app.RoleResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 根据角色 ID 获取角色详情
      summary: 获取角色详情
    put:
      parameters:
        - description: 角色 ID
          in: path
          name: role_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_tenant_app.RoleResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 更新角色的基本信息
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.UpdateRoleRequest
        description: 更新角色请求
        required: true
      summary: 更新角色
  '/api/v1/rbac/roles/{role_id}/permissions':
    put:
      parameters:
        - description: 角色 ID
          in: path
          name: role_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_tenant_app.RoleResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 设置角色的权限列表（全量替换）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.SetRolePermissionsRequest
        description: 设置权限请求
        required: true
      summary: 设置角色权限
  '/api/v1/rbac/users/{user_id}/permissions':
    get:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.UserPermissionsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 获取用户拥有的所有权限（聚合自所有角色）
      summary: 获取用户权限列表
  '/api/v1/rbac/users/{user_id}/roles':
    get:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_tenant_app.UserRoleResponse
                type: array
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 获取用户拥有的所有角色
      summary: 获取用户角色列表
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 为用户分配角色
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.AssignUserRoleRequest
        description: 分配角色请求
        required: true
      summary: 分配用户角色
  '/api/v1/rbac/users/{user_id}/roles/{role_id}':
    delete:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
        - description: 角色 ID
          in: path
          name: role_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - RBAC
      description: 撤销用户的指定角色
      summary: 撤销用户角色
  /api/v1/reconciliation/batches:
    get:
      parameters:
        - description: Batch type
          in: query
          name: batch_type
          schema:
            type: string
        - description: Status
          in: query
          name: status
          schema:
            type: string
        - description: Entity type
          in: query
          name: entity_type
          schema:
            type: string
        - description: Entity ID
          in: query
          name: entity_id
          schema:
            type: string
        - description: Period start (RFC3339)
          in: query
          name: period_start
          schema:
            type: string
        - description: Period end (RFC3339)
          in: query
          name: period_end
          schema:
            type: string
        - description: Limit
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: Offset
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Reconciliation
      description: List reconciliation batches with optional filters
      summary: List reconciliation batches
  '/api/v1/reconciliation/batches/{batch_id}/status':
    patch:
      parameters:
        - description: Batch ID
          in: path
          name: batch_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_recon_app.ReconBatchActionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '422':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Unprocessable Entity
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Reconciliation
      description: 'Unified endpoint for batch status changes (Issue #2943)'
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_recon_app.ReconBatchActionRequest
        description: Action request
        required: true
      summary: Update reconciliation batch status
  /api/v1/reconciliation/differences:
    get:
      parameters:
        - description: Batch ID
          in: query
          name: batch_id
          schema:
            type: string
        - description: Difference type
          in: query
          name: difference_type
          schema:
            type: string
        - description: Difference category
          in: query
          name: difference_category
          schema:
            type: string
        - description: Status
          in: query
          name: status
          schema:
            type: string
        - description: Severity
          in: query
          name: severity
          schema:
            type: string
        - description: Assigned user ID
          in: query
          name: assigned_to
          schema:
            type: string
        - description: Entity type
          in: query
          name: entity_type
          schema:
            type: string
        - description: Entity ID
          in: query
          name: entity_id
          schema:
            type: string
        - description: Limit
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: Offset
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Reconciliation
      description: List reconciliation differences with optional filters
      summary: List reconciliation differences
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_recon_app.ReconDifferenceDTO
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Reconciliation
      description: Create a new reconciliation difference
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_recon_app.CreateDifferenceRequest
        description: Create difference request
        required: true
      summary: Create reconciliation difference
  '/api/v1/reconciliation/differences/{difference_id}/status':
    patch:
      parameters:
        - description: Difference ID
          in: path
          name: difference_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_recon_app.ReconDifferenceActionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '422':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Unprocessable Entity
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Reconciliation
      description: 'Unified endpoint for difference status changes (Issue #2943)'
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_recon_app.ReconDifferenceActionRequest
        description: Action request
        required: true
      summary: Update reconciliation difference status
  '/api/v1/reconciliation/reports/{report_id}':
    get:
      parameters:
        - description: Batch ID
          in: path
          name: report_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_recon_app.ReconBatchDTO'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Reconciliation
      description: Get reconciliation batch details by ID
      summary: Get reconciliation report
  /api/v1/reconciliation/run:
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_recon_app.ReconBatchDTO'
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Reconciliation
      description: Create and execute a new reconciliation batch
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_recon_app.CreateReconBatchRequest
        description: Reconciliation batch request
        required: true
      summary: Run reconciliation
  /api/v1/reconciliation/upload:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_ops_import.ImportResult'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Import/Export
      description: 上传渠道对账文件进行自动对账
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                channel_code:
                  description: 渠道编码
                  type: string
                recon_date:
                  description: 对账日期 (YYYY-MM-DD)
                  type: string
              required:
                - channel_code
              type: object
        required: true
      summary: 上传对账文件
  /api/v1/reconciliation/upload/template:
    get:
      parameters:
        - description: '格式 (csv, excel)'
          in: query
          name: format
          schema:
            default: csv
            type: string
      responses:
        '200':
          description: 模板文件
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            application/octet-stream:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Import/Export
      description: 下载渠道对账文件的 CSV/Excel 模板
      summary: 下载对账文件模板
  /api/v1/refunds/pending-final-approval:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
      tags:
        - RefundApproval
      description: 获取所有等待终审的退款列表
      summary: 获取待终审退款列表
  /api/v1/refunds/pending-first-approval:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
      tags:
        - RefundApproval
      description: 获取所有等待初审的退款列表
      summary: 获取待初审退款列表
  '/api/v1/refunds/{refund_id}':
    get:
      parameters:
        - description: 退款 ID
          in: path
          name: refund_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_payment_core_app.PaymentRefundResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
      tags:
        - RefundApproval
      description: 获取指定退款的详细信息
      summary: 获取退款详情
  '/api/v1/refunds/{refund_id}/final-approve':
    post:
      parameters:
        - description: 退款 ID
          in: path
          name: refund_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 同一人不能进行初审和终审
      tags:
        - RefundApproval
      description: 对待终审的退款进行终审通过操作（不能与初审是同一人）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_payment_core_app.RefundApprovalRequest
        description: 终审请求
        required: true
      summary: 退款终审通过
  '/api/v1/refunds/{refund_id}/first-approve':
    post:
      parameters:
        - description: 退款 ID
          in: path
          name: refund_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Conflict
      tags:
        - RefundApproval
      description: 对待初审的退款进行初审通过操作
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_payment_core_app.RefundApprovalRequest
        description: 初审请求
        required: true
      summary: 退款初审通过
  '/api/v1/refunds/{refund_id}/reject':
    post:
      parameters:
        - description: 退款 ID
          in: path
          name: refund_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Conflict
      tags:
        - RefundApproval
      description: 对待审批的退款进行拒绝操作
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_payment_core_app.RefundRejectRequest
        description: 拒绝请求
        required: true
      summary: 拒绝退款
  /api/v1/reports/balances:
    get:
      parameters:
        - description: 租户ID
          in: header
          name: tenant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_report_app.BalanceSummaryDTO
          description: OK
      tags:
        - Reports
      description: 获取当前时间点的余额汇总报表
      summary: 获取余额报表
  /api/v1/reports/channels/performance:
    get:
      parameters:
        - description: 租户ID
          in: header
          name: tenant_id
          required: true
          schema:
            type: string
        - description: 开始日期 (YYYY-MM-DD)
          in: query
          name: start_date
          required: true
          schema:
            type: string
        - description: 结束日期 (YYYY-MM-DD)
          in: query
          name: end_date
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_report_app.GetChannelPerformanceOutput
          description: OK
      tags:
        - Reports
      description: 获取指定时间范围内各支付通道的性能数据
      summary: 获取通道性能报表
  /api/v1/reports/dashboard:
    get:
      parameters:
        - description: 租户ID
          in: header
          name: tenant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_report_app.GetDashboardOutput
          description: OK
      tags:
        - Reports
      description: 获取运营仪表盘的汇总数据
      summary: 获取仪表盘数据
  /api/v1/reports/fees:
    get:
      parameters:
        - description: 租户ID
          in: header
          name: tenant_id
          required: true
          schema:
            type: string
        - description: 开始日期 (YYYY-MM-DD)
          in: query
          name: start_date
          required: true
          schema:
            type: string
        - description: 结束日期 (YYYY-MM-DD)
          in: query
          name: end_date
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_report_app.FeeSummaryDTO'
          description: OK
      tags:
        - Reports
      description: 获取指定时间范围的手续费汇总报表
      summary: 获取手续费报表
  /api/v1/reports/generate:
    post:
      parameters:
        - description: 租户ID
          in: header
          name: tenant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json: {}
            application/octet-stream: {}
          description: 报表文件
      tags:
        - Reports
      description: 生成可下载的报表文件（JSON 或 CSV 格式）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerGenerateRequest
        description: 报表生成请求
        required: true
      summary: 生成报表
  /api/v1/reports/merchants/performance:
    get:
      parameters:
        - description: 租户ID
          in: header
          name: tenant_id
          required: true
          schema:
            type: string
        - description: 开始日期 (YYYY-MM-DD)
          in: query
          name: start_date
          required: true
          schema:
            type: string
        - description: 结束日期 (YYYY-MM-DD)
          in: query
          name: end_date
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_report_app.GetMerchantPerformanceOutput
          description: OK
      tags:
        - Reports
      description: 获取指定时间范围内各商户的交易表现数据
      summary: 获取商户表现报表
  /api/v1/reports/reconciliations:
    get:
      parameters:
        - description: 租户ID
          in: header
          name: tenant_id
          required: true
          schema:
            type: string
        - description: 开始日期 (YYYY-MM-DD)
          in: query
          name: start_date
          required: true
          schema:
            type: string
        - description: 结束日期 (YYYY-MM-DD)
          in: query
          name: end_date
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_report_app.ReconciliationSummaryDTO
          description: OK
      tags:
        - Reports
      description: 获取指定时间范围的对账汇总报表
      summary: 获取对账报表
  /api/v1/reports/settlements:
    get:
      parameters:
        - description: 租户ID
          in: header
          name: tenant_id
          required: true
          schema:
            type: string
        - description: 开始日期 (YYYY-MM-DD)
          in: query
          name: start_date
          required: true
          schema:
            type: string
        - description: 结束日期 (YYYY-MM-DD)
          in: query
          name: end_date
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_report_app.SettlementSummaryDTO
          description: OK
      tags:
        - Reports
      description: 获取指定时间范围的结算汇总报表
      summary: 获取结算报表
  /api/v1/reports/transactions:
    get:
      parameters:
        - description: 租户ID
          in: header
          name: tenant_id
          required: true
          schema:
            type: string
        - description: 开始日期 (YYYY-MM-DD)
          in: query
          name: start_date
          required: true
          schema:
            type: string
        - description: 结束日期 (YYYY-MM-DD)
          in: query
          name: end_date
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_report_app.GetTransactionReportOutput
          description: OK
      tags:
        - Reports
      description: 获取指定时间范围的交易汇总报表
      summary: 获取交易报表
  /api/v1/risk/aml-cases:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 案例状态
          in: query
          name: status
          schema:
            type: string
        - description: 优先级
          in: query
          name: priority
          schema:
            type: string
        - description: 风险等级
          in: query
          name: risk_level
          schema:
            type: string
        - description: 分配给（分析师 ID）
          in: query
          name: assigned_to
          schema:
            type: string
        - description: 分页大小
          in: query
          name: limit
          schema:
            type: integer
        - description: 分页偏移
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.ListAMLCasesResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 查询 AML 案例列表（支持筛选和分页）
      summary: 列出 AML 案例
  '/api/v1/risk/aml-cases/{case_id}':
    get:
      parameters:
        - description: AML 案例 ID
          in: path
          name: case_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_risk_app.AMLCaseResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 根据 ID 获取 AML 案例详情
      summary: 获取 AML 案例详情
  '/api/v1/risk/aml-cases/{case_id}/assign':
    post:
      parameters:
        - description: AML 案例 ID
          in: path
          name: case_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_risk_app.AMLCaseResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 将 AML 案例分配给指定分析师
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/psp_com_internal_risk_app.AssignCaseRequest'
        description: 分配案例请求
        required: true
      summary: 分配 AML 案例
  '/api/v1/risk/aml-cases/{case_id}/false-positive':
    post:
      parameters:
        - description: AML 案例 ID
          in: path
          name: case_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_risk_app.AMLCaseResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 将 AML 案例标记为误报
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_risk_app.MarkFalsePositiveRequest
        description: 标记误报请求
        required: true
      summary: 标记为误报
  '/api/v1/risk/aml-cases/{case_id}/file-sar':
    post:
      parameters:
        - description: AML 案例 ID
          in: path
          name: case_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_risk_app.AMLCaseResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 为 AML 案例提交 SAR 报告
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/psp_com_internal_risk_app.FileSARRequest'
        description: 提交 SAR 请求
        required: true
      summary: 提交 SAR 报告
  '/api/v1/risk/aml-cases/{case_id}/notes':
    post:
      parameters:
        - description: AML 案例 ID
          in: path
          name: case_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_risk_app.AMLCaseResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 为 AML 案例添加调查备注
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_risk_app.AddInvestigationNotesRequest
        description: 添加备注请求
        required: true
      summary: 添加调查备注
  '/api/v1/risk/aml-cases/{case_id}/resolve':
    post:
      parameters:
        - description: AML 案例 ID
          in: path
          name: case_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_internal_risk_app.AMLCaseResponse'
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 处置并关闭 AML 案例
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_risk_app.ResolveCaseRequest
        description: 处置案例请求
        required: true
      summary: 处置 AML 案例
  /api/v1/risk/blacklist:
    get:
      parameters:
        - description: 列表类型
          in: query
          name: list_type
          schema:
            type: string
        - description: 分页大小
          in: query
          name: limit
          schema:
            type: integer
        - description: 分页偏移
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.ListBlacklistResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 查询黑名单列表（支持筛选和分页）
      summary: 列出黑名单
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.BlacklistResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 将指定的值添加到黑名单
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_risk_app.AddBlacklistRequest
        description: 添加黑名单请求
        required: true
      summary: 添加到黑名单
  /api/v1/risk/blacklist/export:
    get:
      parameters:
        - description: 黑名单类型
          in: query
          name: list_type
          schema:
            type: string
      responses:
        '200':
          description: CSV 文件
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            text/csv:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            text/csv:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 导出黑名单（可选 list_type 过滤），返回 CSV 文件
      summary: 导出黑名单
  /api/v1/risk/blacklist/import:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: >-
        通过 CSV 批量导入黑名单，要求包含
        header：list_type,value,reason,notes,expires_at,source_type,source_details
      requestBody:
        $ref: '#/components/requestBodies/postApiV1FeesImport'
      summary: 批量导入黑名单
  '/api/v1/risk/blacklist/{blacklist_id}':
    delete:
      parameters:
        - description: 黑名单条目 ID
          in: path
          name: blacklist_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 从黑名单中移除指定条目
      summary: 从黑名单移除
  /api/v1/risk/global-blacklist:
    get:
      parameters:
        - description: '列表类型 (ip, email, phone, cpf_cnpj, device_id)'
          in: query
          name: list_type
          schema:
            type: string
        - description: 分页大小
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 分页偏移
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.ListGlobalBlacklistResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '403':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 权限不足
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器错误
      tags:
        - Admin - Global Risk Management
      description: 查询全局黑名单列表（仅超级管理员可访问）
      summary: 列出全局黑名单
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.GlobalBlacklistResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '403':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 权限不足
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器错误
      tags:
        - Admin - Global Risk Management
      description: 将指定的值添加到全局黑名单（仅超级管理员可访问）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_risk_app.AddGlobalBlacklistRequest
        description: 添加全局黑名单请求
        required: true
      summary: 添加到全局黑名单
  '/api/v1/risk/global-blacklist/{blacklist_id}':
    delete:
      parameters:
        - description: 全局黑名单条目 ID
          in: path
          name: blacklist_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 删除成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 未授权
        '403':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 权限不足
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 条目不存在
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 服务器错误
      tags:
        - Admin - Global Risk Management
      description: 从全局黑名单中移除指定条目（仅超级管理员可访问）
      summary: 从全局黑名单移除
  /api/v1/risk/merchants:
    get:
      parameters:
        - description: 最低分数 (默认60)
          in: query
          name: min_score
          schema:
            type: integer
        - description: 风险等级 (low/medium/high/critical)
          in: query
          name: risk_level
          schema:
            type: string
        - description: '分页大小 (默认20, 最大100)'
          in: query
          name: page_size
          schema:
            type: integer
        - description: 页码 (从1开始)
          in: query
          name: page_number
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.ListHighRiskMerchantsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 列出高风险商户列表，支持按风险等级或分数筛选
      summary: 列出高风险商户
  '/api/v1/risk/merchants/{merchant_id}/evaluate':
    post:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.EvaluateMerchantRiskResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 对指定商户触发风险评估，计算综合风险分数和风险等级
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_risk_app.EvaluateMerchantRiskRequest
        description: 评估请求
        required: true
      summary: 触发商户风险评估
  '/api/v1/risk/merchants/{merchant_id}/history':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
        - description: '分页大小 (默认20, 最大100)'
          in: query
          name: page_size
          schema:
            type: integer
        - description: 页码 (从1开始)
          in: query
          name: page_number
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.ListMerchantRiskHistoryResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 获取指定商户的风险评估历史记录
      summary: 获取商户风险评估历史
  '/api/v1/risk/merchants/{merchant_id}/profile':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.MerchantRiskProfileResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 获取指定商户的风险档案，包含综合评分、各维度分数和评估历史
      summary: 获取商户风险档案
  /api/v1/risk/rules:
    get:
      parameters:
        - description: 规则类型
          in: query
          name: rule_type
          schema:
            type: string
        - description: 适用范围
          in: query
          name: applies_to
          schema:
            type: string
        - description: 是否激活
          in: query
          name: is_active
          schema:
            type: boolean
        - description: 分页大小
          in: query
          name: limit
          schema:
            type: integer
        - description: 分页偏移
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.ListRiskRulesResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 查询风控规则列表（支持筛选和分页）
      summary: 列出风控规则
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.RiskRuleResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 创建新的风控规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_risk_app.CreateRiskRuleRequest
        description: 创建风控规则请求
        required: true
      summary: 创建风控规则
  '/api/v1/risk/rules/{rule_id}':
    delete:
      parameters:
        - description: 风控规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 删除指定的风控规则
      summary: 删除风控规则
    get:
      parameters:
        - description: 风控规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.RiskRuleResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 根据 ID 获取风控规则详情
      summary: 获取风控规则详情
    put:
      parameters:
        - description: 风控规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.RiskRuleResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 更新现有的风控规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_risk_app.UpdateRiskRuleRequest
        description: 更新风控规则请求
        required: true
      summary: 更新风控规则
  '/api/v1/risk/rules/{rule_id}/activate':
    post:
      parameters:
        - description: 风控规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.RiskRuleResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 激活指定的风控规则
      summary: 激活风控规则
  '/api/v1/risk/rules/{rule_id}/deactivate':
    post:
      parameters:
        - description: 风控规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.RiskRuleResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 停用指定的风控规则
      summary: 停用风控规则
  /api/v1/risk/whitelist:
    get:
      parameters:
        - description: 列表类型
          in: query
          name: list_type
          schema:
            type: string
        - description: 分页大小
          in: query
          name: limit
          schema:
            type: integer
        - description: 分页偏移
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.ListWhitelistResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 查询白名单列表（支持筛选和分页）
      summary: 列出白名单
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_risk_app.WhitelistResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin - Risk Management
      description: 将指定的值添加到白名单
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_risk_app.AddWhitelistRequest
        description: 添加白名单请求
        required: true
      summary: 添加到白名单
  /api/v1/routing-strategies:
    get:
      parameters:
        - description: '每页数量 (默认 20, 最大 100)'
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
        - description: 是否只查询激活的策略
          in: query
          name: active
          schema:
            type: boolean
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.ListRoutingStrategiesResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-routing
      description: 获取所有路由策略，支持分页和过滤
      summary: 获取路由策略列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.RoutingStrategyResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-routing
      description: 创建新的路由策略
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.CreateRoutingStrategyRequest
        description: 策略信息
        required: true
      summary: 创建路由策略
  '/api/v1/routing-strategies/{strategy_id}':
    delete:
      parameters:
        - description: 策略 ID
          in: path
          name: strategy_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-routing
      description: 停用路由策略（软删除）
      summary: 删除路由策略
    get:
      parameters:
        - description: 策略 ID
          in: path
          name: strategy_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.RoutingStrategyResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-routing
      description: 根据 ID 获取路由策略详情
      summary: 获取路由策略详情
    put:
      parameters:
        - description: 策略 ID
          in: path
          name: strategy_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.RoutingStrategyResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-routing
      description: 更新现有路由策略
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.UpdateRoutingStrategyRequest
        description: 更新信息
        required: true
      summary: 更新路由策略
  '/api/v1/routing-strategies/{strategy_id}/rules':
    post:
      parameters:
        - description: 策略 ID
          in: path
          name: strategy_id
          required: true
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.RoutingRuleResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-routing
      description: 为路由策略添加规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.AddRoutingRuleRequest
        description: 规则信息
        required: true
      summary: 添加路由规则
  '/api/v1/routing-strategies/{strategy_id}/rules/{rule_id}':
    delete:
      parameters:
        - description: 策略 ID
          in: path
          name: strategy_id
          required: true
          schema:
            type: string
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-routing
      description: 从路由策略中删除规则
      summary: 删除路由规则
    put:
      parameters:
        - description: 策略 ID
          in: path
          name: strategy_id
          required: true
          schema:
            type: string
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.RoutingRuleResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-routing
      description: 更新路由策略中的规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.UpdateRoutingRuleRequest
        description: 更新信息
        required: true
      summary: 更新路由规则
  '/api/v1/routing-strategies/{strategy_id}/rules/{rule_id}/status':
    patch:
      parameters:
        - description: 策略 ID
          in: path
          name: strategy_id
          required: true
          schema:
            type: string
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_channel_app.RoutingRuleResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-routing
      description: 启用或停用路由规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_channel_app.UpdateRuleStatusRequest
        description: 状态信息
        required: true
      summary: 更新规则状态
  /api/v1/scheduler/jobs:
    get:
      parameters:
        - description: '任务状态过滤 (running, paused)'
          in: query
          name: status
          schema:
            type: string
        - description: 关键字搜索（任务名称/描述）
          in: query
          name: search
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_scheduler_app.ListJobsResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-scheduler
      description: 分页查询定时任务列表，支持按状态和关键字过滤
      summary: 获取定时任务列表
  '/api/v1/scheduler/jobs/{id}':
    get:
      parameters:
        - description: 任务 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_scheduler_app.JobDetailResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-scheduler
      description: 根据任务 ID 获取定时任务的详细信息
      summary: 获取定时任务详情
  '/api/v1/scheduler/jobs/{id}/history':
    get:
      parameters:
        - description: 任务 ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_scheduler_app.JobHistoryResponse
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-scheduler
      description: 分页查询指定任务的执行历史记录
      summary: 获取任务执行历史
  '/api/v1/scheduler/jobs/{id}/pause':
    post:
      parameters:
        - description: 任务 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 操作成功
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-scheduler
      description: 暂停指定的定时任务，暂停后任务将不再自动执行
      summary: 暂停任务
  '/api/v1/scheduler/jobs/{id}/resume':
    post:
      parameters:
        - description: 任务 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 操作成功
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-scheduler
      description: 恢复已暂停的定时任务，恢复后任务将按计划继续执行
      summary: 恢复任务
  '/api/v1/scheduler/jobs/{id}/trigger':
    post:
      parameters:
        - description: 任务 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_scheduler_app.TriggerJobResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 任务已暂停，无法触发
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-scheduler
      description: 手动触发指定的定时任务立即执行
      summary: 手动触发任务
  /api/v1/scheduler/stats:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_scheduler_app.SchedulerStats
          description: OK
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - admin-scheduler
      description: 获取定时任务调度器的整体统计数据，包括任务数量、成功率等
      summary: 获取调度器统计
  /api/v1/settlements:
    get:
      parameters:
        - description: 商户账户 ID
          in: query
          name: merchant_account_id
          required: true
          schema:
            type: string
        - description: 状态筛选
          in: query
          name: status
          schema:
            type: string
        - description: 开始日期
          in: query
          name: start_date
          schema:
            type: string
        - description: 结束日期
          in: query
          name: end_date
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 查询指定商户账户的结算单列表
      summary: 查询结算单列表
  /api/v1/settlements/batch:
    get:
      parameters:
        - description: 商户账户ID列表(逗号分隔)
          in: query
          name: merchant_account_ids
          schema:
            type: string
        - description: 状态筛选
          in: query
          name: status
          schema:
            type: string
        - description: 开始日期
          in: query
          name: start_date
          schema:
            type: string
        - description: 结束日期
          in: query
          name: end_date
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 按条件批量查询结算单，支持跨商户查询（需要权限）
      summary: 批量查询结算单
  /api/v1/settlements/daily:
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 为指定商户账户创建日结算单
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerCreateDailySettlementRequest
        description: 创建日结算请求
        required: true
      summary: 创建日结算
  /api/v1/settlements/export:
    get:
      parameters:
        - description: 商户账户ID列表(逗号分隔)
          in: query
          name: merchant_account_ids
          schema:
            type: string
        - description: 状态筛选
          in: query
          name: status
          schema:
            type: string
        - description: 开始日期
          in: query
          name: start_date
          required: true
          schema:
            type: string
        - description: 结束日期
          in: query
          name: end_date
          required: true
          schema:
            type: string
        - description: 导出格式(csv/xlsx/json/pdf)
          in: query
          name: format
          schema:
            type: string
      responses:
        '200':
          content:
            application/json: {}
            application/octet-stream: {}
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            application/octet-stream:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            application/octet-stream:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 导出结算单为指定格式(CSV/Excel/JSON/PDF)
      summary: 导出结算单报表
  /api/v1/settlements/items/export:
    get:
      parameters:
        - description: 开始日期 (YYYY-MM-DD)
          in: query
          name: start_date
          required: true
          schema:
            type: string
        - description: 结束日期 (YYYY-MM-DD)
          in: query
          name: end_date
          required: true
          schema:
            type: string
        - description: 导出格式(csv/xlsx/json)
          in: query
          name: format
          schema:
            default: csv
            type: string
      responses:
        '200':
          content:
            application/json: {}
            application/octet-stream: {}
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            application/octet-stream:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
            application/octet-stream:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 导出结算明细（交易级别）为指定格式(CSV/Excel/JSON)
      summary: 导出结算明细报表
  /api/v1/settlements/manual:
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 为指定商户账户创建手动结算单
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerCreateManualSettlementRequest
        description: 创建手动结算请求
        required: true
      summary: 创建手动结算
  /api/v1/settlements/pending-review:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 查询所有待审批状态的结算单
      summary: 查询待审批的结算单
  /api/v1/settlements/schedules:
    get:
      parameters:
        - description: 商户账户ID
          in: query
          name: merchant_account_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 查询指定商户账户的结算配置
      summary: 获取商户结算计划
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '409':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 配置商户账户的结算周期与门槛
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerCreateSettlementScheduleRequest
        description: 结算计划请求
        required: true
      summary: 创建结算计划
  '/api/v1/settlements/schedules/{schedule_id}':
    put:
      parameters:
        - description: 结算计划ID
          in: path
          name: schedule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 更新结算周期、门槛或启用状态
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerUpdateSettlementScheduleRequest
        description: 更新请求
        required: true
      summary: 更新结算计划
  /api/v1/settlements/summary:
    get:
      parameters:
        - description: 商户账户 ID
          in: query
          name: merchant_account_id
          required: true
          schema:
            type: string
        - description: 开始日期
          in: query
          name: start_date
          required: true
          schema:
            type: string
        - description: 结束日期
          in: query
          name: end_date
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 获取指定商户账户在时间范围内的结算汇总
      summary: 获取结算汇总
  '/api/v1/settlements/{settlement_id}':
    get:
      parameters:
        - description: 结算单 ID
          in: path
          name: settlement_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 根据结算单 ID 获取详情
      summary: 获取结算单详情
  '/api/v1/settlements/{settlement_id}/approve':
    post:
      parameters:
        - description: 结算单ID
          in: path
          name: settlement_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 审批通过待审核的结算单
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerApproveSettlementRequest
        description: 审批备注
      summary: 审批通过结算单
  '/api/v1/settlements/{settlement_id}/cancel':
    post:
      parameters:
        - description: 结算单 ID
          in: path
          name: settlement_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 取消指定的结算单
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerCancelSettlementRequest
        description: 取消原因
        required: true
      summary: 取消结算
  '/api/v1/settlements/{settlement_id}/execute':
    post:
      parameters:
        - description: 结算单 ID
          in: path
          name: settlement_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 执行指定的结算单（创建账本分录）
      summary: 执行结算
  '/api/v1/settlements/{settlement_id}/reject':
    post:
      parameters:
        - description: 结算单ID
          in: path
          name: settlement_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 审批拒绝待审核的结算单
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerRejectSettlementRequest
        description: 拒绝原因
        required: true
      summary: 审批拒绝结算单
  '/api/v1/settlements/{settlement_id}/retry':
    post:
      parameters:
        - description: 结算单 ID
          in: path
          name: settlement_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 重试失败的结算单
      summary: 重试结算
  '/api/v1/settlements/{settlement_id}/status':
    patch:
      parameters:
        - description: 结算单ID
          in: path
          name: settlement_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_settlement_app.SettlementActionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '403':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Forbidden
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Settlement
      description: 统一的状态变更端点，支持 execute/retry/cancel/approve/reject
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_settlement_app.SettlementActionRequest
        description: 操作请求
        required: true
      summary: 变更结算单状态
  /api/v1/telegram/balance-alerts:
    get:
      parameters:
        - description: 租户 ID
          in: query
          name: tenant_id
          required: true
          schema:
            type: string
        - description: 群绑定 ID
          in: query
          name: bot_group_binding_id
          schema:
            type: string
        - description: 状态
          in: query
          name: status
          schema:
            enum:
              - active
              - inactive
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.ListBalanceAlertsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 查询商户的余额预警规则列表
      summary: 查询余额预警列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.BalanceAlertDTO
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 为商户账户创建余额预警规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.HandlerCreateBalanceAlertRequest
        description: 创建预警请求
        required: true
      summary: 创建余额预警
  '/api/v1/telegram/balance-alerts/{alert_id}':
    delete:
      parameters:
        - description: 预警 ID
          in: path
          name: alert_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 删除余额预警规则
      summary: 删除余额预警
    get:
      parameters:
        - description: 预警 ID
          in: path
          name: alert_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.BalanceAlertDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 根据 ID 获取余额预警详情
      summary: 获取余额预警详情
    put:
      parameters:
        - description: 预警 ID
          in: path
          name: alert_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.BalanceAlertDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 更新余额预警规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.HandlerUpdateBalanceAlertRequest
        description: 更新预警请求
        required: true
      summary: 更新余额预警
  '/api/v1/telegram/balance-alerts/{alert_id}/activate':
    post:
      parameters:
        - description: 预警 ID
          in: path
          name: alert_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.BalanceAlertDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 激活已停用的余额预警
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.ActivateAlertRequest
        description: 激活预警请求
        required: true
      summary: 激活余额预警
  '/api/v1/telegram/balance-alerts/{alert_id}/deactivate':
    post:
      parameters:
        - description: 预警 ID
          in: path
          name: alert_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.BalanceAlertDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 停用余额预警
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.DeactivateAlertRequest
        description: 停用预警请求
        required: true
      summary: 停用余额预警
  '/api/v1/telegram/balance-alerts/{alert_id}/mute':
    post:
      parameters:
        - description: 预警 ID
          in: path
          name: alert_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.BalanceAlertDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 临时静音余额预警通知
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.HandlerMuteAlertRequest
        description: 静音预警请求
        required: true
      summary: 静音余额预警
  /api/v1/telegram/group-bindings:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 绑定状态
          in: query
          name: status
          schema:
            enum:
              - active
              - inactive
              - suspended
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            maximum: 100
            minimum: 1
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            minimum: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.ListGroupBindingsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 查询商户的 Telegram 群绑定列表
      summary: 查询群绑定列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.GroupBindingResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 将商户的 Telegram 群与 Bot 绑定，启用群通知功能
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.CreateGroupBindingRequest
        description: 创建群绑定请求
        required: true
      summary: 创建 Telegram 群绑定
  '/api/v1/telegram/group-bindings/{binding_id}':
    delete:
      parameters:
        - description: 群绑定 ID
          in: path
          name: binding_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 删除（停用）群绑定
      summary: 删除群绑定
    get:
      parameters:
        - description: 群绑定 ID
          in: path
          name: binding_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.GroupBindingResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 根据 ID 获取 Telegram 群绑定详情
      summary: 获取群绑定详情
  '/api/v1/telegram/group-bindings/{binding_id}/activate':
    post:
      parameters:
        - description: 群绑定 ID
          in: path
          name: binding_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.GroupBindingResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 激活已停用的群绑定
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.ActivateBindingRequest
        description: 激活绑定请求
        required: true
      summary: 激活群绑定
  '/api/v1/telegram/group-bindings/{binding_id}/deactivate':
    post:
      parameters:
        - description: 群绑定 ID
          in: path
          name: binding_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.GroupBindingResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 停用群绑定，停止通知功能
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.DeactivateBindingRequest
        description: 停用绑定请求
        required: true
      summary: 停用群绑定
  '/api/v1/telegram/group-bindings/{binding_id}/features':
    delete:
      parameters:
        - description: 群绑定 ID
          in: path
          name: binding_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.GroupBindingResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 为群绑定禁用特定功能
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.DisableFeatureRequest
        description: 禁用功能请求
        required: true
      summary: 禁用群绑定功能
    post:
      parameters:
        - description: 群绑定 ID
          in: path
          name: binding_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.GroupBindingResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 为群绑定启用特定功能（如余额查询、订单查询等）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.EnableFeatureRequest
        description: 启用功能请求
        required: true
      summary: 启用群绑定功能
  '/api/v1/telegram/group-bindings/{binding_id}/linked-accounts':
    put:
      parameters:
        - description: 群绑定 ID
          in: path
          name: binding_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.GroupBindingResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 更新群绑定关联的商户账户列表
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.UpdateLinkedAccountsRequest
        description: 更新关联账户请求
        required: true
      summary: 更新群绑定关联账户
  /api/v1/telegram/large-transaction-rules:
    get:
      parameters:
        - description: 租户 ID
          in: query
          name: tenant_id
          required: true
          schema:
            type: string
        - description: 群绑定 ID
          in: query
          name: bot_group_binding_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_telegram_app.LargeTransactionRuleDTO
                type: array
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 查询商户的大额交易通知规则列表
      summary: 查询大额交易规则列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.LargeTransactionRuleDTO
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 为商户创建大额交易通知规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.HandlerCreateLargeTransactionRuleRequest
        description: 创建规则请求
        required: true
      summary: 创建大额交易规则
  '/api/v1/telegram/large-transaction-rules/{rule_id}':
    delete:
      parameters:
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 删除大额交易通知规则
      summary: 删除大额交易规则
    get:
      parameters:
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.LargeTransactionRuleDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 根据 ID 获取大额交易规则详情
      summary: 获取大额交易规则详情
    put:
      parameters:
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.LargeTransactionRuleDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 更新大额交易通知规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.HandlerUpdateLargeTransactionRuleRequest
        description: 更新规则请求
        required: true
      summary: 更新大额交易规则
  '/api/v1/telegram/large-transaction-rules/{rule_id}/activate':
    post:
      parameters:
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.LargeTransactionRuleDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 激活已停用的大额交易规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.ActivateLargeTransactionRuleRequest
        description: 激活规则请求
        required: true
      summary: 激活大额交易规则
  '/api/v1/telegram/large-transaction-rules/{rule_id}/deactivate':
    post:
      parameters:
        - description: 规则 ID
          in: path
          name: rule_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.LargeTransactionRuleDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 停用大额交易规则
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_telegram_app.DeactivateLargeTransactionRuleRequest
        description: 停用规则请求
        required: true
      summary: 停用大额交易规则
  /api/v1/telegram/order-confirmations:
    get:
      parameters:
        - description: 租户 ID
          in: query
          name: tenant_id
          required: true
          schema:
            type: string
        - description: 群绑定 ID
          in: query
          name: bot_group_binding_id
          schema:
            type: string
        - description: 状态
          in: query
          name: status
          schema:
            enum:
              - pending
              - approved
              - rejected
              - expired
            type: string
        - description: 确认类型
          in: query
          name: confirmation_type
          schema:
            enum:
              - manual_risk
              - manual_review
              - large_amount
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            maximum: 100
            minimum: 1
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            minimum: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_telegram_app.OrderConfirmationDTO
                type: array
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 查询商户的订单确认列表
      summary: 查询订单确认列表
  '/api/v1/telegram/order-confirmations/{confirmation_id}':
    get:
      parameters:
        - description: 确认 ID
          in: path
          name: confirmation_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_telegram_app.OrderConfirmationDTO
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram
      description: 根据 ID 获取订单确认详情
      summary: 获取订单确认详情
  /api/v1/tenant-users:
    get:
      parameters:
        - description: 状态筛选
          in: query
          name: status
          schema:
            type: string
        - description: 角色 ID 筛选
          in: query
          name: role_id
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.ListUsersResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 获取租户的所有用户列表
      summary: 查询租户用户列表
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantUserResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 为指定租户创建新用户
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.CreateTenantUserRequest
        description: 创建用户请求
        required: true
      summary: 创建租户用户
  '/api/v1/tenant-users/{user_id}':
    delete:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 删除指定的租户用户
      summary: 删除租户用户
    get:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 根据用户 ID 获取租户用户详情
      summary: 获取租户用户详情
    put:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 更新租户用户的基本信息
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.UpdateTenantUserRequest
        description: 更新用户请求
        required: true
      summary: 更新租户用户信息
  '/api/v1/tenant-users/{user_id}/activate':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 激活指定的租户用户
      summary: 激活租户用户
  '/api/v1/tenant-users/{user_id}/deactivate':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 停用指定的租户用户
      summary: 停用租户用户
  '/api/v1/tenant-users/{user_id}/lock':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 锁定指定的租户用户
      summary: 锁定租户用户
  '/api/v1/tenant-users/{user_id}/mfa':
    delete:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 管理员重置指定租户用户的 MFA 配置
      summary: 重置租户用户 MFA
    get:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.MFAStatusResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 获取指定租户用户的 MFA 配置状态
      summary: 获取租户用户 MFA 状态
  '/api/v1/tenant-users/{user_id}/password':
    put:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 修改租户用户密码
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.ChangePasswordRequest
        description: 修改密码请求
        required: true
      summary: 修改租户用户密码
  '/api/v1/tenant-users/{user_id}/roles':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 为租户用户分配角色
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_tenant_app.AssignRoleRequest
        description: 分配角色请求
        required: true
      summary: 分配租户用户角色
  '/api/v1/tenant-users/{user_id}/unlock':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_tenant_app.TenantUserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Tenant User
      description: 解锁指定的租户用户
      summary: 解锁租户用户
  /api/v1/tokenization/keys:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                items:
                  $ref: >-
                    #/components/schemas/psp_com_internal_admin_app.HandlerKeyResponse
                type: array
          description: OK
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Key Rotation
      description: 列出租户的所有加密密钥
      summary: 列出所有密钥
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerKeyResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Key Rotation
      description: 创建新的加密密钥版本
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerCreateKeyRequest
        description: 创建密钥请求
        required: true
      summary: 创建新密钥版本
  /api/v1/tokenization/keys/active:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerKeyResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Key Rotation
      description: 获取租户当前活跃的加密密钥
      summary: 获取活跃密钥
  /api/v1/tokenization/rotation/history:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  data:
                    items:
                      $ref: >-
                        #/components/schemas/psp_com_internal_admin_app.HandlerRotationProgressResponse
                    type: array
                  total:
                    type: integer
                type: object
          description: OK
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Key Rotation
      description: 分页列出密钥轮换历史记录
      summary: 列出轮换历史
  /api/v1/tokenization/rotation/process-batch:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerRotationProgressResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Key Rotation
      description: 手动触发处理一批令牌的重加密
      summary: 处理一批重加密
  /api/v1/tokenization/rotation/progress:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerRotationProgressResponse
          description: OK
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Key Rotation
      description: 获取当前或最近一次密钥轮换的进度
      summary: 获取轮换进度
  /api/v1/tokenization/rotation/start:
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerRotationProgressResponse
          description: Created
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 轮换已在进行中
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Key Rotation
      description: 创建新密钥版本并开始重加密所有令牌
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerStartRotationRequest
        description: 启动轮换请求
      summary: 启动密钥轮换
  /api/v1/tokenization/rotation/stats:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerKeyRotationStatsResponse
          description: OK
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Key Rotation
      description: 获取密钥和令牌的统计信息
      summary: 获取密钥轮换统计
  /api/v1/transactions/batch-refund:
    get:
      parameters:
        - description: '任务状态筛选 (pending, processing, completed, failed, partial)'
          in: query
          name: status
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            maximum: 100
            minimum: 1
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerListBatchRefundJobsHTTPResponse
          description: 任务列表
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器内部错误
      tags:
        - Transaction Enhanced
      description: 查询批量退款任务列表，支持分页和状态筛选
      summary: 查询批量退款任务列表
    post:
      responses:
        '202':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerBatchRefundJobHTTPResponse
          description: 任务已接受
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 未授权
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器内部错误
      tags:
        - Transaction Enhanced
      description: 批量提交退款请求，立即返回任务 ID，后台异步处理
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerCreateBatchRefundHTTPRequest
        description: 批量退款请求
        required: true
      summary: 创建批量退款任务
  '/api/v1/transactions/batch-refund/{id}':
    get:
      parameters:
        - description: 任务 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerBatchRefundJobHTTPResponse
          description: 任务详情
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求参数错误
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 任务不存在
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 服务器内部错误
      tags:
        - Transaction Enhanced
      description: 查询批量退款任务的执行状态和结果
      summary: 获取批量退款任务状态
  /api/v1/transactions/export:
    get:
      parameters:
        - description: '支付方式筛选 (pix, spei, upi)'
          in: query
          name: payment_method
          schema:
            type: string
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 状态筛选
          in: query
          name: status
          schema:
            type: string
        - description: '导出格式 (csv, excel, json)'
          in: query
          name: format
          required: true
          schema:
            type: string
        - description: 导出数量
          in: query
          name: limit
          schema:
            default: 1000
            type: integer
      responses:
        '200':
          content:
            application/json: {}
            application/octet-stream: {}
          description: 导出文件
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
            application/octet-stream:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
            application/octet-stream:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction
      description: 批量导出交易记录（支持 CSV、Excel、JSON）
      summary: 导出交易记录
  /api/v1/transactions/search:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_transaction_app.SearchResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction Search
      description: >-
        跨支付方式、跨交易类型的统一交易搜索。


        **使用 POST 方法说明（Issue #2944）**：

        由于搜索条件可能包含多个复杂参数（merchant_id, transaction_type, payment_method, status,
        start_time, end_time 等），

        当同时使用多个筛选条件时，URL 查询字符串可能超过浏览器和服务器的 URL 长度限制（通常为 2048 字符）。

        因此，此端点使用 POST 方法将搜索条件放在请求体中，以支持更复杂的查询场景。


        **扩展搜索参数**：

        - `merchant_ids[]`: 多商户筛选（如 ["uuid1", "uuid2"]）

        - `statuses[]`: 多状态筛选（如 ["pending", "processing"]）

        - `state`: 单个内部状态筛选（向后兼容）

        - `states[]`: 多内部状态筛选（如 ["risk_checking", "queued"]）

        - `search_term`: 关键词搜索（搜索 Transaction ID, Merchant Order ID, Provider
        Ref, E2E ID）

        - `customer_tax_id`: 客户税号精确搜索
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerSearchTransactionsRequest
        description: 搜索条件
        required: true
      summary: 搜索交易
  /api/v1/transactions/stats/overview:
    get:
      parameters:
        - description: 开始时间 (RFC3339 格式，默认 24 小时前)
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间 (RFC3339 格式，默认当前时间)
          in: query
          name: end_time
          schema:
            type: string
        - description: 币种筛选 (可选)
          in: query
          name: currency
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_admin_app.HandlerTransactionStatsResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction Stats
      description: |-
        获取交易统计 Dashboard 数据，包括代收代付总额、成功率、支付方式分布、队列状态等

        **返回内容**：
        - `metrics`: 核心指标（代收/代付总额、成功率、系统健康状态）
        - `trends`: 趋势数据（按时间粒度统计）
        - `channel_health`: 渠道健康状态
        - `payment_methods`: 支付方式统计分布
        - `queues`: 队列统计（待审批、失败 Webhook、卡单等）
      summary: 获取交易统计概览
  '/api/v1/transactions/{id}':
    get:
      parameters:
        - description: 交易 ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: 交易类型 (invoice/transfer)，可选，不提供则自动检测
          in: query
          name: transaction_type
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_transaction_app.GetTransactionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction Search
      description: 根据交易 ID 获取完整的交易详情，包括状态历史
      summary: 获取交易详情
  '/api/v1/transactions/{id}/cancel':
    post:
      parameters:
        - description: 交易 ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: '支付方式 (pix, spei, upi)'
          in: query
          name: payment_method
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.AdminCancelResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction
      description: 'Admin 取消待处理交易（需要 transaction:cancel 权限）'
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerCancelRequest
        description: 取消请求
      summary: 取消交易
  '/api/v1/transactions/{id}/correct':
    post:
      parameters:
        - description: 交易 ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: '支付方式 (pix, spei, upi)'
          in: query
          name: payment_method
          required: true
          schema:
            type: string
        - description: '交易类型 (invoice, transfer)'
          in: query
          name: transaction_type
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.CorrectionResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction Correction
      description: 创建交易状态修正申请，需要三步审批：申请 -> 审批 -> 审核
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerCreateCorrectionRequest
        description: 修正申请
        required: true
      summary: 创建交易修正申请
  '/api/v1/transactions/{id}/history':
    get:
      parameters:
        - description: 交易 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_transaction_app.GetTransactionHistoryResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction Search
      description: 根据交易 ID 获取状态变更历史记录
      summary: 获取交易状态变更历史
  '/api/v1/transactions/{id}/refund':
    post:
      parameters:
        - description: 交易 ID
          in: path
          name: id
          required: true
          schema:
            type: string
        - description: '支付方式 (pix, spei, upi)'
          in: query
          name: payment_method
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.AdminRefundResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction
      description: 'Admin 发起退款（需要 transaction:refund 权限）'
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerRefundRequest
        description: 退款请求
        required: true
      summary: 手动退款
  '/api/v1/transactions/{transaction_id}/approve':
    post:
      parameters:
        - description: 交易 ID
          in: path
          name: transaction_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.RiskApprovalResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction Risk
      description: '批准处于 risk_checking 状态的代付交易（需要 transaction:approve_risk 权限）'
      summary: 批准风控检查
  '/api/v1/transactions/{transaction_id}/reject':
    post:
      parameters:
        - description: 交易 ID
          in: path
          name: transaction_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_ops_app.RiskApprovalResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction Risk
      description: '拒绝处于 risk_checking 状态的代付交易（需要 transaction:approve_risk 权限）'
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerRiskRejectRequest
        description: 拒绝原因
        required: true
      summary: 拒绝风控检查
  '/api/v1/transactions/{transaction_id}/webhook/retry':
    post:
      parameters:
        - description: 交易 ID
          in: path
          name: transaction_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_webhook_merchant_app.DeliveryDetail
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Transaction
        - Webhook
      description: 根据交易 ID 查找最新的 Webhook 投递记录并重试
      summary: 按交易 ID 重试 Webhook 投递
  /api/v1/treasury/currencies:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 列出所有货币白名单
      summary: 列出货币白名单
    put:
      parameters:
        - description: 商户 ID（不传则为租户级别）
          in: query
          name: merchant_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 创建或更新租户/商户的货币白名单
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_treasury_app.UpdateCurrencyWhitelistRequest
        description: 白名单配置
        required: true
      summary: 创建或更新货币白名单
  '/api/v1/treasury/currencies/disable/{currency}':
    post:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 货币代码
          in: path
          name: currency
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 在白名单中禁用指定货币
      summary: 禁用货币
  /api/v1/treasury/currencies/effective:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 获取有效的货币白名单（优先商户级别，其次租户级别）
      summary: 获取有效的白名单
  /api/v1/treasury/currencies/enable:
    post:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 在白名单中启用指定货币
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_treasury_app.EnableCurrencyRequest
        description: 启用货币请求
        required: true
      summary: 启用货币
  /api/v1/treasury/currencies/enabled:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 获取白名单中所有启用的货币
      summary: 获取启用的货币列表
  '/api/v1/treasury/currencies/merchant/{merchant_id}':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 获取指定商户的货币白名单
      summary: 获取商户级别白名单
  /api/v1/treasury/currencies/settlement:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 获取白名单中所有可用于结算的货币
      summary: 获取可结算的货币列表
  /api/v1/treasury/currencies/tenant-level:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 获取当前租户的货币白名单
      summary: 获取租户级别白名单
  '/api/v1/treasury/currencies/validate-settlement/{currency}':
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 货币代码
          in: path
          name: currency
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 检查指定货币是否可用于结算
      summary: 验证货币是否可用于结算
  '/api/v1/treasury/currencies/validate/{currency}':
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 货币代码
          in: path
          name: currency
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 检查指定货币是否在白名单中启用
      summary: 验证货币是否可用
  '/api/v1/treasury/currencies/{whitelist_id}':
    delete:
      parameters:
        - description: 白名单 ID
          in: path
          name: whitelist_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 删除指定的货币白名单
      summary: 删除白名单
    get:
      parameters:
        - description: 白名单 ID
          in: path
          name: whitelist_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Currency Whitelist
      description: 根据白名单 ID 获取详情
      summary: 获取货币白名单
  /api/v1/treasury/fx/conversions:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 业务类型
          in: query
          name: business_type
          schema:
            type: string
        - description: 源货币
          in: query
          name: source_currency
          schema:
            type: string
        - description: 目标货币
          in: query
          name: target_currency
          schema:
            type: string
        - description: 开始时间
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间
          in: query
          name: end_time
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - FX Conversion
      description: 按条件查询转换记录列表
      summary: 列出转换记录
  '/api/v1/treasury/fx/conversions/business/{business_type}/{business_id}':
    get:
      parameters:
        - description: 业务类型
          in: path
          name: business_type
          required: true
          schema:
            type: string
        - description: 业务 ID
          in: path
          name: business_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - FX Conversion
      description: 根据业务类型和业务 ID 获取转换记录
      summary: 根据业务单号获取转换记录
  '/api/v1/treasury/fx/conversions/{conversion_id}':
    get:
      parameters:
        - description: 转换 ID
          in: path
          name: conversion_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - FX Conversion
      description: 根据转换 ID 获取转换记录详情
      summary: 获取转换记录
  /api/v1/treasury/fx/convert:
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '409':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Conflict
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - FX Conversion
      description: 执行货币转换（幂等操作）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_treasury_app.FXConvertRequest
        description: 转换请求
        required: true
      summary: 执行 FX 转换
  /api/v1/treasury/fx/quote:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - FX Conversion
      description: 获取货币转换报价（预览，不执行转换）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_treasury_app.FXQuoteRequest
        description: 报价请求
        required: true
      summary: 获取 FX 报价
  /api/v1/treasury/fx/summary:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          required: true
          schema:
            type: string
        - description: 开始时间
          in: query
          name: start_time
          required: true
          schema:
            type: string
        - description: 结束时间
          in: query
          name: end_time
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - FX Conversion
      description: 获取指定商户在时间范围内的转换汇总
      summary: 获取转换汇总
  /api/v1/treasury/markup-configs:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 是否激活
          in: query
          name: is_active
          schema:
            type: boolean
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Markup Config
      description: 按条件查询 Markup 配置列表
      summary: 列出 Markup 配置
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Markup Config
      description: 创建新的 Markup 配置（支持租户/商户/货币对级别）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_treasury_app.CreateMarkupConfigRequest
        description: 创建请求
        required: true
      summary: 创建 Markup 配置
  /api/v1/treasury/markup-configs/effective:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 基础货币
          in: query
          name: base_currency
          schema:
            type: string
        - description: 报价货币
          in: query
          name: quote_currency
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Markup Config
      description: 根据商户和货币对获取有效的 Markup 配置（按优先级匹配）
      summary: 获取有效的 Markup 配置
  '/api/v1/treasury/markup-configs/merchant/{merchant_id}':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Markup Config
      description: 获取指定商户的 Markup 配置
      summary: 获取商户级别配置
  /api/v1/treasury/markup-configs/tenant-level:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Markup Config
      description: 获取租户级别的 Markup 配置
      summary: 获取租户级别配置
  '/api/v1/treasury/markup-configs/{markup_id}':
    delete:
      parameters:
        - description: 配置 ID
          in: path
          name: markup_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Markup Config
      description: 删除指定的 Markup 配置
      summary: 删除 Markup 配置
    get:
      parameters:
        - description: 配置 ID
          in: path
          name: markup_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Markup Config
      description: 根据配置 ID 获取 Markup 配置详情
      summary: 获取 Markup 配置
    put:
      parameters:
        - description: 配置 ID
          in: path
          name: markup_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Markup Config
      description: 更新现有的 Markup 配置
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_treasury_app.UpdateMarkupConfigRequest
        description: 更新请求
        required: true
      summary: 更新 Markup 配置
  '/api/v1/treasury/markup-configs/{markup_id}/deactivate':
    post:
      parameters:
        - description: 配置 ID
          in: path
          name: markup_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Markup Config
      description: 停用指定的 Markup 配置
      summary: 停用 Markup 配置
  /api/v1/treasury/rates:
    get:
      parameters:
        - description: 基础货币
          in: query
          name: base_currency
          schema:
            type: string
        - description: 报价货币
          in: query
          name: quote_currency
          schema:
            type: string
        - description: 汇率来源
          in: query
          name: source
          schema:
            type: string
        - description: 开始时间
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间
          in: query
          name: end_time
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Exchange Rates
      description: 按条件查询汇率列表
      summary: 列出汇率
    post:
      responses:
        '201':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Created
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Exchange Rates
      description: 手动创建新的汇率记录
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_treasury_app.CreateExchangeRateRequest
        description: 创建汇率请求
        required: true
      summary: 创建汇率
  /api/v1/treasury/rates/currency-pairs:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Exchange Rates
      description: 获取系统中已配置的所有货币对
      summary: 获取所有货币对
  '/api/v1/treasury/rates/id/{id}':
    get:
      parameters:
        - description: 汇率 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Exchange Rates
      description: 根据汇率 ID 获取汇率详情
      summary: 根据 ID 获取汇率
  /api/v1/treasury/rates/import:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Exchange Rates
      description: 批量导入多个货币对的汇率
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_treasury_app.BatchImportRatesRequest
        description: 批量导入请求
        required: true
      summary: 批量导入汇率
  /api/v1/treasury/rates/import-logs:
    get:
      parameters:
        - description: 来源
          in: query
          name: source
          schema:
            type: string
        - description: 导入类型
          in: query
          name: import_type
          schema:
            type: string
        - description: 状态
          in: query
          name: status
          schema:
            type: string
        - description: 开始时间
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间
          in: query
          name: end_time
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Exchange Rates
      description: 按条件查询导入日志列表
      summary: 列出导入日志
  '/api/v1/treasury/rates/import-logs/{id}':
    get:
      parameters:
        - description: 日志 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Exchange Rates
      description: 根据日志 ID 获取导入日志详情
      summary: 获取导入日志
  '/api/v1/treasury/rates/{base}/{quote}':
    get:
      parameters:
        - description: 基础货币
          example: USD
          in: path
          name: base
          required: true
          schema:
            type: string
        - description: 报价货币
          example: BRL
          in: path
          name: quote
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Exchange Rates
      description: 获取指定货币对的最新有效汇率
      summary: 获取最新汇率
    put:
      parameters:
        - description: 基础货币
          in: path
          name: base
          required: true
          schema:
            type: string
        - description: 报价货币
          in: path
          name: quote
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Exchange Rates
      description: 手动更新指定货币对的汇率
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_treasury_app.CreateExchangeRateRequest
        description: 更新汇率请求
        required: true
      summary: 手动更新汇率
  '/api/v1/treasury/rates/{base}/{quote}/exists':
    get:
      parameters:
        - description: 基础货币
          in: path
          name: base
          required: true
          schema:
            type: string
        - description: 报价货币
          in: path
          name: quote
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Exchange Rates
      description: 检查指定货币对是否存在有效汇率
      summary: 检查汇率是否存在
  '/api/v1/treasury/rates/{base}/{quote}/history':
    get:
      parameters:
        - description: 基础货币
          in: path
          name: base
          required: true
          schema:
            type: string
        - description: 报价货币
          in: path
          name: quote
          required: true
          schema:
            type: string
        - description: 开始时间
          in: query
          name: start_time
          required: true
          schema:
            type: string
        - description: 结束时间
          in: query
          name: end_time
          required: true
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Treasury - Exchange Rates
      description: 获取指定货币对的汇率历史记录
      summary: 获取汇率历史
  '/api/v1/users/{user_id}':
    get:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.UserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 根据用户 ID 获取用户详情
      summary: 获取用户详情
    put:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.UserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 更新用户的基本信息
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.UpdateUserRequest
        description: 更新用户请求
        required: true
      summary: 更新用户信息
  '/api/v1/users/{user_id}/activate':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.UserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 激活指定用户
      summary: 激活用户
  '/api/v1/users/{user_id}/deactivate':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.UserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 停用指定用户
      summary: 停用用户
  '/api/v1/users/{user_id}/lock':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.UserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 锁定指定用户
      summary: 锁定用户
  '/api/v1/users/{user_id}/mfa/disable':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.UserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 为用户禁用多因素认证
      summary: 禁用 MFA
  '/api/v1/users/{user_id}/mfa/enable':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.UserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 为用户启用多因素认证
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.EnableMFARequest
        description: 启用 MFA 请求
        required: true
      summary: 启用 MFA
  '/api/v1/users/{user_id}/password':
    put:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 修改用户密码
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.ChangePasswordRequest
        description: 修改密码请求
        required: true
      summary: 修改密码
  '/api/v1/users/{user_id}/roles':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.UserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 为用户分配角色
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.AssignRolesRequest
        description: 分配角色请求
        required: true
      summary: 分配角色
  '/api/v1/users/{user_id}/unlock':
    post:
      parameters:
        - description: 用户 ID
          in: path
          name: user_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.UserResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - User
      description: 解锁指定用户
      summary: 解锁用户
  /api/v1/webhooks/alertmanager:
    post:
      parameters:
        - description: 'Basic Auth: Basic base64(username:password)'
          in: header
          name: Authorization
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 处理成功
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 请求无效
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 认证失败
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: 内部错误
      tags:
        - Webhooks
      description: 接收 AlertManager 的异常检测告警回调，将告警转换为异常记录存储到系统中
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/http.AlertManagerWebhook'
        description: AlertManager Webhook Payload
        required: true
      summary: 接收 AlertManager Webhook
  /api/v1/webhooks/deliveries:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 状态：pending/sending/completed/failed
          in: query
          name: status
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_webhook_merchant_app.DeliveryListResult
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Webhook
      description: 按商户/状态分页查询 Webhook 投递记录
      summary: 查询 Webhook 投递记录
  '/api/v1/webhooks/deliveries/{id}':
    get:
      parameters:
        - description: 投递 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_webhook_merchant_app.DeliveryDetail
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Webhook
      description: 获取指定投递记录的完整请求/响应/重试信息
      summary: Webhook 投递详情
  '/api/v1/webhooks/deliveries/{id}/retry':
    post:
      parameters:
        - description: 投递 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_webhook_merchant_app.DeliveryDetail
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Webhook
      description: 立即触发一次 Webhook 重试
      summary: 手动重试 Webhook 投递
  /api/v1/webhooks/failed:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 每页数量
          in: query
          name: limit
          schema:
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_webhook_merchant_app.DeliveryListResult
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Webhook
      description: 快速筛选失败的 Webhook 记录便于排查
      summary: 查询失败的 Webhook 投递
  /api/v1/webhooks/stats:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: 开始时间（RFC3339）
          in: query
          name: start_time
          schema:
            type: string
        - description: 结束时间（RFC3339）
          in: query
          name: end_time
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_webhook_merchant_app.DeliveryStatsResult
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Webhook
      description: 返回成功率、平均延迟、平均重试次数，可选时间/商户过滤
      summary: Webhook 成功率与延迟统计
  '/api/v1/webhooks/unified/{provider}/{type}':
    post:
      parameters:
        - description: 渠道代码
          in: path
          name: provider
          required: true
          schema:
            enum:
              - bradesco
              - sitobank
              - oscar
            type: string
        - description: Webhook 类型
          in: path
          name: type
          required: true
          schema:
            enum:
              - invoice
              - transfer
              - refund
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 处理成功
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 请求无效
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 签名验证失败
        '403':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: IP 不在白名单
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 渠道不存在
        '503':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: 渠道已禁用
      tags:
        - Webhooks
      description: 统一入口接收各支付渠道的 Webhook 回调
      summary: 处理渠道 Webhook 回调
  '/api/v1/webhooks/{id}/rotate-secret':
    post:
      parameters:
        - description: Webhook 配置 ID
          in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_webhook_merchant_app.RotateSecretResult
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Webhook
      description: 生成新的 Webhook 签名密钥，旧密钥立即失效
      summary: 轮换 Webhook 签名密钥
  /api/v1/withdrawals:
    get:
      parameters:
        - description: 商户 ID
          in: query
          name: merchant_id
          schema:
            type: string
        - description: >-
            状态筛选 (pending, reviewed, approved, processing, completed, failed,
            canceled)
          in: query
          name: status
          schema:
            type: string
        - description: 开始日期 (RFC3339)
          in: query
          name: start_date
          schema:
            type: string
        - description: 结束日期 (RFC3339)
          in: query
          name: end_date
          schema:
            type: string
        - description: 最小金额（分）
          in: query
          name: min_amount
          schema:
            type: integer
        - description: 最大金额（分）
          in: query
          name: max_amount
          schema:
            type: integer
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListWithdrawalsAdminResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Withdrawal Admin
      description: 查询所有提现申请（支持按商户、状态、金额、日期筛选）
      summary: 查询提现列表
  /api/v1/withdrawals/batch-approve:
    post:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.BatchApproveResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Withdrawal Admin
      description: 批量审批提现申请（pending → reviewed 或 reviewed → approved）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.BatchApproveRequest
        description: 批量审批请求
        required: true
      summary: 批量审批
  /api/v1/withdrawals/pending:
    get:
      parameters:
        - description: 每页数量
          in: query
          name: limit
          schema:
            default: 20
            type: integer
        - description: 偏移量
          in: query
          name: offset
          schema:
            default: 0
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.ListWithdrawalsAdminResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Withdrawal Admin
      description: 查询待审批的提现申请（pending 和 reviewed 状态）
      summary: 查询待审批提现
  /api/v1/withdrawals/summary:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.WithdrawalAdminSummary
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Withdrawal Admin
      description: 获取各状态的提现数量和金额统计
      summary: 获取提现审批汇总统计
  '/api/v1/withdrawals/{withdrawal_id}':
    get:
      parameters:
        - description: 提现 ID
          example: '"00000000-0000-0000-0000-000000000001"'
          in: path
          name: withdrawal_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.WithdrawalAdminResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Withdrawal Admin
      description: 获取单个提现申请的详细信息
      summary: 获取提现详情
  '/api/v1/withdrawals/{withdrawal_id}/approve':
    post:
      parameters:
        - description: 提现 ID
          example: '"00000000-0000-0000-0000-000000000001"'
          in: path
          name: withdrawal_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.WithdrawalAdminResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Forbidden
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Withdrawal Admin
      description: 审批提现申请（reviewed → approved），审批人不能是审核人
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.ApproveWithdrawalRequest
        description: 审批备注
      summary: 二级审批
  '/api/v1/withdrawals/{withdrawal_id}/reject':
    post:
      parameters:
        - description: 提现 ID
          example: '"00000000-0000-0000-0000-000000000001"'
          in: path
          name: withdrawal_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.WithdrawalAdminResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Withdrawal Admin
      description: 拒绝提现申请
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.RejectWithdrawalRequest
        description: 拒绝原因
        required: true
      summary: 拒绝提现
  '/api/v1/withdrawals/{withdrawal_id}/review':
    post:
      parameters:
        - description: 提现 ID
          example: '"00000000-0000-0000-0000-000000000001"'
          in: path
          name: withdrawal_id
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.WithdrawalAdminResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Bad Request
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Forbidden
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Withdrawal Admin
      description: 审核提现申请（pending → reviewed）
      requestBody:
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.ApproveWithdrawalRequest
        description: 审核备注
      summary: 一级审核
  '/merchants/{merchant_id}/kyb':
    get:
      parameters:
        - description: 商户 ID
          in: path
          name: merchant_id
          required: true
          schema:
            format: uuid
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/psp_com_internal_merchant_app.MerchantKYBResponse
          description: OK
        '400':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Bad Request
        '401':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Unauthorized
        '403':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Forbidden
        '404':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Not Found
        '500':
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
          description: Internal Server Error
      tags:
        - Admin-Merchants
      description: >-
        根据商户 ID 获取其 KYB (Know Your Business) 企业认证详情，包括法人代表信息、注册地址、营业执照、UBO
        信息、风险评估和审核状态等
      summary: 获取商户 KYB 认证详情
  /telegram/health:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
          description: OK
      tags:
        - Telegram Webhook
      description: Telegram Bot 服务健康检查
      summary: 健康检查
  '/telegram/webhook/{bot_id}':
    post:
      parameters:
        - description: Bot ID
          in: path
          name: bot_id
          required: true
          schema:
            type: string
        - description: Webhook Secret Token
          in: header
          name: X-Telegram-Bot-Api-Secret-Token
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Webhook 处理成功
        '400':
          description: Bad Request - 无效的 Bot ID 或请求体
        '401':
          description: Unauthorized - 缺少 Secret Token
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/psp_com_pkg_apierror.APIError'
          description: Internal Server Error
      tags:
        - Telegram Webhook
      description: 接收并处理 Telegram Bot 的 Webhook 更新
      summary: 处理 Telegram Webhook
components:
  requestBodies:
    postApiV1FeesImport:
      content:
        application/octet-stream:
          schema:
            format: binary
            type: string
      required: true
    psp_com_internal_channel_app.ChannelVerifyRequest:
      content:
        application/json:
          schema:
            $ref: >-
              #/components/schemas/psp_com_internal_channel_app.ChannelVerifyRequest
      description: 验证请求
      required: true
    psp_com_internal_risk_app.LimitRequest:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/psp_com_internal_risk_app.LimitRequest'
      description: 限额配置
      required: true
  schemas:
    app.ComparisonMetricsResponse:
      properties:
        avg_legacy_duration_ms:
          type: integer
        avg_temporal_duration_ms:
          type: integer
        compensation_count:
          type: integer
        consistency_rate:
          type: number
        consistent_count:
          type: integer
        failure_rate:
          type: number
        inconsistent_count:
          type: integer
        p99_legacy_duration_ms:
          type: integer
        p99_temporal_duration_ms:
          type: integer
        total_count:
          type: integer
      type: object
    app.ComparisonResultResponse:
      properties:
        amount_diff:
          type: integer
        compared_at:
          type: string
        compensation_fired:
          type: boolean
        compensation_result:
          type: string
        id:
          type: string
        is_consistent:
          type: boolean
        legacy_duration_ms:
          type: integer
        release_id:
          type: string
        temporal_duration_ms:
          type: integer
        tenant_id:
          type: string
        timing_diff_ms:
          type: integer
        withdrawal_id:
          type: string
      type: object
    app.CreateReleaseRequest:
      properties:
        description:
          type: string
        name:
          type: string
        target_tenants:
          items:
            type: string
          minItems: 1
          type: array
        thresholds:
          $ref: '#/components/schemas/app.ThresholdsRequest'
      required:
        - name
        - target_tenants
      type: object
    app.DisableTenantRequest:
      properties:
        release_id:
          type: string
        tenant_id:
          type: string
      required:
        - release_id
        - tenant_id
      type: object
    app.EnableTenantRequest:
      properties:
        release_id:
          type: string
        tenant_id:
          type: string
      required:
        - release_id
        - tenant_id
      type: object
    app.HealthMetricsResponse:
      properties:
        failure_rate:
          type: number
        inconsistency_rate:
          type: number
        latency_p99_ms:
          type: integer
        success_count:
          type: integer
      type: object
    app.ListComparisonResultsResponse:
      properties:
        items:
          items:
            $ref: '#/components/schemas/app.ComparisonResultResponse'
          type: array
        total:
          type: integer
      type: object
    app.ListReleasesResponse:
      properties:
        items:
          items:
            $ref: '#/components/schemas/app.ReleaseResponse'
          type: array
        total:
          type: integer
      type: object
    app.ReleaseResponse:
      properties:
        completed_at:
          type: string
        created_at:
          type: string
        current_phase:
          type: string
        description:
          type: string
        enabled_tenants:
          items:
            type: string
          type: array
        health_status:
          type: string
        id:
          type: string
        last_checked_at:
          type: string
        name:
          type: string
        rollback_reason:
          type: string
        started_at:
          type: string
        target_tenants:
          items:
            type: string
          type: array
        tenant_id:
          type: string
        thresholds:
          $ref: '#/components/schemas/app.ThresholdsResponse'
        updated_at:
          type: string
      type: object
    app.RollbackReleaseRequest:
      properties:
        reason:
          type: string
        release_id:
          type: string
      required:
        - reason
        - release_id
      type: object
    app.TenantCandidateResponse:
      properties:
        avg_amount:
          description: 平均单笔金额
          type: integer
        daily_volume:
          description: 日均交易量
          type: integer
        historical_days:
          description: 历史天数
          type: integer
        recommended_reason:
          description: 推荐原因
          type: string
        risk_score:
          description: '风险评分 (0-1, 越低越安全)'
          type: number
        tenant_id:
          type: string
        tenant_name:
          type: string
      type: object
    app.TenantCandidatesResponse:
      properties:
        candidates:
          items:
            $ref: '#/components/schemas/app.TenantCandidateResponse'
          type: array
      type: object
    app.ThresholdsRequest:
      properties:
        auto_rollback_enabled:
          description: 默认 true
          type: boolean
        max_failure_rate:
          description: 默认 0.01 (1%)
          type: number
        max_inconsistency_rate:
          description: 默认 0.001 (0.1%)
          type: number
        max_latency_p99_ms:
          description: 默认 5000 (5s)
          type: integer
        min_success_count:
          description: 默认 100
          type: integer
      type: object
    app.ThresholdsResponse:
      properties:
        auto_rollback_enabled:
          type: boolean
        max_failure_rate:
          type: number
        max_inconsistency_rate:
          type: number
        max_latency_p99_ms:
          type: integer
        min_success_count:
          type: integer
      type: object
    http.AlertManagerAlert:
      properties:
        annotations:
          additionalProperties:
            type: string
          type: object
        endsAt:
          type: string
        fingerprint:
          type: string
        generatorURL:
          type: string
        labels:
          additionalProperties:
            type: string
          type: object
        startsAt:
          type: string
        status:
          type: string
      type: object
    http.AlertManagerWebhook:
      properties:
        alerts:
          items:
            $ref: '#/components/schemas/http.AlertManagerAlert'
          type: array
        commonAnnotations:
          additionalProperties:
            type: string
          type: object
        commonLabels:
          additionalProperties:
            type: string
          type: object
        externalURL:
          type: string
        groupKey:
          type: string
        groupLabels:
          additionalProperties:
            type: string
          type: object
        receiver:
          type: string
        status:
          description: '"firing" or "resolved"'
          type: string
        truncatedAlerts:
          type: integer
        version:
          type: string
      type: object
    internal_interfaces_admin_handler.MFAMethodInfo:
      properties:
        bound_at:
          type: string
        device_name:
          type: string
        id:
          type: string
        method_type:
          description: totp | sms | email | webauthn
          type: string
        status:
          description: active | disabled
          type: string
      type: object
    internal_interfaces_admin_handler.MerchantUserMFAResponse:
      properties:
        methods:
          items:
            $ref: >-
              #/components/schemas/internal_interfaces_admin_handler.MFAMethodInfo
          type: array
        mfa_enabled:
          type: boolean
        user_id:
          type: string
      type: object
    internal_interfaces_admin_handler.SensitiveActionPasskeyOptionsInput:
      properties:
        action_type:
          description: 敏感操作类型
          type: string
      required:
        - action_type
      type: object
    internal_interfaces_admin_handler.SensitiveActionPasskeyOptionsOutput:
      properties:
        allow_credentials:
          description: 允许的凭证列表
          items:
            additionalProperties: {}
            type: object
          type: array
        challenge:
          description: Base64 URL 编码的 challenge
          type: string
        rp_id:
          description: Relying Party ID
          type: string
        timeout:
          description: 超时时间（毫秒）
          type: integer
        user_verification:
          description: 用户验证要求
          type: string
      type: object
    internal_interfaces_admin_handler.SensitiveActionPasskeyVerifyInput:
      properties:
        action_type:
          description: 敏感操作类型
          type: string
        assertion_response:
          additionalProperties: true
          description: WebAuthn 断言响应
          type: object
      required:
        - action_type
        - assertion_response
      type: object
    internal_interfaces_admin_handler.SensitiveActionVerifyInput:
      properties:
        action_type:
          description: 敏感操作类型
          type: string
        code:
          description: MFA 验证码（6位TOTP或8位备用码）
          maxLength: 8
          minLength: 6
          type: string
      required:
        - action_type
        - code
      type: object
    internal_interfaces_admin_handler.SensitiveActionVerifyOutput:
      properties:
        action_token:
          description: 敏感操作 Token
          type: string
        allowed_actions:
          description: 允许的操作类型
          items:
            type: string
          type: array
        expires_at:
          description: Token 过期时间（ISO 8601）
          type: string
      type: object
    psp_com_internal_admin_app.ChannelHealthItem:
      properties:
        avg_latency_ms:
          type: number
        channel_code:
          type: string
        channel_id:
          type: string
        channel_name:
          type: string
        failed_count:
          type: integer
        last_health_check:
          type: string
        status:
          description: 'healthy, degraded, down'
          type: string
        success_rate:
          type: number
        transaction_count:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerAdminLoginRequest:
      properties:
        device_fingerprint:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_admin_app.HandlerDeviceFingerprintRequest
          description: 设备指纹
        password:
          description: 密码
          example: SecurePass123!
          type: string
        username:
          description: 用户名
          example: admin@example.com
          type: string
      required:
        - password
        - username
      type: object
    psp_com_internal_admin_app.HandlerAdminLoginResponse:
      properties:
        access_token:
          description: 访问令牌
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          type: string
        available_methods:
          description: 前端使用的字段名（与 available_mfa_types 相同）
          example:
            - totp
            - passkey
          items:
            type: string
          type: array
        available_mfa_types:
          description: 'Issue #849: 可用的 MFA 类型列表'
          example:
            - totp
            - passkey
          items:
            type: string
          type: array
        default_method:
          description: 默认推荐的 MFA 方法
          example: totp
          type: string
        expires_in:
          description: 过期时间(秒)
          example: 3600
          type: integer
        mfa_status:
          description: MFA状态
          example: required
          type: string
        refresh_expires_in:
          description: 刷新令牌过期时间(秒)
          example: 86400
          type: integer
        refresh_token:
          description: 刷新令牌
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          type: string
        session_id:
          description: 会话ID
          example: sess_123456
          type: string
        token_type:
          description: 令牌类型
          example: Bearer
          type: string
      type: object
    psp_com_internal_admin_app.HandlerAdminRegenerateBackupCodesRequest:
      properties:
        mfa_id:
          type: string
        verify_code:
          type: string
      required:
        - mfa_id
        - verify_code
      type: object
    psp_com_internal_admin_app.HandlerApprovalRequest:
      properties:
        notes:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerApproveAgentRequest:
      properties:
        reason:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerApproveSettlementRequest:
      properties:
        comment:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerAssignMerchantRequest:
      properties:
        merchant_id:
          type: string
      required:
        - merchant_id
      type: object
    psp_com_internal_admin_app.HandlerAuditLogResponse:
      properties:
        action:
          type: string
        action_category:
          type: string
        created_at:
          type: string
        data_after:
          items:
            type: integer
          type: array
        data_before:
          items:
            type: integer
          type: array
        error_message:
          type: string
        id:
          type: string
        ip_address:
          type: string
        metadata:
          additionalProperties: true
          description: 'Issue #2986: Metadata 保留 map[string]interface{} 但添加验证器'
          type: object
        operator_id:
          type: string
        operator_name:
          type: string
        operator_role:
          type: string
        request_body:
          items:
            type: integer
          type: array
        request_id:
          type: string
        request_method:
          type: string
        request_path:
          type: string
        resource_id:
          type: string
        resource_name:
          type: string
        resource_type:
          type: string
        response_body:
          items:
            type: integer
          type: array
        response_status:
          type: integer
        result:
          type: string
        tenant_id:
          type: string
        user_agent:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerAuditStatsResponse:
      properties:
        denied_count:
          type: integer
        failed_count:
          type: integer
        success_count:
          type: integer
        total_count:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerBatchRefundJobHTTPResponse:
      properties:
        completed_at:
          type: string
        created_at:
          type: string
        failed_count:
          type: integer
        id:
          type: string
        items:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_admin_app.HandlerRefundItemHTTPResponse
          type: array
        processed_count:
          type: integer
        results:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_admin_app.HandlerRefundResultHTTPResponse
          type: array
        started_at:
          type: string
        status:
          type: string
        success_count:
          type: integer
        total_count:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerCancelRequest:
      properties:
        reason:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerCancelSettlementRequest:
      properties:
        reason:
          type: string
      required:
        - reason
      type: object
    psp_com_internal_admin_app.HandlerCategoryStatsResponse:
      properties:
        category:
          type: string
        count:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerCloseAgentRequest:
      properties:
        reason:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerCreateBatchRefundHTTPRequest:
      properties:
        idempotency_key:
          type: string
        items:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_admin_app.HandlerRefundItemHTTPRequest
          maxItems: 100
          minItems: 1
          type: array
      required:
        - idempotency_key
        - items
      type: object
    psp_com_internal_admin_app.HandlerCreateCorrectionRequest:
      properties:
        correction_type:
          type: string
        metadata:
          additionalProperties: true
          type: object
        reason:
          type: string
        request_notes:
          type: string
        target_status:
          type: string
      required:
        - correction_type
        - reason
      type: object
    psp_com_internal_admin_app.HandlerCreateDailySettlementRequest:
      properties:
        date:
          type: string
        merchant_account_id:
          type: string
      required:
        - date
        - merchant_account_id
      type: object
    psp_com_internal_admin_app.HandlerCreateKeyRequest:
      properties:
        algorithm:
          type: string
        key_id:
          type: string
        provider:
          enum:
            - local
            - vault
          type: string
      required:
        - algorithm
        - key_id
        - provider
      type: object
    psp_com_internal_admin_app.HandlerCreateManualSettlementRequest:
      properties:
        end_date:
          type: string
        merchant_account_id:
          type: string
        start_date:
          type: string
      required:
        - end_date
        - merchant_account_id
        - start_date
      type: object
    psp_com_internal_admin_app.HandlerCreateSettlementScheduleRequest:
      properties:
        hold_days:
          type: integer
        is_active:
          type: boolean
        merchant_account_id:
          type: string
        min_amount:
          type: integer
        settle_cycle:
          type: string
        settle_day_of_month:
          type: integer
        settle_day_of_week:
          type: integer
        settle_time:
          type: string
        settle_type:
          type: string
      required:
        - merchant_account_id
        - settle_cycle
      type: object
    psp_com_internal_admin_app.HandlerCreateTemplateRequest:
      properties:
        data_source:
          type: string
        description:
          type: string
        fields:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_customreport_domain_aggregates.FieldConfig
          minItems: 1
          type: array
        name:
          type: string
        output_format:
          type: string
      required:
        - data_source
        - fields
        - name
        - output_format
      type: object
    psp_com_internal_admin_app.HandlerDeviceFingerprintRequest:
      properties:
        audio_hash:
          description: 音频哈希
          example: ghi789
          type: string
        browser_engine:
          description: 浏览器引擎
          example: Blink
          type: string
        browser_name:
          description: 浏览器名称
          example: Chrome
          type: string
        browser_version:
          description: 浏览器版本
          example: 120.0.0
          type: string
        canvas_hash:
          description: Canvas哈希
          example: abc123
          type: string
        collected_at:
          description: 采集时间
          example: '2024-01-01T00:00:00Z'
          type: string
        cookie_enabled:
          description: Cookie启用
          example: true
          type: boolean
        cpu_cores:
          description: CPU核心数
          example: 8
          type: integer
        device_model:
          description: 设备型号
          example: MacBook Pro
          type: string
        device_type:
          description: 设备类型
          example: desktop
          type: string
        device_vendor:
          description: 设备厂商
          example: Apple
          type: string
        do_not_track:
          description: 禁止追踪
          example: false
          type: boolean
        fonts_hash:
          description: 字体哈希
          example: jkl012
          type: string
        ip_address:
          description: IP地址
          example: 192.168.1.100
          type: string
        language:
          description: 语言
          example: pt-BR
          type: string
        languages:
          description: 语言列表
          example:
            - pt-BR
            - en-US
          items:
            type: string
          type: array
        memory_gb:
          description: 内存(GB)
          example: 16
          type: integer
        os_name:
          description: 操作系统名称
          example: macOS
          type: string
        os_version:
          description: 操作系统版本
          example: 10.15.7
          type: string
        platform:
          description: 平台
          example: Web
          type: string
        plugins_hash:
          description: 插件哈希
          example: mno345
          type: string
        screen_color_depth:
          description: 屏幕色深
          example: 24
          type: integer
        screen_height:
          description: 屏幕高度
          example: 1080
          type: integer
        screen_pixel_ratio:
          description: 屏幕像素比
          example: 1
          type: number
        screen_width:
          description: 屏幕宽度
          example: 1920
          type: integer
        timezone:
          description: 时区
          example: America/Sao_Paulo
          type: string
        timezone_offset:
          description: 时区偏移(分钟)
          example: -180
          type: integer
        touch_support:
          description: 触摸支持
          example: false
          type: boolean
        user_agent:
          description: User Agent
          example: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)
          type: string
        webgl_hash:
          description: WebGL哈希
          example: def456
          type: string
        webgl_renderer:
          description: WebGL渲染器
          example: Intel Iris OpenGL Engine
          type: string
        webgl_vendor:
          description: WebGL供应商
          example: Intel Inc.
          type: string
      type: object
    psp_com_internal_admin_app.HandlerFreezeAccountRequest:
      properties:
        reason:
          maxLength: 500
          type: string
      type: object
    psp_com_internal_admin_app.HandlerGenerateRequest:
      properties:
        end_date:
          type: string
        format:
          type: string
        period:
          type: string
        report_type:
          type: string
        start_date:
          type: string
      required:
        - end_date
        - format
        - report_type
        - start_date
      type: object
    psp_com_internal_admin_app.HandlerGetMFALockStatusResponse:
      properties:
        failed_attempts:
          type: integer
        is_locked:
          type: boolean
        locked_until:
          type: string
        max_attempts:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerGetRemainingBackupCodesResponse:
      properties:
        remaining_count:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerKeyResponse:
      properties:
        algorithm:
          type: string
        created_at:
          type: string
        id:
          type: string
        identifier:
          type: string
        key_id:
          type: string
        provider:
          type: string
        status:
          type: string
        version:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerKeyRotationStatsResponse:
      properties:
        active_keys:
          type: integer
        deprecated_keys:
          type: integer
        revoked_keys:
          type: integer
        tenant_id:
          type: string
        total_tokens_encrypted:
          type: integer
        total_tokens_pending:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerListAuditLogsResponse:
      properties:
        data:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_admin_app.HandlerAuditLogResponse
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerListBatchRefundJobsHTTPResponse:
      properties:
        jobs:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_admin_app.HandlerBatchRefundJobHTTPResponse
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total_count:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerListExecutionsResponse:
      properties:
        data:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_customreport_app.ExecutionDTO
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerListTemplatesResponse:
      properties:
        data:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_customreport_app.TemplateDTO
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerListTrustedDevicesResponse:
      properties:
        devices:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_admin_app.HandlerTrustedDeviceResponse
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerLogoutRequest:
      properties:
        access_token:
          description: 可选，用于审计日志中解析用户信息
          type: string
        refresh_token:
          type: string
      required:
        - refresh_token
      type: object
    psp_com_internal_admin_app.HandlerMFAVerifyRequest:
      properties:
        code:
          type: string
        device_fingerprint:
          $ref: >-
            #/components/schemas/psp_com_internal_admin_app.HandlerDeviceFingerprintRequest
        session_id:
          type: string
        trust_device:
          type: boolean
      required:
        - code
        - session_id
      type: object
    psp_com_internal_admin_app.HandlerMFAVerifyResponse:
      properties:
        access_token:
          type: string
        expires_in:
          type: integer
        refresh_expires_in:
          type: integer
        refresh_token:
          type: string
        remaining_backup_codes:
          type: integer
        token_type:
          type: string
        trust_token:
          type: string
        trust_token_expires_at:
          type: string
        used_backup_code:
          type: boolean
        warning:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerPasskeyAuthenticationOptionsRequest:
      properties:
        session_id:
          type: string
      required:
        - session_id
      type: object
    psp_com_internal_admin_app.HandlerPasskeyBindRequest:
      properties:
        attestation_response:
          additionalProperties: true
          type: object
        device_name:
          type: string
        session_id:
          type: string
      required:
        - attestation_response
        - session_id
      type: object
    psp_com_internal_admin_app.HandlerPasskeyRegistrationOptionsRequest:
      properties:
        session_id:
          type: string
      required:
        - session_id
      type: object
    psp_com_internal_admin_app.HandlerPasskeyVerifyRequest:
      properties:
        assertion_response:
          additionalProperties: true
          type: object
        session_id:
          type: string
      required:
        - assertion_response
        - session_id
      type: object
    psp_com_internal_admin_app.HandlerRefreshTokenRequest:
      properties:
        refresh_token:
          type: string
      required:
        - refresh_token
      type: object
    psp_com_internal_admin_app.HandlerRefundItemHTTPRequest:
      properties:
        idempotency_key:
          type: string
        invoice_id:
          type: string
        reason:
          type: string
        refund_amount:
          type: integer
      required:
        - idempotency_key
        - invoice_id
        - refund_amount
      type: object
    psp_com_internal_admin_app.HandlerRefundItemHTTPResponse:
      properties:
        idempotency_key:
          type: string
        invoice_id:
          type: string
        reason:
          type: string
        refund_amount:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerRefundRequest:
      properties:
        amount:
          type: integer
        idempotency_key:
          type: string
        reason:
          type: string
      required:
        - amount
        - idempotency_key
      type: object
    psp_com_internal_admin_app.HandlerRefundResultHTTPResponse:
      properties:
        error_code:
          type: string
        item_index:
          type: integer
        message:
          type: string
        refund_id:
          type: string
        success:
          type: boolean
      type: object
    psp_com_internal_admin_app.HandlerRegenerateBackupCodesRequest:
      properties:
        verify_code:
          type: string
      required:
        - verify_code
      type: object
    psp_com_internal_admin_app.HandlerRegenerateBackupCodesResponse:
      properties:
        backup_codes:
          items:
            type: string
          type: array
      type: object
    psp_com_internal_admin_app.HandlerRejectAgentRequest:
      properties:
        reason:
          type: string
      required:
        - reason
      type: object
    psp_com_internal_admin_app.HandlerRejectRequest:
      properties:
        reason:
          type: string
      required:
        - reason
      type: object
    psp_com_internal_admin_app.HandlerRejectSettlementRequest:
      properties:
        reason:
          type: string
      required:
        - reason
      type: object
    psp_com_internal_admin_app.HandlerResetUserMFARequest:
      properties:
        revoke_devices:
          type: boolean
      type: object
    psp_com_internal_admin_app.HandlerRevokeAllTokensRequest:
      properties:
        reason:
          description: >-
            撤销原因: logout, password_change, security_breach, admin_action,
            session_kicked, device_revoked, mfa_reset, account_locked,
            user_request
          example: password_change
          type: string
      required:
        - reason
      type: object
    psp_com_internal_admin_app.HandlerRevokeTokenResponse:
      properties:
        message:
          description: 响应消息
          example: All tokens have been revoked
          type: string
        success:
          description: 是否成功
          example: true
          type: boolean
      type: object
    psp_com_internal_admin_app.HandlerRiskRejectRequest:
      properties:
        reason:
          type: string
      required:
        - reason
      type: object
    psp_com_internal_admin_app.HandlerRotationProgressResponse:
      properties:
        batch_failed:
          type: integer
        batch_processed:
          type: integer
        duration:
          type: string
        failed_tokens:
          type: integer
        history_id:
          type: string
        is_completed:
          type: boolean
        processed_tokens:
          type: integer
        progress_percent:
          type: number
        status:
          type: string
        success_rate_percent:
          type: number
        total_tokens:
          type: integer
      type: object
    psp_com_internal_admin_app.HandlerSearchTransactionsRequest:
      properties:
        customer_tax_id:
          description: 客户税号搜索
          type: string
        end_time:
          type: string
        limit:
          type: integer
        merchant_id:
          description: 单个商户 ID（向后兼容）
          type: string
        merchant_ids:
          description: 多商户筛选
          items:
            type: string
          type: array
        offset:
          type: integer
        payment_method:
          type: string
        search_term:
          description: '关键词搜索 (Transaction ID, Merchant Order ID, Provider Ref, E2E ID)'
          type: string
        start_time:
          type: string
        state:
          description: 单个内部状态（向后兼容）
          type: string
        states:
          description: 多内部状态筛选
          items:
            type: string
          type: array
        status:
          description: 单个状态（向后兼容）
          type: string
        statuses:
          description: 多状态筛选
          items:
            type: string
          type: array
        transaction_type:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerStartRotationRequest:
      properties:
        triggered_by:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerSuspendAgentRequest:
      properties:
        reason:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerTOTPBindRequest:
      properties:
        session_id:
          type: string
        setup_id:
          type: string
        verify_code:
          type: string
      required:
        - session_id
        - setup_id
        - verify_code
      type: object
    psp_com_internal_admin_app.HandlerTOTPInitRequest:
      properties:
        session_id:
          type: string
      required:
        - session_id
      type: object
    psp_com_internal_admin_app.HandlerTOTPInitResponse:
      properties:
        backup_codes:
          description: 备用码
          items:
            type: string
          type: array
        expires_at:
          description: 过期时间
          type: string
        secret:
          description: Base32 编码的 TOTP 密钥
          type: string
        setup_id:
          description: 设置会话 ID
          type: string
        tenant_name:
          description: 租户名称（用作 TOTP issuer）
          type: string
        username:
          description: 用户名/邮箱（用于 TOTP 标签）
          type: string
      type: object
    psp_com_internal_admin_app.HandlerTransactionStatsResponse:
      properties:
        channel_health:
          items:
            $ref: '#/components/schemas/psp_com_internal_admin_app.ChannelHealthItem'
          type: array
        generated_at:
          type: string
        metrics:
          $ref: '#/components/schemas/psp_com_internal_admin_app.TransactionMetrics'
        payment_methods:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_admin_app.PaymentMethodStatItem
          type: array
        queues:
          $ref: '#/components/schemas/psp_com_internal_admin_app.QueueStats'
        trends:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_admin_app.TransactionTrendItem
          type: array
      type: object
    psp_com_internal_admin_app.HandlerTrustedDeviceResponse:
      properties:
        browser_name:
          type: string
        device_type:
          type: string
        display_name:
          type: string
        expires_at:
          type: string
        id:
          type: string
        is_active:
          type: boolean
        last_used_at:
          type: string
        os_name:
          type: string
        trusted_at:
          type: string
        trusted_from_ip:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerUnfreezeAccountRequest:
      properties:
        reason:
          maxLength: 500
          type: string
      type: object
    psp_com_internal_admin_app.HandlerUpdateDeviceNameRequest:
      properties:
        name:
          maxLength: 100
          minLength: 1
          type: string
      required:
        - name
      type: object
    psp_com_internal_admin_app.HandlerUpdateSettlementScheduleRequest:
      properties:
        hold_days:
          type: integer
        is_active:
          type: boolean
        merchant_account_id:
          type: string
        min_amount:
          type: integer
        settle_cycle:
          type: string
        settle_day_of_month:
          type: integer
        settle_day_of_week:
          type: integer
        settle_time:
          type: string
        settle_type:
          type: string
      type: object
    psp_com_internal_admin_app.HandlerUpdateTemplateRequest:
      properties:
        description:
          type: string
        fields:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_customreport_domain_aggregates.FieldConfig
          minItems: 1
          type: array
        name:
          type: string
        version:
          type: integer
      required:
        - fields
        - name
        - version
      type: object
    psp_com_internal_admin_app.HandlerWebhookEventDTO:
      properties:
        created_at:
          type: string
        id:
          type: string
        idempotency_key:
          type: string
        is_duplicate:
          type: boolean
        last_retry_at:
          type: string
        max_retries:
          type: integer
        next_retry_at:
          type: string
        processed_at:
          type: string
        processing_error:
          type: string
        processing_status:
          type: string
        provider:
          type: string
        provider_transaction_id:
          type: string
        received_at:
          type: string
        request_body:
          items:
            type: integer
          type: array
        request_headers:
          items:
            type: integer
          type: array
        response_body:
          items:
            type: integer
          type: array
        response_status_code:
          type: integer
        retry_count:
          type: integer
        signature_value:
          type: string
        signature_verified:
          type: boolean
        tenant_id:
          type: string
        updated_at:
          type: string
        verification_error:
          type: string
        webhook_type:
          type: string
      type: object
    psp_com_internal_admin_app.MerchantBalanceSnapshot:
      properties:
        account_id:
          type: string
        account_type:
          type: string
        available_balance:
          type: integer
        currency:
          type: string
        frozen_balance:
          type: integer
        pending_balance:
          type: integer
        updated_at:
          type: string
      type: object
    psp_com_internal_admin_app.MerchantDashboardResponse:
      properties:
        active_count:
          type: integer
        active_rate:
          type: number
        closed_count:
          type: integer
        disabled_count:
          type: integer
        generated_at:
          type: string
        pending_count:
          type: integer
        recent_merchants:
          items:
            $ref: '#/components/schemas/psp_com_internal_admin_app.RecentMerchantItem'
          type: array
        status_distribution:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_admin_app.StatusDistributionItem
          type: array
        suspended_count:
          type: integer
        top_merchants:
          items:
            $ref: '#/components/schemas/psp_com_internal_admin_app.TopMerchantItem'
          type: array
        total_count:
          type: integer
        under_review_count:
          type: integer
      type: object
    psp_com_internal_admin_app.MerchantOverviewResponse:
      properties:
        balances:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_admin_app.MerchantBalanceSnapshot
          type: array
        country_code:
          type: string
        created_at:
          type: string
        generated_at:
          type: string
        kyb_status:
          type: string
        merchant_code:
          type: string
        merchant_id:
          type: string
        merchant_name:
          type: string
        risk_assessment:
          $ref: >-
            #/components/schemas/psp_com_internal_admin_app.MerchantRiskAssessmentResponse
        risk_level:
          type: string
        status:
          type: string
        transaction_stats:
          $ref: >-
            #/components/schemas/psp_com_internal_admin_app.MerchantTransactionStats
      type: object
    psp_com_internal_admin_app.MerchantRiskAssessmentResponse:
      properties:
        active_rules_count:
          type: integer
        aml_status:
          type: string
        flagged_transactions:
          type: integer
        last_assessment_at:
          type: string
        merchant_id:
          type: string
        notes:
          type: string
        risk_level:
          type: string
        risk_score:
          type: integer
        triggered_today:
          type: integer
      type: object
    psp_com_internal_admin_app.MerchantTransactionStats:
      properties:
        average_amount:
          type: number
        failed_amount:
          type: integer
        failed_count:
          type: integer
        pending_count:
          type: integer
        period_end:
          type: string
        period_start:
          type: string
        refund_amount:
          type: integer
        refund_count:
          type: integer
        success_amount:
          type: integer
        success_count:
          type: integer
        success_rate:
          type: number
        total_amount:
          type: integer
        total_count:
          type: integer
      type: object
    psp_com_internal_admin_app.PaymentMethodStatItem:
      properties:
        failed_count:
          type: integer
        payment_method:
          description: 'pix, spei, upi, credit_card'
          type: string
        percentage:
          description: 占比 (%)
          type: number
        success_count:
          type: integer
        success_rate:
          type: number
        total_count:
          type: integer
        total_volume:
          type: string
      type: object
    psp_com_internal_admin_app.QueueStats:
      properties:
        failed_webhooks_count:
          description: 失败 Webhook 数量
          type: integer
        pending_payouts:
          description: 待处理代付
          type: integer
        pending_reviews_count:
          description: 待审批数量
          type: integer
        stuck_transactions:
          description: 卡单数量
          type: integer
      type: object
    psp_com_internal_admin_app.RecentMerchantItem:
      properties:
        business_name:
          type: string
        created_at:
          type: string
        email:
          type: string
        merchant_code:
          type: string
        merchant_id:
          type: string
        status:
          type: string
      type: object
    psp_com_internal_admin_app.StatusDistributionItem:
      properties:
        count:
          type: integer
        percentage:
          type: number
        status:
          type: string
      type: object
    psp_com_internal_admin_app.TopMerchantItem:
      properties:
        business_name:
          type: string
        merchant_code:
          type: string
        merchant_id:
          type: string
        status:
          type: string
        transaction_amount:
          type: integer
        transaction_count:
          type: integer
      type: object
    psp_com_internal_admin_app.TransactionMetrics:
      properties:
        avg_processing_time:
          description: 平均处理时间 (秒)
          type: number
        net_revenue:
          description: 净收入 (手续费收入)
          type: string
        success_rate:
          description: 成功率 (%)
          type: number
        system_health:
          description: 'healthy, degraded, down'
          type: string
        total_payin_count:
          description: 代收笔数
          type: integer
        total_payin_volume:
          description: 代收总额
          type: string
        total_payout_count:
          description: 代付笔数
          type: integer
        total_payout_volume:
          description: 代付总额
          type: string
      type: object
    psp_com_internal_admin_app.TransactionTrendItem:
      properties:
        payin_count:
          type: integer
        payin_volume:
          type: string
        payout_count:
          type: integer
        payout_volume:
          type: string
        success_rate:
          type: number
        timestamp:
          type: string
      type: object
    psp_com_internal_agent_app.AgentActionRequest:
      properties:
        action:
          description: 操作类型
          enum:
            - approve
            - reject
            - reset
            - activate
            - suspend
            - close
          example: activate
          type: string
        params:
          additionalProperties: {}
          description: 扩展参数（可选）
          type: object
        reason:
          description: 操作原因
          example: 审核通过
          maxLength: 500
          minLength: 1
          type: string
      required:
        - action
        - reason
      type: object
    psp_com_internal_agent_app.AgentActionResponse:
      properties:
        action:
          description: 执行的操作
          example: activate
          type: string
        changed_at:
          description: 变更时间
          example: '2024-01-01T00:00:00Z'
          type: string
        new_status:
          description: 变更后状态
          example: active
          type: string
        old_status:
          description: 变更前状态
          example: pending
          type: string
        success:
          description: 操作是否成功
          example: true
          type: boolean
      type: object
    psp_com_internal_agent_app.AgentAssignRoleRequest:
      properties:
        role_id:
          type: string
      required:
        - role_id
      type: object
    psp_com_internal_agent_app.AgentChangePasswordRequest:
      properties:
        new_password:
          minLength: 8
          type: string
      required:
        - new_password
      type: object
    psp_com_internal_agent_app.AgentMFAStatusResponse:
      properties:
        mfa_enabled:
          type: boolean
        mfa_type:
          description: 'totp, passkey'
          type: string
      type: object
    psp_com_internal_agent_app.AgentResponse:
      properties:
        active_count:
          description: 活跃商户数
          example: 45
          type: integer
        agent_code:
          description: 代理商代码
          example: AGT001
          type: string
        agent_name:
          description: 代理商名称
          example: Agente São Paulo
          type: string
        business_name:
          description: 企业名称
          example: Comércio Local LTDA
          type: string
        commission_rate:
          description: 佣金费率
          example: '2.5'
          type: string
        commission_type:
          description: 佣金类型
          example: percentage
          type: string
        contact_email:
          description: 联系邮箱
          example: joao@example.com
          type: string
        contact_name:
          description: 联系人姓名
          example: João Silva
          type: string
        contact_phone:
          description: 联系电话
          example: '+5511999999999'
          type: string
        created_at:
          description: 创建时间
          example: '2024-01-01T00:00:00Z'
          type: string
        id:
          description: 代理商ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        last_settlement_at:
          description: 最后结算时间
          example: '2024-01-01T00:00:00Z'
          type: string
        level:
          description: 代理商层级
          example: 1
          type: integer
        max_commission:
          description: 最高佣金(分)
          example: 10000
          type: integer
        merchant_count:
          description: 商户数量
          example: 50
          type: integer
        min_commission:
          description: 最低佣金(分)
          example: 100
          type: integer
        parent_agent_id:
          description: 上级代理商ID
          example: 720e8400-e29b-41d4-a716-446655440001
          type: string
        settlement_cycle:
          description: 结算周期
          example: weekly
          type: string
        settlement_day:
          description: 结算日
          example: 5
          type: integer
        status:
          description: 状态
          example: active
          type: string
        tenant_id:
          description: 租户ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        updated_at:
          description: 更新时间
          example: '2024-01-01T00:00:00Z'
          type: string
      type: object
    psp_com_internal_agent_app.AgentStatusChangeResponse:
      properties:
        agent_id:
          type: string
        new_status:
          type: string
        old_status:
          type: string
        operator_id:
          type: string
        reason:
          type: string
        timestamp:
          type: string
      type: object
    psp_com_internal_agent_app.AgentUserActionRequest:
      properties:
        action:
          description: 操作类型
          enum:
            - activate
            - deactivate
            - lock
            - unlock
          example: activate
          type: string
        params:
          additionalProperties: {}
          description: 扩展参数（可选）
          type: object
        reason:
          description: 操作原因
          example: 用户激活
          maxLength: 500
          minLength: 1
          type: string
      required:
        - action
        - reason
      type: object
    psp_com_internal_agent_app.AgentUserActionResponse:
      properties:
        action:
          description: 执行的操作
          example: activate
          type: string
        changed_at:
          description: 变更时间
          example: '2024-01-01T00:00:00Z'
          type: string
        new_status:
          description: 变更后状态
          example: active
          type: string
        old_status:
          description: 变更前状态
          example: inactive
          type: string
        success:
          description: 操作是否成功
          example: true
          type: boolean
      type: object
    psp_com_internal_agent_app.AgentUserResponse:
      properties:
        agent_id:
          type: string
        created_at:
          type: string
        email:
          type: string
        id:
          type: string
        keycloak_user_id:
          type: string
        mfa_enabled:
          type: boolean
        name:
          type: string
        role_id:
          type: string
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_agent_app.CommissionRuleResponse:
      properties:
        agent_id:
          type: string
        amount_max:
          type: integer
        amount_min:
          type: integer
        commission_rate:
          type: string
        commission_type:
          type: string
        created_at:
          type: string
        id:
          type: string
        is_active:
          type: boolean
        max_commission:
          type: integer
        min_commission:
          type: integer
        payment_method:
          type: string
        priority:
          type: integer
        rule_name:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_agent_app.ConfigureCommissionRuleRequest:
      properties:
        amount_max:
          type: integer
        amount_min:
          type: integer
        commission_rate:
          type: string
        commission_type:
          enum:
            - percentage
            - fixed
          type: string
        max_commission:
          type: integer
        min_commission:
          type: integer
        payment_method:
          type: string
        priority:
          type: integer
        rule_name:
          type: string
      required:
        - commission_rate
        - commission_type
        - rule_name
      type: object
    psp_com_internal_agent_app.CreateAgentRequest:
      properties:
        agent_code:
          description: 代理商代码
          example: AGT001
          type: string
        agent_name:
          description: 代理商名称
          example: Agente São Paulo
          type: string
        business_name:
          description: 企业名称
          example: Comércio Local LTDA
          type: string
        commission_rate:
          description: 佣金费率
          example: '2.5'
          type: string
        commission_type:
          description: 佣金类型
          enum:
            - percentage
            - fixed
          example: percentage
          type: string
        contact_email:
          description: 联系邮箱
          example: joao@example.com
          type: string
        contact_name:
          description: 联系人姓名
          example: João Silva
          type: string
        contact_phone:
          description: 联系电话
          example: '+5511999999999'
          type: string
        parent_agent_id:
          description: 上级代理商ID
          example: 720e8400-e29b-41d4-a716-446655440001
          type: string
      required:
        - agent_code
        - agent_name
        - commission_rate
        - commission_type
      type: object
    psp_com_internal_agent_app.CreateAgentUserRequest:
      properties:
        email:
          type: string
        name:
          type: string
        password:
          minLength: 8
          type: string
        role_id:
          type: string
      required:
        - email
        - name
        - password
        - role_id
      type: object
    psp_com_internal_agent_app.ListAgentUsersResponse:
      properties:
        total:
          type: integer
        users:
          items:
            $ref: '#/components/schemas/psp_com_internal_agent_app.AgentUserResponse'
          type: array
      type: object
    psp_com_internal_agent_app.ListAgentsResponse:
      properties:
        agents:
          description: 代理商列表
          items:
            $ref: '#/components/schemas/psp_com_internal_agent_app.AgentResponse'
          type: array
        limit:
          description: 每页数量
          example: 20
          type: integer
        offset:
          description: 偏移量
          example: 0
          type: integer
        total:
          description: 总记录数
          example: 100
          type: integer
      type: object
    psp_com_internal_agent_app.ListMerchantIDsResponse:
      properties:
        limit:
          description: 每页数量
          example: 20
          type: integer
        merchant_ids:
          description: 商户ID列表
          items:
            type: string
          type: array
        offset:
          description: 偏移量
          example: 0
          type: integer
        total:
          description: 总记录数
          example: 50
          type: integer
      type: object
    psp_com_internal_agent_app.UpdateAgentRequest:
      properties:
        agent_name:
          type: string
        business_name:
          type: string
        commission_rate:
          type: string
        commission_type:
          enum:
            - percentage
            - fixed
          type: string
        contact_email:
          type: string
        contact_name:
          type: string
        contact_phone:
          type: string
        max_commission:
          type: integer
        min_commission:
          type: integer
        settlement_cycle:
          type: string
        settlement_day:
          type: integer
      type: object
    psp_com_internal_agent_app.UpdateAgentUserRequest:
      properties:
        name:
          type: string
        role_id:
          type: string
      type: object
    psp_com_internal_agent_app.UpdateCommissionRuleRequest:
      properties:
        amount_max:
          type: integer
        amount_min:
          type: integer
        commission_rate:
          type: string
        commission_type:
          enum:
            - percentage
            - fixed
          type: string
        max_commission:
          type: integer
        min_commission:
          type: integer
        payment_method:
          type: string
        priority:
          type: integer
        rule_name:
          type: string
      required:
        - commission_rate
        - commission_type
        - rule_name
      type: object
    psp_com_internal_analytics_app.AcknowledgeAnomalyRequest:
      properties:
        acknowledged_by:
          description: 确认人
          type: string
        note:
          description: 备注
          type: string
      required:
        - acknowledged_by
      type: object
    psp_com_internal_analytics_app.AmountDistributionDTO:
      properties:
        max:
          example: '10000.00'
          type: string
        mean:
          example: '1500.00'
          type: string
        min:
          example: '100.00'
          type: string
        percentiles:
          additionalProperties:
            type: string
          description: 'p10, p25, p50, p75, p90, p99'
          type: object
        std_dev:
          example: '500.00'
          type: string
      type: object
    psp_com_internal_analytics_app.AnomalyDetectRequest:
      properties:
        dimensions:
          description: 'merchant_id, channel_id, payment_method, etc.'
          items:
            type: string
          minItems: 1
          type: array
        merchant_id:
          description: 可选，指定商户
          type: string
        metrics:
          description: 'transaction_count, amount, success_rate, etc.'
          items:
            type: string
          minItems: 1
          type: array
        sensitivity:
          description: 'low, medium, high'
          enum:
            - low
            - medium
            - high
          type: string
      required:
        - dimensions
        - metrics
        - sensitivity
      type: object
    psp_com_internal_analytics_app.AnomalyDetectResponse:
      properties:
        anomalies:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.AnomalyRecordDTO
          type: array
        merchant_id:
          example: '100'
          type: string
        tenant_id:
          example: '1'
          type: string
        timestamp:
          example: 1703001600000
          type: integer
        total:
          example: 5
          type: integer
      type: object
    psp_com_internal_analytics_app.AnomalyRecordDTO:
      properties:
        acknowledged_at:
          example: 1703005200000
          type: integer
        acknowledged_by:
          example: admin@example.com
          type: string
        actual_value:
          example: '85.50'
          type: string
        detected_at:
          example: 1703001600000
          type: integer
        deviation:
          example: 2.5
          type: number
        dimension:
          example: channel_id
          type: string
        dimension_value:
          example: '123'
          type: string
        expected_value:
          example: '95.00'
          type: string
        id:
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        merchant_id:
          example: '100'
          type: string
        metric:
          example: success_rate
          type: string
        resolution:
          type: string
        resolved_at:
          type: integer
        resolved_by:
          type: string
        status:
          example: detected
          type: string
        tenant_id:
          example: '1'
          type: string
      type: object
    psp_com_internal_analytics_app.AnomalySummaryDTO:
      description: 异常订单摘要统计
      properties:
        anomaly_rate:
          description: 异常率（相对于总失败数）
          example: 5
          type: number
        total_amount_cents:
          example: 500000
          type: integer
        total_anomalies:
          example: 50
          type: integer
      type: object
    psp_com_internal_analytics_app.AnomalyTypeStatDTO:
      description: 按异常类型分组的统计数据
      properties:
        amount_cents:
          example: 200000
          type: integer
        anomaly_type:
          example: timeout
          type: string
        count:
          example: 20
          type: integer
        percentage:
          description: 占比百分比
          example: 40
          type: number
      type: object
    psp_com_internal_analytics_app.AsyncExportTaskResponse:
      properties:
        completed_at:
          type: string
        created_at:
          type: string
        error_message:
          type: string
        estimated_time_remaining:
          description: 估算信息
          type: integer
        expires_at:
          type: string
        file_size_bytes:
          type: integer
        file_url:
          description: 结果信息
          type: string
        format:
          type: string
        progress:
          description: 0-100
          type: integer
        report_type:
          type: string
        started_at:
          type: string
        status:
          type: string
        task_id:
          type: string
        total_records:
          type: integer
        updated_at:
          type: string
      type: object
    psp_com_internal_analytics_app.AsyncExportTaskStatsResponse:
      properties:
        canceled_count:
          description: 'Issue #1633: 取消任务计数'
          type: integer
        completed_count:
          type: integer
        expired_count:
          type: integer
        failed_count:
          type: integer
        pending_count:
          type: integer
        processing_count:
          type: integer
      type: object
    psp_com_internal_analytics_app.BehaviorPatternDTO:
      properties:
        avg_amount_per_day:
          example: '50000.00'
          type: string
        avg_transactions_per_day:
          example: 150.5
          type: number
        peak_day_of_week:
          description: '0=Sunday, 6=Saturday'
          example: 2
          type: integer
        peak_hour:
          example: 14
          type: integer
        preferred_channels:
          example:
            - '1'
            - '2'
            - '3'
          items:
            type: string
          type: array
        preferred_payment_methods:
          example:
            - pix
            - card
          items:
            type: string
          type: array
      type: object
    psp_com_internal_analytics_app.BehaviorProfileRequest:
      properties:
        merchant_id:
          description: 商户 ID
          minLength: 1
          type: string
        profile_type:
          description: 'transaction, payment, refund'
          enum:
            - transaction
            - payment
            - refund
          type: string
      required:
        - merchant_id
        - profile_type
      type: object
    psp_com_internal_analytics_app.BehaviorProfileResponse:
      properties:
        amount_distribution:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_app.AmountDistributionDTO
        channel_distribution:
          additionalProperties:
            format: float64
            type: number
          description: channel -> percentage
          type: object
        created_at:
          example: 1703001600000
          type: integer
        id:
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        merchant_id:
          example: '100'
          type: string
        pattern:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_app.BehaviorPatternDTO
        profile_type:
          example: transaction
          type: string
        tenant_id:
          example: '1'
          type: string
        time_distributions:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_app.TimeDistributionsDTO
        updated_at:
          example: 1703001600000
          type: integer
      type: object
    psp_com_internal_analytics_app.ChangesDTO:
      properties:
        amount_change:
          type: number
        fee_change:
          type: number
        success_rate_change:
          description: 绝对值变化
          type: number
        transaction_count_change:
          description: 百分比
          type: number
      type: object
    psp_com_internal_analytics_app.ChannelStatDTO:
      description: 支付通道统计数据
      properties:
        avg_processing_ms:
          example: 250.5
          type: number
        channel_code:
          example: bradesco
          type: string
        channel_id:
          example: 00000000-0000-0000-0000-000000000001
          type: string
        failed_count:
          example: 20
          type: integer
        success_count:
          example: 480
          type: integer
        success_rate:
          example: 96
          type: number
        total_amount_cents:
          example: 5000000
          type: integer
        transaction_count:
          example: 500
          type: integer
      type: object
    psp_com_internal_analytics_app.ComparisonResponse:
      description: 对比报告响应
      properties:
        changes:
          $ref: '#/components/schemas/psp_com_internal_analytics_app.ChangesDTO'
        compare_period:
          $ref: '#/components/schemas/psp_com_internal_analytics_app.PeriodStatsDTO'
        current_period:
          $ref: '#/components/schemas/psp_com_internal_analytics_app.PeriodStatsDTO'
        merchant_id:
          type: string
        tenant_id:
          type: string
      type: object
    psp_com_internal_analytics_app.CreateAsyncExportRequest:
      properties:
        account_ids:
          items:
            type: string
          type: array
        account_types:
          items:
            type: string
          type: array
        agent_l1_ids:
          items:
            type: string
          type: array
        agent_l2_ids:
          items:
            type: string
          type: array
        channel_ids:
          items:
            type: string
          type: array
        columns:
          description: 指定列（可选）
          items:
            type: string
          type: array
        currencies:
          items:
            type: string
          type: array
        end_time:
          description: Unix 毫秒
          type: integer
        entry_types:
          items:
            type: string
          type: array
        format:
          description: 'csv, xlsx, json'
          type: string
        merchant_id:
          type: string
        merchant_ids:
          items:
            type: string
          type: array
        payment_methods:
          items:
            type: string
          type: array
        refund_types:
          items:
            type: string
          type: array
        report_type:
          description: 导出配置
          type: string
        start_time:
          description: Unix 毫秒
          type: integer
        tenant_id:
          type: string
        transaction_types:
          description: 可选过滤条件
          items:
            type: string
          type: array
        webhook_url:
          description: Webhook 配置
          type: string
      required:
        - end_time
        - format
        - report_type
        - start_time
      type: object
    psp_com_internal_analytics_app.CreateAsyncExportResponse:
      properties:
        created_at:
          type: string
        expires_at:
          type: string
        message:
          type: string
        status:
          type: string
        task_id:
          type: string
      type: object
    psp_com_internal_analytics_app.CurrencyDistributionResponse:
      description: 币种分布统计响应
      properties:
        currencies:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.CurrencyStatDTO
          type: array
        time_range:
          $ref: '#/components/schemas/psp_com_internal_analytics_app.TimeRangeDTO'
      type: object
    psp_com_internal_analytics_app.CurrencyStatDTO:
      description: 单个币种的统计数据
      properties:
        currency:
          example: BRL
          type: string
        percentage:
          description: 占比百分比
          example: 50
          type: number
        success_count:
          example: 480
          type: integer
        success_rate:
          example: 96
          type: number
        total_amount_cents:
          example: 5000000
          type: integer
        transaction_count:
          example: 500
          type: integer
      type: object
    psp_com_internal_analytics_app.DashboardResponse:
      description: 仪表盘数据响应
      properties:
        channel_distribution:
          description: 分布数据
          items:
            $ref: '#/components/schemas/psp_com_internal_analytics_app.ChannelStatDTO'
          type: array
        merchant_id:
          example: 00000000-0000-0000-0000-000000000100
          type: string
        overview:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_analytics_app.TransactionOverviewDTO
          description: 交易概览
        payment_method_distribution:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.PaymentMethodStatDTO
          type: array
        refund_overview:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_analytics_app.RefundOverviewDTO
          description: 退款概览
        tenant_id:
          example: 00000000-0000-0000-0000-000000000001
          type: string
        time_range:
          $ref: '#/components/schemas/psp_com_internal_analytics_app.TimeRangeDTO'
        transaction_trend:
          description: 趋势数据
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.TransactionStatDTO
          type: array
      type: object
    psp_com_internal_analytics_app.DownloadInfoResponse:
      properties:
        expires_at:
          type: string
        file_size_bytes:
          type: integer
        file_url:
          type: string
        format:
          type: string
        task_id:
          type: string
        total_records:
          type: integer
      type: object
    psp_com_internal_analytics_app.ExportReportRequest:
      properties:
        account_ids:
          items:
            type: string
          type: array
        account_types:
          items:
            type: string
          type: array
        agent_l1_ids:
          items:
            type: string
          type: array
        agent_l2_ids:
          items:
            type: string
          type: array
        channel_ids:
          items:
            type: string
          type: array
        columns:
          description: 指定导出的列
          items:
            type: string
          type: array
        currencies:
          items:
            type: string
          type: array
        end_time:
          type: integer
        entry_types:
          items:
            type: string
          type: array
        format:
          default: csv
          description: 'csv, xlsx, json'
          type: string
        merchant_id:
          type: string
        merchant_ids:
          items:
            type: string
          type: array
        payment_methods:
          items:
            type: string
          type: array
        refund_types:
          items:
            type: string
          type: array
        report_type:
          description: 'transaction, refund, ledger, merchant'
          type: string
        start_time:
          type: integer
        transaction_types:
          items:
            type: string
          type: array
      type: object
    psp_com_internal_analytics_app.ListAnomaliesResponse:
      properties:
        anomalies:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.AnomalyRecordDTO
          type: array
        limit:
          example: 20
          type: integer
        offset:
          example: 0
          type: integer
        total:
          example: 100
          type: integer
      type: object
    psp_com_internal_analytics_app.ListAsyncExportTasksResponse:
      properties:
        tasks:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.AsyncExportTaskResponse
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_analytics_app.MerchantStatDTO:
      properties:
        merchant_id:
          type: string
        merchant_name:
          type: string
        success_count:
          type: integer
        success_rate:
          type: number
        total_amount_cents:
          type: integer
        total_fee_cents:
          type: integer
        transaction_count:
          type: integer
      type: object
    psp_com_internal_analytics_app.PaymentMethodPendingDTO:
      description: 按支付方式分组的待处理订单统计
      properties:
        amount_cents:
          example: 500000
          type: integer
        count:
          example: 50
          type: integer
        payment_method:
          example: pix
          type: string
      type: object
    psp_com_internal_analytics_app.PaymentMethodStatDTO:
      description: 支付方式统计数据
      properties:
        payment_method:
          example: pix
          type: string
        success_rate:
          example: 97.5
          type: number
        total_amount_cents:
          example: 3000000
          type: integer
        transaction_count:
          example: 300
          type: integer
      type: object
    psp_com_internal_analytics_app.PendingOrdersDTO:
      description: 待处理订单统计信息
      properties:
        by_payment_method:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.PaymentMethodPendingDTO
          type: array
        oldest_pending_seconds:
          description: 最早的待处理订单等待时间（秒）
          example: 3600
          type: integer
        total_amount_cents:
          example: 1000000
          type: integer
        total_count:
          example: 100
          type: integer
      type: object
    psp_com_internal_analytics_app.PeriodChangesDTO:
      description: 当前时段相对于上一时段的变化率
      properties:
        amount_change:
          description: 百分比变化
          example: 15.2
          type: number
        success_rate_change:
          description: 绝对值变化
          example: 2
          type: number
        transaction_count_change:
          description: 百分比变化
          example: 10.5
          type: number
      type: object
    psp_com_internal_analytics_app.PeriodCompareDTO:
      description: 单个时段的统计数据
      properties:
        end_time:
          description: Unix 毫秒
          example: 1703088000000
          type: integer
        failed_count:
          example: 50
          type: integer
        start_time:
          description: Unix 毫秒
          example: 1703001600000
          type: integer
        success_count:
          example: 950
          type: integer
        success_rate:
          example: 95
          type: number
        total_amount_cents:
          example: 10000000
          type: integer
        total_fee_cents:
          example: 100000
          type: integer
        transaction_count:
          example: 1000
          type: integer
      type: object
    psp_com_internal_analytics_app.PeriodStatsDTO:
      properties:
        end_time:
          type: integer
        start_time:
          type: integer
        success_count:
          type: integer
        success_rate:
          type: number
        total_amount_cents:
          type: integer
        total_count:
          type: integer
        total_fee_cents:
          type: integer
      type: object
    psp_com_internal_analytics_app.PeriodSummaryResponse:
      description: 时段摘要响应，包含当前时段、上一时段统计及变化率
      properties:
        changes:
          $ref: '#/components/schemas/psp_com_internal_analytics_app.PeriodChangesDTO'
        current:
          $ref: '#/components/schemas/psp_com_internal_analytics_app.PeriodCompareDTO'
        period:
          allOf:
            - $ref: '#/components/schemas/psp_com_internal_analytics_app.PeriodType'
          example: today
        previous:
          $ref: '#/components/schemas/psp_com_internal_analytics_app.PeriodCompareDTO'
      type: object
    psp_com_internal_analytics_app.PeriodType:
      enum:
        - today
        - this_week
        - this_month
      type: string
      x-enum-varnames:
        - PeriodToday
        - PeriodThisWeek
        - PeriodThisMonth
    psp_com_internal_analytics_app.PredictionConfigDTO:
      properties:
        alpha:
          example: 0.3
          type: number
        beta:
          example: 0.1
          type: number
        gamma:
          example: 0.2
          type: number
        granularity:
          example: day
          type: string
        horizon:
          example: 7
          type: integer
        season_length:
          example: 7
          type: integer
      type: object
    psp_com_internal_analytics_app.PredictionPointDTO:
      properties:
        confidence:
          description: 置信度 (0-1)
          example: 0.95
          type: number
        lower_bound:
          description: 置信区间下限
          example: '1100.00'
          type: string
        predicted_value:
          description: 预测值
          example: '1234.56'
          type: string
        timestamp:
          description: Unix 毫秒时间戳
          example: 1703001600000
          type: integer
        upper_bound:
          description: 置信区间上限
          example: '1400.00'
          type: string
      type: object
    psp_com_internal_analytics_app.RealTimeMetricsEnhancedResponse:
      description: 增强版实时指标响应，包含待处理订单统计
      properties:
        hour:
          description: 最近1小时
          properties:
            amount_cents:
              type: integer
            failed:
              type: integer
            success:
              type: integer
            success_rate:
              type: number
            transactions:
              type: integer
          type: object
        minute:
          description: 最近1分钟
          properties:
            amount_cents:
              type: integer
            failed:
              type: integer
            success:
              type: integer
            success_rate:
              type: number
            transactions:
              type: integer
          type: object
        pending:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_analytics_app.PendingOrdersDTO
          description: 待处理订单（新增）
        tenant_id:
          type: string
        timestamp:
          type: integer
      type: object
    psp_com_internal_analytics_app.RealTimeMetricsResponse:
      properties:
        hour:
          description: 最近1小时
          properties:
            amount_cents:
              type: integer
            failed:
              type: integer
            success:
              type: integer
            success_rate:
              type: number
            transactions:
              type: integer
          type: object
        minute:
          description: 最近1分钟
          properties:
            amount_cents:
              type: integer
            failed:
              type: integer
            success:
              type: integer
            success_rate:
              type: number
            transactions:
              type: integer
          type: object
        tenant_id:
          type: string
        timestamp:
          type: integer
      type: object
    psp_com_internal_analytics_app.RefundOverviewDTO:
      description: 退款概览统计
      properties:
        total_amount_cents:
          example: 50000
          type: integer
        total_refunds:
          example: 10
          type: integer
      type: object
    psp_com_internal_analytics_app.SuccessRateTrendPoint:
      description: 单个时间点的成功率数据
      properties:
        failed_count:
          example: 4
          type: integer
        success_count:
          example: 96
          type: integer
        success_rate:
          example: 95.5
          type: number
        timestamp:
          example: 1703001600000
          type: integer
        transaction_count:
          example: 100
          type: integer
      type: object
    psp_com_internal_analytics_app.SuccessRateTrendResponse:
      description: 成功率趋势响应
      properties:
        granularity:
          example: hour
          type: string
        group_by:
          example: channel
          type: string
        series:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.SuccessRateTrendSeries
          type: array
        time_range:
          $ref: '#/components/schemas/psp_com_internal_analytics_app.TimeRangeDTO'
      type: object
    psp_com_internal_analytics_app.SuccessRateTrendSeries:
      description: 单个分组的成功率趋势数据
      properties:
        id:
          description: 分组 ID（仅 channel 分组时有值）
          type: string
        name:
          description: 分组名称（channel_code 或 payment_method）
          example: pix
          type: string
        points:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.SuccessRateTrendPoint
          type: array
      type: object
    psp_com_internal_analytics_app.TimeDistributionsDTO:
      properties:
        daily_distribution:
          additionalProperties:
            format: float64
            type: number
          description: 每天占比
          type: object
        hourly_distribution:
          additionalProperties:
            format: float64
            type: number
          description: 每小时占比
          type: object
        monthly_trend:
          description: 月环比趋势 (%)
          example: 10.2
          type: number
        weekly_trend:
          description: 周环比趋势 (%)
          example: 5.5
          type: number
      type: object
    psp_com_internal_analytics_app.TimeRangeDTO:
      description: 时间范围信息
      properties:
        end_time:
          example: 1703088000000
          type: integer
        granularity:
          example: hour
          type: string
        start_time:
          example: 1703001600000
          type: integer
      type: object
    psp_com_internal_analytics_app.TopMerchantsResponse:
      properties:
        merchants:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.MerchantStatDTO
          type: array
        tenant_id:
          type: string
        time_range:
          $ref: '#/components/schemas/psp_com_internal_analytics_app.TimeRangeDTO'
      type: object
    psp_com_internal_analytics_app.TransactionAnomaliesResponse:
      description: 异常订单统计响应
      properties:
        by_type:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.AnomalyTypeStatDTO
          type: array
        summary:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_app.AnomalySummaryDTO
        time_range:
          $ref: '#/components/schemas/psp_com_internal_analytics_app.TimeRangeDTO'
      type: object
    psp_com_internal_analytics_app.TransactionOverviewDTO:
      description: 交易概览统计
      properties:
        failed_transactions:
          example: 50
          type: integer
        success_rate:
          description: 百分比，如 98.5
          example: 95
          type: number
        success_transactions:
          example: 950
          type: integer
        total_amount_cents:
          example: 10000000
          type: integer
        total_fee_cents:
          example: 100000
          type: integer
        total_transactions:
          example: 1000
          type: integer
      type: object
    psp_com_internal_analytics_app.TransactionStatDTO:
      description: 交易统计数据点
      properties:
        failed_count:
          example: 5
          type: integer
        period:
          description: Unix 毫秒时间戳
          example: 1703001600000
          type: integer
        success_count:
          example: 95
          type: integer
        success_rate:
          example: 95
          type: number
        total_amount_cents:
          example: 1000000
          type: integer
        total_count:
          example: 100
          type: integer
        total_fee_cents:
          example: 10000
          type: integer
      type: object
    psp_com_internal_analytics_app.TrendPredictRequest:
      properties:
        alpha:
          description: Holt-Winters 参数 (0-1)，默认 0.3
          maximum: 1
          minimum: 0
          type: number
        beta:
          description: Holt-Winters 参数 (0-1)，默认 0.1
          maximum: 1
          minimum: 0
          type: number
        gamma:
          description: Holt-Winters 参数 (0-1)，默认 0.2
          maximum: 1
          minimum: 0
          type: number
        granularity:
          description: 'minute, hour, day, week, month'
          enum:
            - minute
            - hour
            - day
            - week
            - month
          type: string
        horizon:
          description: 预测步数
          maximum: 90
          minimum: 1
          type: integer
        merchant_id:
          description: 可选，指定商户
          type: string
        metric_type:
          description: 'transaction_count, amount, success_rate, etc.'
          enum:
            - transaction_count
            - amount
            - success_rate
            - average_amount
            - refund_rate
            - fee_amount
          type: string
        season_length:
          description: 季节周期长度，默认 7
          minimum: 1
          type: integer
      required:
        - granularity
        - horizon
        - metric_type
      type: object
    psp_com_internal_analytics_app.TrendPredictionResponse:
      properties:
        config:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_app.PredictionConfigDTO
        created_at:
          example: 1703001600000
          type: integer
        id:
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        merchant_id:
          example: '100'
          type: string
        metric_type:
          example: transaction_count
          type: string
        predictions:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_app.PredictionPointDTO
          type: array
        tenant_id:
          example: '1'
          type: string
        updated_at:
          example: 1703001600000
          type: integer
      type: object
    psp_com_internal_analytics_customreport_app.AvailableFieldsResponse:
      properties:
        data_source:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_enums.DataSourceType
        fields:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_customreport_app.FieldInfo
          type: array
      type: object
    psp_com_internal_analytics_customreport_app.ExecutionDTO:
      properties:
        completed_at:
          type: string
        created_at:
          type: string
        error_message:
          type: string
        expires_at:
          type: string
        file_size_bytes:
          type: integer
        file_url:
          type: string
        id:
          type: string
        notification_sent_at:
          type: string
        notification_status:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_enums.NotificationStatus
        progress:
          type: integer
        started_at:
          type: string
        status:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_enums.ExecutionStatus
        template_id:
          type: string
        tenant_id:
          type: string
        total_records:
          type: integer
        trigger_type:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_enums.TriggerType
        triggered_by:
          type: string
        version:
          type: integer
      type: object
    psp_com_internal_analytics_customreport_app.FieldInfo:
      properties:
        description:
          type: string
        label:
          type: string
        name:
          type: string
        type:
          type: string
      type: object
    psp_com_internal_analytics_customreport_app.TemplateDTO:
      properties:
        created_at:
          type: string
        created_by:
          type: string
        data_source:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_enums.DataSourceType
        default_filters:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_aggregates.FilterConfig
        description:
          type: string
        id:
          type: string
        name:
          type: string
        output_format:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_enums.OutputFormat
        schedule_config:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_aggregates.ScheduleConfig
        selected_fields:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_customreport_domain_aggregates.FieldConfig
          type: array
        status:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_enums.TemplateStatus
        subscriptions:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_customreport_domain_aggregates.SubscriptionConfig
          type: array
        tenant_id:
          type: string
        updated_at:
          type: string
        version:
          type: integer
      type: object
    psp_com_internal_analytics_customreport_domain_aggregates.FieldConfig:
      properties:
        label:
          type: string
        name:
          type: string
        order:
          type: integer
      type: object
    psp_com_internal_analytics_customreport_domain_aggregates.FilterConfig:
      properties:
        currencies:
          items:
            type: string
          type: array
        merchantIDs:
          items:
            type: string
          type: array
        timeRange:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_aggregates.TimeRange
      type: object
    psp_com_internal_analytics_customreport_domain_aggregates.ScheduleConfig:
      properties:
        dayOfMonth:
          type: integer
        dayOfWeek:
          type: integer
        enabled:
          type: boolean
        executeAt:
          description: '"09:00"'
          type: string
        frequency:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_enums.Frequency
        timezone:
          description: '"Asia/Shanghai"'
          type: string
      type: object
    psp_com_internal_analytics_customreport_domain_aggregates.SubscriptionConfig:
      properties:
        destination:
          type: string
        enabled:
          type: boolean
        id:
          type: string
        type:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_customreport_domain_enums.SubscriptionType
      type: object
    psp_com_internal_analytics_customreport_domain_aggregates.TimeRange:
      properties:
        endDate:
          type: string
        startDate:
          type: string
      type: object
    psp_com_internal_analytics_customreport_domain_enums.DataSourceType:
      enum:
        - transaction
        - refund
        - ledger
        - merchant
        - settlement
        - channel
        - risk
      type: string
      x-enum-varnames:
        - DataSourceTransaction
        - DataSourceRefund
        - DataSourceLedger
        - DataSourceMerchant
        - DataSourceSettlement
        - DataSourceChannel
        - DataSourceRisk
    psp_com_internal_analytics_customreport_domain_enums.ExecutionStatus:
      enum:
        - pending
        - processing
        - completed
        - failed
      type: string
      x-enum-varnames:
        - ExecutionStatusPending
        - ExecutionStatusProcessing
        - ExecutionStatusCompleted
        - ExecutionStatusFailed
    psp_com_internal_analytics_customreport_domain_enums.Frequency:
      enum:
        - daily
        - weekly
        - monthly
      type: string
      x-enum-varnames:
        - FrequencyDaily
        - FrequencyWeekly
        - FrequencyMonthly
    psp_com_internal_analytics_customreport_domain_enums.NotificationStatus:
      enum:
        - pending
        - sent
        - failed
      type: string
      x-enum-varnames:
        - NotificationStatusPending
        - NotificationStatusSent
        - NotificationStatusFailed
    psp_com_internal_analytics_customreport_domain_enums.OutputFormat:
      enum:
        - csv
        - xlsx
        - json
      type: string
      x-enum-varnames:
        - OutputFormatCSV
        - OutputFormatXLSX
        - OutputFormatJSON
    psp_com_internal_analytics_customreport_domain_enums.SubscriptionType:
      enum:
        - email
        - webhook
      type: string
      x-enum-varnames:
        - SubscriptionTypeEmail
        - SubscriptionTypeWebhook
    psp_com_internal_analytics_customreport_domain_enums.TemplateStatus:
      enum:
        - draft
        - active
        - paused
        - archived
      type: string
      x-enum-varnames:
        - TemplateStatusDraft
        - TemplateStatusActive
        - TemplateStatusPaused
        - TemplateStatusArchived
    psp_com_internal_analytics_customreport_domain_enums.TriggerType:
      enum:
        - manual
        - scheduled
      type: string
      x-enum-varnames:
        - TriggerTypeManual
        - TriggerTypeScheduled
    psp_com_internal_analytics_userbehavior_app.ActiveUser:
      properties:
        lastActiveTime:
          type: string
        loginCount:
          format: int64
          type: integer
        operationCount:
          format: int64
          type: integer
        sessionDuration:
          description: 秒为单位
          format: int64
          type: integer
        userID:
          type: string
        userType:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_userbehavior_domain_enums.UserType
        username:
          type: string
      type: object
    psp_com_internal_analytics_userbehavior_app.ActiveUsersResult:
      properties:
        limit:
          format: int32
          type: integer
        offset:
          format: int32
          type: integer
        total:
          format: int64
          type: integer
        users:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_userbehavior_app.ActiveUser
          type: array
      type: object
    psp_com_internal_analytics_userbehavior_app.AnomaliesResult:
      properties:
        anomalies:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_userbehavior_app.Anomaly
          type: array
        limit:
          format: int32
          type: integer
        offset:
          format: int32
          type: integer
        severityBreakdown:
          additionalProperties:
            type: integer
          type: object
        total:
          format: int64
          type: integer
      type: object
    psp_com_internal_analytics_userbehavior_app.Anomaly:
      properties:
        anomalyType:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_userbehavior_domain_enums.AnomalyType
        description:
          type: string
        detectedAt:
          type: string
        id:
          type: string
        resolved:
          type: boolean
        severity:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_userbehavior_domain_enums.Severity
        userID:
          type: string
        userType:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_userbehavior_domain_enums.UserType
        username:
          type: string
      type: object
    psp_com_internal_analytics_userbehavior_app.BehaviorSummary:
      properties:
        activeUsers:
          format: int64
          type: integer
        anomaliesCount:
          format: int64
          type: integer
        avgSessionTime:
          description: 秒为单位
          format: int64
          type: integer
        newUsers:
          format: int64
          type: integer
        topFeatures:
          items:
            type: string
          type: array
        totalLogins:
          format: int64
          type: integer
        totalOperations:
          format: int64
          type: integer
        totalUsers:
          format: int64
          type: integer
        userTypeBreakdown:
          additionalProperties:
            type: integer
          type: object
      type: object
    psp_com_internal_analytics_userbehavior_app.FeatureUsage:
      properties:
        avgUsagePerUser:
          format: float64
          type: number
        featureName:
          type: string
        trend:
          description: 增长/下降百分比
          format: float64
          type: number
        uniqueUsers:
          format: int64
          type: integer
        usageCount:
          format: int64
          type: integer
      type: object
    psp_com_internal_analytics_userbehavior_app.FeatureUsageResult:
      properties:
        features:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_userbehavior_app.FeatureUsage
          type: array
        leastUsedFeature:
          type: string
        mostUsedFeature:
          type: string
        totalFeatures:
          type: integer
      type: object
    psp_com_internal_analytics_userbehavior_app.LoginAnalysis:
      properties:
        averageLoginTime:
          description: 毫秒
          format: int64
          type: integer
        failedLogins:
          format: int64
          type: integer
        loginByDevice:
          additionalProperties:
            type: integer
          type: object
        loginByLocation:
          additionalProperties:
            type: integer
          type: object
        loginTrends:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_userbehavior_app.TimeSeriesPoint
          type: array
        peakLoginHour:
          type: integer
        successRate:
          format: float64
          type: number
        successfulLogins:
          format: int64
          type: integer
        totalLogins:
          format: int64
          type: integer
        uniqueUsersLogged:
          format: int64
          type: integer
      type: object
    psp_com_internal_analytics_userbehavior_app.LoginRecord:
      properties:
        device:
          type: string
        ip:
          type: string
        location:
          type: string
        success:
          type: boolean
        time:
          type: string
      type: object
    psp_com_internal_analytics_userbehavior_app.OperationAnalysis:
      properties:
        avgOperationsPerUser:
          format: float64
          type: number
        operationTrends:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_userbehavior_app.TimeSeriesPoint
          type: array
        operationsByType:
          additionalProperties:
            type: integer
          type: object
        topOperations:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_userbehavior_app.OperationStat
          type: array
        totalOperations:
          format: int64
          type: integer
        uniqueOperators:
          format: int64
          type: integer
      type: object
    psp_com_internal_analytics_userbehavior_app.OperationRecord:
      properties:
        operationType:
          type: string
        resourceID:
          type: string
        success:
          type: boolean
        time:
          type: string
      type: object
    psp_com_internal_analytics_userbehavior_app.OperationStat:
      properties:
        count:
          format: int64
          type: integer
        name:
          type: string
        percentage:
          format: float64
          type: number
      type: object
    psp_com_internal_analytics_userbehavior_app.TimeSeriesPoint:
      properties:
        time:
          type: string
        value:
          format: int64
          type: integer
      type: object
    psp_com_internal_analytics_userbehavior_app.UserDetailResult:
      properties:
        anomalies:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_userbehavior_app.Anomaly
          type: array
        avgSessionTime:
          description: 秒为单位
          format: int64
          type: integer
        createdAt:
          type: string
        email:
          type: string
        lastLoginAt:
          type: string
        loginHistory:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_userbehavior_app.LoginRecord
          type: array
        operationHistory:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_analytics_userbehavior_app.OperationRecord
          type: array
        totalLogins:
          format: int64
          type: integer
        totalOperations:
          format: int64
          type: integer
        userID:
          type: string
        userType:
          $ref: >-
            #/components/schemas/psp_com_internal_analytics_userbehavior_domain_enums.UserType
        username:
          type: string
      type: object
    psp_com_internal_analytics_userbehavior_domain_enums.AnomalyType:
      enum:
        - unusual_login_time
        - multiple_failed_logins
        - unusual_location
        - high_frequency_operations
        - suspicious_data_access
        - permission_escalation
      type: string
      x-enum-varnames:
        - AnomalyTypeUnusualLoginTime
        - AnomalyTypeMultipleFailedLogins
        - AnomalyTypeUnusualLocation
        - AnomalyTypeHighFrequencyOperations
        - AnomalyTypeSuspiciousDataAccess
        - AnomalyTypePermissionEscalation
    psp_com_internal_analytics_userbehavior_domain_enums.Severity:
      enum:
        - low
        - medium
        - high
        - critical
      type: string
      x-enum-varnames:
        - SeverityLow
        - SeverityMedium
        - SeverityHigh
        - SeverityCritical
    psp_com_internal_analytics_userbehavior_domain_enums.UserType:
      enum:
        - merchant
        - admin
        - agent
        - system
      type: string
      x-enum-varnames:
        - UserTypeMerchant
        - UserTypeAdmin
        - UserTypeAgent
        - UserTypeSystem
    psp_com_internal_canary_app.HealthCheckResponse:
      properties:
        checked_at:
          type: string
        metrics:
          $ref: '#/components/schemas/app.HealthMetricsResponse'
        release_id:
          type: string
        status:
          description: 'healthy, degraded, unhealthy, unknown'
          type: string
        thresholds:
          $ref: '#/components/schemas/app.ThresholdsResponse'
        violation:
          type: string
      type: object
    psp_com_internal_channel_app.AddRoutingRuleRequest:
      properties:
        channel_id:
          type: string
        conditions:
          additionalProperties: true
          description: 新增：条件配置
          type: object
        direction:
          enum:
            - payin
            - payout
          type: string
        priority:
          type: integer
        weight:
          maximum: 100
          minimum: 0
          type: integer
      required:
        - channel_id
        - direction
      type: object
    psp_com_internal_channel_app.AuthConfigDTO:
      properties:
        app_id:
          description: 共用模式的凭证
          type: string
        app_key:
          description: 响应时脱敏
          type: string
        certificates:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_channel_app.CertificatesDTO
          description: 证书
        custom:
          additionalProperties: {}
          description: 自定义模式（任意结构）
          type: object
        payin:
          allOf:
            - $ref: '#/components/schemas/psp_com_internal_channel_app.CredentialsDTO'
          description: 独立模式的凭证
        payout:
          $ref: '#/components/schemas/psp_com_internal_channel_app.CredentialsDTO'
        secret_id:
          type: string
        secret_key:
          description: 响应时脱敏
          type: string
      type: object
    psp_com_internal_channel_app.CertificatesDTO:
      properties:
        client_private_key:
          description: 响应时脱敏
          type: string
        client_public_key:
          type: string
        server_public_key:
          type: string
      type: object
    psp_com_internal_channel_app.ChannelResponse:
      properties:
        channel_code:
          type: string
        channel_name:
          type: string
        country_code:
          type: string
        created_at:
          description: 审计时间
          type: string
        currency:
          type: string
        description:
          type: string
        environment:
          type: string
        id:
          type: string
        is_test_mode:
          type: boolean
        metadata:
          additionalProperties: true
          description: 元数据
          type: object
        payment_method:
          type: string
        provider_code:
          type: string
        provider_id:
          type: string
        provider_name:
          description: Provider 信息（便于前端展示）
          type: string
        status:
          description: 状态和模式
          type: string
        supports_payin:
          description: 方向支持
          type: boolean
        supports_payout:
          type: boolean
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_channel_app.ChannelVerifyRequest:
      properties:
        test_transaction:
          description: 执行测试交易
          type: boolean
        verify_credentials:
          description: 验证凭证
          type: boolean
        verify_health:
          description: 验证健康状态
          type: boolean
      type: object
    psp_com_internal_channel_app.ChannelVerifyResponse:
      properties:
        channel_code:
          type: string
        channel_id:
          type: string
        overall_status:
          allOf:
            - $ref: '#/components/schemas/psp_com_internal_channel_app.VerifyStatus'
          description: pass/fail/partial
        payment_method:
          type: string
        provider_type:
          type: string
        results:
          items:
            $ref: '#/components/schemas/psp_com_internal_channel_app.VerificationItem'
          type: array
        verified_at:
          type: string
      type: object
    psp_com_internal_channel_app.CommonConfigDTO:
      properties:
        api_base_url:
          type: string
        ip_whitelist:
          items:
            type: string
          type: array
        retry_max_attempts:
          type: integer
        timeout_seconds:
          type: integer
        webhook_url:
          type: string
      type: object
    psp_com_internal_channel_app.CreateChannelRequest:
      properties:
        channel_code:
          type: string
        channel_name:
          type: string
        country_code:
          type: string
        currency:
          type: string
        description:
          type: string
        environment:
          description: 'sandbox, staging, production'
          type: string
        is_test_mode:
          description: 模式和环境
          type: boolean
        payment_method:
          type: string
        provider_id:
          type: string
        supports_payin:
          description: 方向支持
          type: boolean
        supports_payout:
          type: boolean
      required:
        - channel_code
        - channel_name
        - country_code
        - currency
        - payment_method
        - provider_id
      type: object
    psp_com_internal_channel_app.CreateProviderRequest:
      properties:
        contact_email:
          type: string
        contact_phone:
          type: string
        provider_code:
          type: string
        provider_name:
          type: string
        provider_type:
          enum:
            - psp
            - bank
            - aggregator
            - gateway
          type: string
        support_url:
          type: string
        supported_countries:
          items:
            type: string
          type: array
        supported_currencies:
          items:
            type: string
          type: array
        supported_methods:
          items:
            type: string
          minItems: 1
          type: array
      required:
        - provider_code
        - provider_name
        - provider_type
        - supported_methods
      type: object
    psp_com_internal_channel_app.CreateRoutingStrategyRequest:
      properties:
        country_code:
          type: string
        currency:
          type: string
        max_amount:
          minimum: 0
          type: integer
        min_amount:
          minimum: 0
          type: integer
        payment_method:
          type: string
        priority:
          type: integer
        strategy_code:
          type: string
        strategy_name:
          type: string
        strategy_type:
          enum:
            - priority
            - weighted
            - smart
          type: string
      required:
        - country_code
        - currency
        - payment_method
        - strategy_code
        - strategy_name
        - strategy_type
      type: object
    psp_com_internal_channel_app.CredentialsDTO:
      properties:
        app_id:
          type: string
        app_key:
          description: 响应时脱敏
          type: string
        secret_id:
          type: string
        secret_key:
          description: 响应时脱敏
          type: string
      type: object
    psp_com_internal_channel_app.DirectionConfigDTO:
      properties:
        base_url:
          description: 可选：覆盖公共 base URL
          type: string
        enabled:
          type: boolean
        endpoints:
          additionalProperties:
            type: string
          type: object
        fail_fees:
          $ref: '#/components/schemas/psp_com_internal_channel_app.FeeConfigDTO'
        fees:
          $ref: '#/components/schemas/psp_com_internal_channel_app.FeeConfigDTO'
        limits:
          $ref: '#/components/schemas/psp_com_internal_channel_app.LimitConfigDTO'
        test:
          additionalProperties: {}
          type: object
      type: object
    psp_com_internal_channel_app.FeeConfigDTO:
      properties:
        fixed:
          description: 固定费用（分）
          type: integer
        minimum:
          description: 最低费用（分）
          type: integer
        ratio:
          description: 费率（万分比）
          type: integer
      type: object
    psp_com_internal_channel_app.GetChannelConfigResponse:
      properties:
        auth_config:
          $ref: '#/components/schemas/psp_com_internal_channel_app.AuthConfigDTO'
        auth_mode:
          type: string
        channel_id:
          type: string
        common_config:
          $ref: '#/components/schemas/psp_com_internal_channel_app.CommonConfigDTO'
        config_version:
          type: integer
        id:
          type: string
        payin_config:
          $ref: '#/components/schemas/psp_com_internal_channel_app.DirectionConfigDTO'
        payout_config:
          $ref: '#/components/schemas/psp_com_internal_channel_app.DirectionConfigDTO'
        updated_at:
          type: string
      type: object
    psp_com_internal_channel_app.HealthCheckResultDTO:
      properties:
        channel_code:
          type: string
        channel_id:
          type: string
        checked_at:
          type: string
        error_message:
          type: string
        health_status:
          type: string
        is_healthy:
          type: boolean
        provider_type:
          type: string
        response_time_ms:
          type: integer
      type: object
    psp_com_internal_channel_app.LimitConfigDTO:
      properties:
        daily_limit:
          type: integer
        max_amount:
          type: integer
        min_amount:
          type: integer
      type: object
    psp_com_internal_channel_app.ListRoutingStrategiesResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        strategies:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_channel_app.RoutingStrategyResponse
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_channel_app.ProviderResponse:
      properties:
        contact_email:
          type: string
        contact_phone:
          type: string
        created_at:
          type: string
        id:
          type: string
        metadata:
          additionalProperties: true
          type: object
        provider_code:
          type: string
        provider_name:
          type: string
        provider_type:
          type: string
        status:
          type: string
        support_url:
          type: string
        supported_countries:
          items:
            type: string
          type: array
        supported_currencies:
          items:
            type: string
          type: array
        supported_methods:
          items:
            type: string
          type: array
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_channel_app.RoutingRuleResponse:
      properties:
        channel_id:
          type: string
        conditions:
          additionalProperties: true
          type: object
        created_at:
          type: string
        direction:
          description: 新增：payin | payout
          type: string
        id:
          type: string
        is_active:
          type: boolean
        priority:
          type: integer
        strategy_id:
          type: string
        updated_at:
          type: string
        weight:
          type: integer
      type: object
    psp_com_internal_channel_app.RoutingStrategyResponse:
      properties:
        country_code:
          type: string
        created_at:
          type: string
        currency:
          type: string
        id:
          type: string
        is_active:
          type: boolean
        max_amount:
          type: integer
        metadata:
          additionalProperties: true
          type: object
        min_amount:
          type: integer
        payment_method:
          type: string
        priority:
          type: integer
        rules:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_channel_app.RoutingRuleResponse
          type: array
        strategy_code:
          type: string
        strategy_name:
          type: string
        strategy_type:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        valid_from:
          type: string
        valid_to:
          type: string
      type: object
    psp_com_internal_channel_app.TestTransactionRequest:
      properties:
        amount:
          description: 交易金额（最小单位）
          minimum: 1
          type: integer
        currency:
          description: '货币代码 (BRL, MXN, INR, USD)'
          type: string
        description:
          description: 交易描述
          maxLength: 255
          type: string
      required:
        - amount
        - currency
      type: object
    psp_com_internal_channel_app.TestTransactionResponse:
      properties:
        amount:
          type: integer
        authorization_url:
          description: 3DS 授权 URL
          type: string
        channel_id:
          type: string
        created_at:
          type: string
        currency:
          type: string
        expires_at:
          description: 过期时间
          type: string
        provider_ref:
          type: string
        qr_code:
          description: PIX/SPEI QR Code
          type: string
        status:
          type: string
        transaction_id:
          type: string
        vpa:
          description: UPI VPA
          type: string
      type: object
    psp_com_internal_channel_app.UpdateChannelConfigRequest:
      properties:
        auth_config:
          $ref: '#/components/schemas/psp_com_internal_channel_app.AuthConfigDTO'
        auth_mode:
          type: string
        common_config:
          $ref: '#/components/schemas/psp_com_internal_channel_app.CommonConfigDTO'
        payin_config:
          $ref: '#/components/schemas/psp_com_internal_channel_app.DirectionConfigDTO'
        payout_config:
          $ref: '#/components/schemas/psp_com_internal_channel_app.DirectionConfigDTO'
      type: object
    psp_com_internal_channel_app.UpdateChannelRequest:
      properties:
        channel_name:
          type: string
        description:
          type: string
        is_test_mode:
          type: boolean
        status:
          description: 状态和模式
          enum:
            - active
            - inactive
            - maintenance
          type: string
        supports_payin:
          description: 方向支持更新
          type: boolean
        supports_payout:
          type: boolean
      type: object
    psp_com_internal_channel_app.UpdateProviderRequest:
      properties:
        contact_email:
          type: string
        contact_phone:
          type: string
        provider_name:
          type: string
        status:
          enum:
            - active
            - inactive
            - maintenance
          type: string
        support_url:
          type: string
        supported_countries:
          items:
            type: string
          type: array
        supported_currencies:
          items:
            type: string
          type: array
        supported_methods:
          items:
            type: string
          type: array
      type: object
    psp_com_internal_channel_app.UpdateRoutingRuleRequest:
      properties:
        channel_id:
          type: string
        conditions:
          additionalProperties: true
          type: object
        direction:
          enum:
            - payin
            - payout
          type: string
        priority:
          type: integer
        weight:
          maximum: 100
          minimum: 0
          type: integer
      type: object
    psp_com_internal_channel_app.UpdateRoutingStrategyRequest:
      properties:
        country_code:
          type: string
        currency:
          type: string
        is_active:
          type: boolean
        max_amount:
          minimum: 0
          type: integer
        min_amount:
          minimum: 0
          type: integer
        payment_method:
          type: string
        priority:
          type: integer
        strategy_name:
          type: string
      type: object
    psp_com_internal_channel_app.UpdateRuleStatusRequest:
      properties:
        is_active:
          type: boolean
      type: object
    psp_com_internal_channel_app.VerificationItem:
      properties:
        check_name:
          description: 'health_check, credentials, test_transaction, webhook_config'
          type: string
        checked_at:
          description: 检查时间
          type: string
        details:
          description: 详细信息
        duration_ms:
          description: 耗时（毫秒）
          type: integer
        error:
          description: 错误信息
          type: string
        message:
          description: 验证消息
          type: string
        status:
          allOf:
            - $ref: '#/components/schemas/psp_com_internal_channel_app.VerifyStatus'
          description: pass/fail/skip
      type: object
    psp_com_internal_channel_app.VerificationReportResponse:
      properties:
        channel_results:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_channel_app.ChannelVerifyResponse
          type: array
        generated_at:
          type: string
        summary:
          $ref: >-
            #/components/schemas/psp_com_internal_channel_app.VerificationSummary
        tenant_id:
          type: string
      type: object
    psp_com_internal_channel_app.VerificationSummary:
      properties:
        failed_count:
          type: integer
        partial_count:
          type: integer
        passed_count:
          type: integer
        skipped_count:
          type: integer
        total_channels:
          type: integer
      type: object
    psp_com_internal_channel_app.VerifyStatus:
      enum:
        - pass
        - fail
        - partial
        - skip
      type: string
      x-enum-varnames:
        - VerifyStatusPass
        - VerifyStatusFail
        - VerifyStatusPartial
        - VerifyStatusSkip
    psp_com_internal_email_app.ConfigStatus:
      properties:
        default_sender_email:
          type: string
        default_sender_name:
          type: string
        enabled:
          type: boolean
        max_retries:
          type: integer
        provider:
          type: string
        rate_limit_per_minute:
          type: integer
        send_timeout:
          $ref: '#/components/schemas/time.Duration'
        templates:
          additionalProperties:
            $ref: '#/components/schemas/psp_com_internal_email_app.TemplateSnapshot'
          type: object
      type: object
    psp_com_internal_email_app.CreateEmailConfigRequest:
      description: 创建租户邮件服务器配置
      properties:
        api_endpoint:
          description: API 配置
          type: string
        api_key:
          description: 敏感，存入 Vault
          type: string
        api_region:
          description: provider_type=ses 时必填
          type: string
        api_secret:
          description: 敏感，存入 Vault (SES)
          type: string
        default_sender_email:
          description: 默认发件人邮箱
          type: string
        default_sender_name:
          description: 默认发件人名称
          maxLength: 200
          type: string
        idempotency_key:
          description: 幂等键，用于防止重复创建 (FR-017)
          maxLength: 100
          type: string
        max_retries:
          description: '最大重试次数 (默认: 3, 范围: 0-10)'
          maximum: 10
          minimum: 0
          type: integer
        provider_type:
          description: '提供商类型: smtp, sendgrid, ses'
          enum:
            - smtp
            - sendgrid
            - ses
          type: string
        rate_limit_per_minute:
          description: '每分钟发送限制 (默认: 60)'
          minimum: 1
          type: integer
        send_timeout_seconds:
          description: '发送超时（秒）(默认: 30, 范围: 1-120)'
          maximum: 120
          minimum: 1
          type: integer
        smtp_host:
          description: SMTP 配置 (provider_type=smtp 时必填)
          type: string
        smtp_password:
          description: 敏感，存入 Vault
          type: string
        smtp_port:
          maximum: 65535
          minimum: 1
          type: integer
        smtp_use_tls:
          type: boolean
        smtp_username:
          type: string
      required:
        - default_sender_email
        - default_sender_name
        - idempotency_key
        - provider_type
      type: object
    psp_com_internal_email_app.EmailConfigResponse:
      description: 邮件配置详情（凭证脱敏）
      properties:
        api_endpoint:
          description: API
          type: string
        api_region:
          type: string
        created_at:
          type: string
        default_sender_email:
          type: string
        default_sender_name:
          type: string
        enabled:
          type: boolean
        has_api_key:
          type: boolean
        has_api_secret:
          type: boolean
        has_smtp_password:
          description: 凭证状态（脱敏）
          type: boolean
        id:
          type: string
        max_retries:
          type: integer
        provider_type:
          type: string
        rate_limit_per_minute:
          type: integer
        send_timeout_seconds:
          type: integer
        smtp_host:
          description: SMTP (非敏感)
          type: string
        smtp_port:
          type: integer
        smtp_use_tls:
          type: boolean
        smtp_username:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        version:
          description: 审计
          type: integer
      type: object
    psp_com_internal_email_app.ListRecordsResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        records:
          items:
            $ref: '#/components/schemas/psp_com_internal_email_app.RecordResponse'
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_email_app.QueuedEmailResponse:
      description: 邮件队列记录详情
      properties:
        attempt_count:
          type: integer
        created_at:
          type: string
        from_address:
          type: string
        id:
          type: string
        last_error:
          type: string
        max_attempts:
          type: integer
        next_retry_at:
          type: string
        sent_at:
          type: string
        status:
          type: string
        subject:
          type: string
        template:
          type: string
        tenant_id:
          type: string
        to_address:
          type: string
      type: object
    psp_com_internal_email_app.RecordResponse:
      properties:
        email:
          type: string
        error:
          type: string
        id:
          type: string
        message_id:
          type: string
        sent_at:
          type: string
        status:
          type: string
        subject:
          type: string
        template:
          type: string
        tenant_id:
          type: string
      type: object
    psp_com_internal_email_app.TemplateSnapshot:
      properties:
        locale:
          type: string
        name:
          type: string
        subject:
          type: string
      type: object
    psp_com_internal_email_app.TestEmailConfigRequest:
      description: 发送测试邮件验证配置是否正确
      properties:
        to_email:
          description: 测试邮件收件人
          type: string
      required:
        - to_email
      type: object
    psp_com_internal_email_app.TestEmailConfigResponse:
      description: 测试邮件发送结果
      properties:
        error:
          description: 错误信息（失败时）
          type: string
        message_id:
          description: 提供商返回的消息 ID
          type: string
        success:
          description: 是否发送成功
          type: boolean
      type: object
    psp_com_internal_email_app.UpdateEmailConfigRequest:
      description: 更新租户邮件服务器配置
      properties:
        api_endpoint:
          description: API 配置
          type: string
        api_region:
          type: string
        default_sender_email:
          description: 默认发件人邮箱
          type: string
        default_sender_name:
          description: 默认发件人名称
          maxLength: 200
          type: string
        enabled:
          description: 是否启用
          type: boolean
        idempotency_key:
          description: 幂等键，用于防止重复更新 (FR-017)
          maxLength: 100
          type: string
        max_retries:
          description: 最大重试次数
          maximum: 10
          minimum: 0
          type: integer
        rate_limit_per_minute:
          description: 每分钟发送限制
          minimum: 1
          type: integer
        send_timeout_seconds:
          description: 发送超时（秒）
          maximum: 120
          minimum: 1
          type: integer
        smtp_host:
          description: SMTP 配置
          type: string
        smtp_port:
          maximum: 65535
          minimum: 1
          type: integer
        smtp_use_tls:
          type: boolean
        smtp_username:
          type: string
        version:
          description: 乐观锁版本号（必填，用于并发控制）
          minimum: 1
          type: integer
      required:
        - idempotency_key
        - version
      type: object
    psp_com_internal_email_app.UpdateEmailSecretsRequest:
      description: 更新邮件服务的敏感凭证（密码、API Key），存储在 Vault
      properties:
        api_key:
          description: SendGrid/SES API Key
          type: string
        api_secret:
          description: AWS SES Secret Access Key
          type: string
        idempotency_key:
          description: 幂等键，用于防止重复更新凭证 (FR-017)
          maxLength: 100
          type: string
        smtp_password:
          description: SMTP 密码
          type: string
      required:
        - idempotency_key
      type: object
    psp_com_internal_kyb_app.CreateRuleRequest:
      properties:
        action:
          type: string
        applies_to:
          type: string
        description:
          type: string
        priority:
          type: integer
        risk_score:
          maximum: 100
          minimum: 0
          type: integer
        rule_code:
          maxLength: 50
          minLength: 1
          type: string
        rule_config:
          items:
            type: integer
          type: array
        rule_name:
          maxLength: 200
          minLength: 1
          type: string
        rule_type:
          type: string
      required:
        - action
        - rule_code
        - rule_config
        - rule_name
        - rule_type
      type: object
    psp_com_internal_kyb_app.EvaluateKYBResponse:
      properties:
        decision:
          type: string
        decision_reason:
          type: string
        execution_time_ms:
          type: integer
        reviewed_at:
          type: string
        total_risk_score:
          type: integer
        triggered_rules:
          items:
            $ref: '#/components/schemas/psp_com_internal_kyb_app.TriggeredRuleDTO'
          type: array
      type: object
    psp_com_internal_kyb_app.ListRulesResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        rules:
          items:
            $ref: '#/components/schemas/psp_com_internal_kyb_app.RuleResponse'
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_kyb_app.RuleResponse:
      properties:
        action:
          type: string
        applies_to:
          type: string
        created_at:
          type: string
        description:
          type: string
        id:
          type: string
        is_active:
          type: boolean
        priority:
          type: integer
        risk_score:
          type: integer
        rule_code:
          type: string
        rule_config:
          items:
            type: integer
          type: array
        rule_name:
          type: string
        rule_type:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_kyb_app.TriggeredRuleDTO:
      properties:
        action:
          type: string
        details:
          additionalProperties: true
          type: object
        match_reason:
          type: string
        matched:
          type: boolean
        risk_score:
          type: integer
        rule_code:
          type: string
        rule_id:
          type: string
        rule_name:
          type: string
        rule_type:
          type: string
      type: object
    psp_com_internal_kyb_app.UpdateRuleRequest:
      properties:
        action:
          type: string
        applies_to:
          type: string
        description:
          type: string
        is_active:
          type: boolean
        priority:
          type: integer
        risk_score:
          type: integer
        rule_config:
          items:
            type: integer
          type: array
        rule_name:
          type: string
      type: object
    psp_com_internal_ledger_app.AccountCommandResult:
      properties:
        account_code:
          type: string
        account_name:
          type: string
        currency:
          type: string
        id:
          type: string
        status:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_ledger_app.AccountDetailResult:
      properties:
        account_code:
          type: string
        account_name:
          type: string
        balance:
          $ref: >-
            #/components/schemas/psp_com_internal_ledger_domain_ports.BalanceInfo
        category:
          type: string
        created_at:
          type: string
        currency:
          type: string
        freeze_reason:
          description: 冻结原因（仅 frozen 状态有值）
          type: string
        id:
          type: string
        merchant_account_id:
          description: 商户账户 ID
          type: string
        merchant_name:
          description: 商户名称（关联查询）
          type: string
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_ledger_app.AccountWithBalance:
      properties:
        account_code:
          type: string
        account_name:
          type: string
        balance:
          $ref: >-
            #/components/schemas/psp_com_internal_ledger_domain_ports.BalanceInfo
        category:
          description: '账户类型: merchant_settlement, platform_revenue 等'
          type: string
        created_at:
          type: string
        currency:
          type: string
        freeze_reason:
          description: 冻结原因（仅 frozen 状态有值）
          type: string
        id:
          type: string
        merchant_account_id:
          description: 商户账户 ID
          type: string
        status:
          description: 'active, frozen, closed'
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_ledger_domain_ports.BalanceInfo:
      properties:
        balance:
          description: 账户余额（单一值）
          type: integer
      type: object
    psp_com_internal_merchant_app.APIKeyDailyStats:
      properties:
        date:
          description: 日期 (YYYY-MM-DD)
          type: string
        failed_calls:
          description: 失败次数
          type: integer
        success_rate:
          description: 成功率（百分比）
          type: string
        successful_calls:
          description: 成功次数
          type: integer
        total_calls:
          description: 总调用次数
          type: integer
      type: object
    psp_com_internal_merchant_app.APIKeyStatsSummary:
      properties:
        failed_calls:
          type: integer
        success_rate:
          type: string
        successful_calls:
          type: integer
        total_calls:
          type: integer
      type: object
    psp_com_internal_merchant_app.APIKeyUsageStatsResponse:
      properties:
        api_key_id:
          type: string
        daily_stats:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.APIKeyDailyStats
          type: array
        key_prefix:
          type: string
        key_type:
          type: string
        last_called_at:
          type: string
        last_called_ip:
          type: string
        status:
          type: string
        summary:
          $ref: >-
            #/components/schemas/psp_com_internal_merchant_app.APIKeyStatsSummary
      type: object
    psp_com_internal_merchant_app.AccountAPIKeysStatsResponse:
      properties:
        account_id:
          type: string
        active_keys:
          type: integer
        api_keys:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.APIKeyUsageStatsResponse
          type: array
        merchant_id:
          type: string
        summary:
          $ref: >-
            #/components/schemas/psp_com_internal_merchant_app.APIKeyStatsSummary
        total_keys:
          type: integer
      type: object
    psp_com_internal_merchant_app.AccountPricingResponse:
      properties:
        account_id:
          type: string
        account_number:
          type: string
        currency:
          type: string
        fees:
          items:
            $ref: '#/components/schemas/psp_com_internal_merchant_app.FeeResponse'
          type: array
        payment_method:
          type: string
      type: object
    psp_com_internal_merchant_app.ActionRequest:
      properties:
        action:
          description: 操作类型
          enum:
            - activate
            - suspend
            - approve
            - reject
            - reset
          example: activate
          type: string
        params:
          additionalProperties: {}
          description: 扩展参数（可选）
          type: object
        reason:
          description: 操作原因
          example: 审核通过
          maxLength: 500
          minLength: 1
          type: string
      required:
        - action
        - reason
      type: object
    psp_com_internal_merchant_app.ActionResponse:
      properties:
        action:
          description: 执行的操作
          example: activate
          type: string
        changed_at:
          description: 变更时间
          example: '2024-01-01T00:00:00Z'
          type: string
        new_status:
          description: 变更后状态
          example: active
          type: string
        old_status:
          description: 变更前状态
          example: pending
          type: string
        success:
          description: 操作是否成功
          example: true
          type: boolean
      type: object
    psp_com_internal_merchant_app.ActivateMerchantRequest:
      properties:
        reason:
          maxLength: 500
          minLength: 1
          type: string
      required:
        - reason
      type: object
    psp_com_internal_merchant_app.AdminAPIKeyActionRequest:
      properties:
        reason:
          maxLength: 500
          minLength: 1
          type: string
      required:
        - reason
      type: object
    psp_com_internal_merchant_app.AdminAPIKeyActionResponse:
      properties:
        api_key:
          $ref: >-
            #/components/schemas/psp_com_internal_merchant_app.AdminAPIKeyResponse
        new_status:
          type: string
        old_status:
          type: string
        success:
          type: boolean
      type: object
    psp_com_internal_merchant_app.AdminAPIKeyResponse:
      properties:
        account_id:
          type: string
        created_at:
          type: string
        description:
          type: string
        expires_at:
          type: string
        id:
          type: string
        is_active:
          type: boolean
        key_prefix:
          description: 密钥前缀（用于识别，不显示完整密钥）
          type: string
        key_type:
          description: sandbox / production
          type: string
        last_used_at:
          type: string
        last_used_ip:
          type: string
        merchant_id:
          type: string
        status:
          description: active / revoked / expired
          type: string
        tenant_id:
          type: string
      type: object
    psp_com_internal_merchant_app.ApproveMerchantRequest:
      properties:
        reason:
          maxLength: 500
          minLength: 1
          type: string
      required:
        - reason
      type: object
    psp_com_internal_merchant_app.ApproveWithdrawalRequest:
      properties:
        notes:
          example: manual review
          type: string
      type: object
    psp_com_internal_merchant_app.AssignRolesRequest:
      properties:
        roles:
          items:
            type: string
          minItems: 1
          type: array
      required:
        - roles
      type: object
    psp_com_internal_merchant_app.BatchActionRequest:
      properties:
        action:
          description: 操作类型(仅支持 activate/suspend)
          enum:
            - activate
            - suspend
          example: activate
          type: string
        ids:
          description: 资源 ID 列表(最多100个)
          example:
            - '["uuid1"'
            - ' "uuid2"]'
          items:
            type: string
          maxItems: 100
          minItems: 1
          type: array
        params:
          additionalProperties: {}
          description: 扩展参数（可选）
          type: object
        reason:
          description: 操作原因
          example: 批量激活
          maxLength: 500
          minLength: 1
          type: string
      required:
        - action
        - ids
        - reason
      type: object
    psp_com_internal_merchant_app.BatchActionResponse:
      properties:
        failure_count:
          description: 失败数量
          example: 2
          type: integer
        results:
          description: 单个结果列表
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.BatchActionResult
          type: array
        success_count:
          description: 成功数量
          example: 5
          type: integer
      type: object
    psp_com_internal_merchant_app.BatchActionResult:
      properties:
        error:
          description: 错误信息
          example: ''
          type: string
        id:
          description: 资源 ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        new_status:
          description: 变更后状态
          example: active
          type: string
        old_status:
          description: 变更前状态
          example: pending
          type: string
        success:
          description: 是否成功
          example: true
          type: boolean
      type: object
    psp_com_internal_merchant_app.BatchApproveRequest:
      properties:
        notes:
          type: string
        withdrawal_ids:
          items:
            type: string
          maxItems: 50
          minItems: 1
          type: array
      required:
        - withdrawal_ids
      type: object
    psp_com_internal_merchant_app.BatchApproveResponse:
      properties:
        failed_count:
          type: integer
        results:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.BatchApproveResult
          type: array
        success_count:
          type: integer
      type: object
    psp_com_internal_merchant_app.BatchApproveResult:
      properties:
        error:
          type: string
        success:
          type: boolean
        withdrawal_id:
          type: string
      type: object
    psp_com_internal_merchant_app.BatchMerchantStatusRequest:
      properties:
        merchant_ids:
          items:
            type: string
          minItems: 1
          type: array
        reason:
          maxLength: 500
          minLength: 1
          type: string
      required:
        - merchant_ids
        - reason
      type: object
    psp_com_internal_merchant_app.BatchMerchantStatusResponse:
      properties:
        failure_count:
          type: integer
        results:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.BatchMerchantStatusResult
          type: array
        success_count:
          type: integer
      type: object
    psp_com_internal_merchant_app.BatchMerchantStatusResult:
      properties:
        error:
          type: string
        merchant_id:
          type: string
        new_status:
          type: string
        old_status:
          type: string
        success:
          type: boolean
      type: object
    psp_com_internal_merchant_app.BusinessLicense:
      properties:
        expiry:
          description: 有效期
          type: string
        issuer:
          description: 颁发机构
          type: string
        number:
          description: 执照号码
          type: string
      type: object
    psp_com_internal_merchant_app.ChangePasswordRequest:
      properties:
        new_password:
          minLength: 8
          type: string
        old_password:
          type: string
      required:
        - new_password
        - old_password
      type: object
    psp_com_internal_merchant_app.ChangeStatusResponse:
      properties:
        audit_log:
          $ref: >-
            #/components/schemas/psp_com_internal_merchant_app.StatusAuditLogResponse
        new_status:
          type: string
        old_status:
          type: string
        success:
          type: boolean
      type: object
    psp_com_internal_merchant_app.CompanyInfo:
      properties:
        business_model:
          description: 商业模式
          type: string
        incorporation_country:
          description: 注册国家
          type: string
        incorporation_date:
          description: 成立日期
          type: string
        industry_description:
          description: 行业描述
          type: string
      type: object
    psp_com_internal_merchant_app.CreateIPWhitelistRequest:
      properties:
        description:
          description: Description 描述（可选）
          maxLength: 500
          type: string
        environment:
          description: Environment 环境：sandbox / staging / production
          enum:
            - sandbox
            - staging
            - production
          type: string
        ip_address:
          description: IPAddress IP 地址或 CIDR 格式（如：192.168.1.1 或 192.168.1.0/24）
          type: string
      required:
        - environment
        - ip_address
      type: object
    psp_com_internal_merchant_app.CreateMerchantAccountRequest:
      properties:
        currency:
          description: 货币代码
          example: BRL
          type: string
        metadata:
          additionalProperties: true
          description: 元数据
          type: object
        payment_method:
          description: 'Issue #401'
          enum:
            - pix
            - spei
            - credit_card
            - debit_card
            - bank_slip
            - wire
          example: pix
          type: string
      required:
        - currency
        - payment_method
      type: object
    psp_com_internal_merchant_app.CreateMerchantRequest:
      properties:
        address_line1:
          description: 地址行1
          example: Av. Paulista 1000
          maxLength: 255
          type: string
        address_line2:
          description: 地址行2
          example: Sala 100
          maxLength: 255
          type: string
        business_model:
          description: 商业模式
          example: B2C
          maxLength: 50
          type: string
        city:
          description: 城市
          example: São Paulo
          maxLength: 100
          type: string
        country_code:
          description: 地址信息
          example: BR
          type: string
        email:
          description: 联系信息
          example: contact@lojaexemplo.com.br
          maxLength: 200
          type: string
        industry:
          description: 行业
          example: retail
          maxLength: 50
          type: string
        legal_name:
          description: 法人名称
          example: Loja Exemplo Comércio LTDA
          maxLength: 200
          type: string
        mcc:
          description: 行业分类
          example: '5734'
          maxLength: 10
          type: string
        merchant_code:
          description: 基本信息
          example: MCH001
          maxLength: 50
          type: string
        merchant_name:
          description: 商户名称
          example: Loja Exemplo LTDA
          maxLength: 100
          type: string
        merchant_type:
          description: 商户类型
          enum:
            - individual
            - company
          example: company
          type: string
        metadata:
          additionalProperties: true
          description: |-
            元数据
            Issue #2986: 添加 metadata 验证器
          type: object
        other:
          description: 其他联系方式
          example: 'Line: lojaexemplo'
          maxLength: 255
          type: string
        phone:
          description: 电话
          example: '+5511999999999'
          maxLength: 50
          type: string
        postal_code:
          description: 邮编
          example: '01310000'
          maxLength: 20
          type: string
        state:
          description: 州/省
          example: SP
          maxLength: 50
          type: string
        tax_id:
          description: 税号（可选）
          example: '12345678000190'
          maxLength: 50
          type: string
        telegram:
          description: Telegram
          example: '@lojaexemplo'
          maxLength: 100
          type: string
        website:
          description: 网站
          example: 'https://www.lojaexemplo.com.br'
          maxLength: 500
          type: string
        whatsapp:
          description: WhatsApp
          example: '+5511999999999'
          maxLength: 50
          type: string
      required:
        - country_code
        - email
        - legal_name
        - merchant_code
        - merchant_name
        - merchant_type
      type: object
    psp_com_internal_merchant_app.CreateSecretRequest:
      properties:
        environment:
          enum:
            - sandbox
            - staging
            - production
          type: string
        expires_at:
          type: string
        key_algorithm:
          enum:
            - ed25519
            - rsa2048
            - rsa4096
          type: string
        key_name:
          maxLength: 100
          type: string
        public_key:
          type: string
      required:
        - key_name
        - public_key
      type: object
    psp_com_internal_merchant_app.CreateUserRequest:
      properties:
        email:
          type: string
        full_name:
          type: string
        password:
          minLength: 8
          type: string
        roles:
          items:
            type: string
          type: array
      required:
        - email
        - full_name
        - password
      type: object
    psp_com_internal_merchant_app.CurrencyBalance:
      properties:
        available_balance:
          description: 可用余额 = Settlement - Frozen
          example: 450000
          type: integer
        frozen_balance:
          description: 冻结余额（单位：分）
          example: 50000
          type: integer
        processing_balance:
          description: 处理中余额（单位：分）
          example: 100000
          type: integer
        settlement_balance:
          description: 已结算余额（单位：分）
          example: 500000
          type: integer
      type: object
    psp_com_internal_merchant_app.DefaultPricingResponse:
      properties:
        accumulation_period:
          type: string
        cost_rate:
          type: number
        created_at:
          type: string
        created_by:
          type: string
        effective_from:
          type: string
        effective_to:
          type: string
        fee_type:
          type: string
        fixed_fee:
          type: integer
        id:
          type: string
        max_fee:
          type: integer
        min_fee:
          type: integer
        payment_method:
          type: string
        percentage_rate:
          type: number
        tenant_id:
          type: string
        tiers:
          items:
            $ref: '#/components/schemas/psp_com_internal_merchant_app.FeeTierDTO'
          type: array
        transaction_type:
          type: string
        updated_at:
          type: string
        updated_by:
          type: string
      type: object
    psp_com_internal_merchant_app.EnableMFARequest:
      properties:
        secret:
          type: string
      required:
        - secret
      type: object
    psp_com_internal_merchant_app.EvaluateKYBRequest:
      properties:
        country_code:
          description: 国家代码（2位ISO代码）
          type: string
        industry_code:
          description: 行业代码
          type: string
        kyb_id:
          description: KYB 记录 ID
          type: string
        merchant_id:
          description: 商户 ID
          type: string
        merchant_type:
          description: '商户类型：individual, company'
          type: string
      required:
        - country_code
        - kyb_id
        - merchant_id
        - merchant_type
      type: object
    psp_com_internal_merchant_app.ExportMerchantsRequest:
      properties:
        columns:
          items:
            type: string
          type: array
        country_code:
          type: string
        end_date:
          type: string
        format:
          type: string
        keyword:
          type: string
        kyb_status:
          type: string
        risk_level:
          type: string
        start_date:
          type: string
        status:
          type: string
      type: object
    psp_com_internal_merchant_app.ExportMerchantsResponse:
      properties:
        created_at:
          type: string
        download_url:
          type: string
        expires_at:
          type: string
        message:
          type: string
        status:
          type: string
        task_id:
          type: string
        total_count:
          type: integer
      type: object
    psp_com_internal_merchant_app.FeeResponse:
      properties:
        account_id:
          type: string
        accumulation_period:
          type: string
        cost_rate:
          type: number
        created_at:
          type: string
        effective_from:
          type: string
        effective_to:
          type: string
        fee_type:
          type: string
        fixed_fee:
          type: integer
        id:
          type: string
        max_fee:
          type: integer
        min_fee:
          type: integer
        percentage_rate:
          type: number
        tenant_id:
          type: string
        tiers:
          items:
            $ref: '#/components/schemas/psp_com_internal_merchant_app.FeeTierDTO'
          type: array
        transaction_type:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_merchant_app.FeeTierDTO:
      properties:
        fixed_fee:
          description: 该档位的固定费用（分）
          minimum: 0
          type: integer
        max_accumulated_amount:
          description: 最大累计交易额（含），nil = 无上限
          minimum: 0
          type: integer
        max_fee:
          description: 最高费用（分）
          minimum: 0
          type: integer
        min_accumulated_amount:
          description: 最小累计交易额（含）
          minimum: 0
          type: integer
        min_fee:
          description: 最低费用（分）
          minimum: 0
          type: integer
        percentage_rate:
          description: 该档位的比例费率（0-1.0）
          type: number
      type: object
    psp_com_internal_merchant_app.IPWhitelistResponse:
      properties:
        created_at:
          type: string
        description:
          type: string
        environment:
          type: string
        id:
          type: string
        ip_address:
          type: string
        is_active:
          type: boolean
      type: object
    psp_com_internal_merchant_app.KYBDocument:
      properties:
        document_type:
          description: 文档类型
          type: string
        file_name:
          description: 文件名
          type: string
        file_url:
          description: 文件 URL（可选，敏感）
          type: string
        id:
          description: 文档 ID
          type: string
        status:
          description: '文档状态：pending, verified, rejected'
          type: string
        uploaded_at:
          description: 上传时间
          type: string
        verified_at:
          description: 验证时间
          type: string
      type: object
    psp_com_internal_merchant_app.LegalRepInfo:
      properties:
        id_expiry:
          description: 证件有效期
          type: string
        id_number:
          description: 证件号码
          type: string
        id_type:
          description: 证件类型
          type: string
        name:
          description: 姓名
          type: string
        nationality:
          description: 国籍
          type: string
        tax_id:
          description: 税号
          type: string
      type: object
    psp_com_internal_merchant_app.ListAdminAPIKeysResponse:
      properties:
        api_keys:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.AdminAPIKeyResponse
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_merchant_app.ListDefaultPricingResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        pricings:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.DefaultPricingResponse
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_merchant_app.ListIPWhitelistsResponse:
      properties:
        total:
          type: integer
        whitelists:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.IPWhitelistResponse
          type: array
      type: object
    psp_com_internal_merchant_app.ListMerchantAccountsAdminResponse:
      properties:
        accounts:
          description: 账户列表
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.MerchantAccountAdminResponse
          type: array
        limit:
          description: 每页数量
          example: 20
          type: integer
        offset:
          description: 偏移量
          example: 0
          type: integer
        total:
          description: 总记录数
          example: 100
          type: integer
      type: object
    psp_com_internal_merchant_app.ListMerchantAccountsResponse:
      properties:
        accounts:
          description: 账户列表
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.MerchantAccountResponse
          type: array
        total:
          description: 总记录数
          example: 5
          type: integer
      type: object
    psp_com_internal_merchant_app.ListMerchantUsersAdminResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
        users:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.MerchantUserAdminResponse
          type: array
      type: object
    psp_com_internal_merchant_app.ListMerchantsResponse:
      properties:
        limit:
          description: 每页数量
          example: 20
          type: integer
        merchants:
          description: 商户列表
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.MerchantResponse
          type: array
        offset:
          description: 偏移量
          example: 0
          type: integer
        total:
          description: 总记录数
          example: 100
          type: integer
      type: object
    psp_com_internal_merchant_app.ListOnboardingsResponse:
      properties:
        limit:
          description: 每页数量
          example: 20
          type: integer
        offset:
          description: 偏移量
          example: 0
          type: integer
        onboardings:
          description: 入驻申请列表
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.OnboardingResponse
          type: array
        total:
          description: 总记录数
          example: 100
          type: integer
      type: object
    psp_com_internal_merchant_app.ListSecretsResponse:
      properties:
        secrets:
          items:
            $ref: '#/components/schemas/psp_com_internal_merchant_app.SecretResponse'
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_merchant_app.ListUsersResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
        users:
          items:
            $ref: '#/components/schemas/psp_com_internal_merchant_app.UserResponse'
          type: array
      type: object
    psp_com_internal_merchant_app.ListWithdrawalsAdminResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
        withdrawals:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.WithdrawalAdminResponse
          type: array
      type: object
    psp_com_internal_merchant_app.MerchantAccountAdminResponse:
      properties:
        account_code:
          description: 账户编码
          example: ACC001
          type: string
        available_balance:
          description: 可用余额 = Settlement - Frozen
          example: 450000
          type: integer
        created_at:
          description: 创建时间
          example: '2024-01-01T00:00:00Z'
          type: string
        currency:
          description: 币种
          example: BRL
          type: string
        frozen_balance:
          description: 冻结余额（单位：分）
          example: 50000
          type: integer
        id:
          description: 账户 ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        is_default:
          description: 是否默认账户
          example: true
          type: boolean
        merchant_code:
          description: 商户编码
          example: M001
          type: string
        merchant_id:
          description: 商户 ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        merchant_name:
          description: 商户名称
          example: Test Merchant
          type: string
        payment_method:
          description: 支付方式
          example: pix
          type: string
        processing_balance:
          description: 余额信息（可选，仅在启用余额查询时填充）
          example: 100000
          type: integer
        settlement_balance:
          description: 已结算余额（单位：分）
          example: 500000
          type: integer
        status:
          description: 状态
          example: active
          type: string
        tenant_id:
          description: 租户 ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        updated_at:
          description: 更新时间
          example: '2024-01-01T00:00:00Z'
          type: string
      type: object
    psp_com_internal_merchant_app.MerchantAccountResponse:
      properties:
        account_number:
          description: 账户号码
          example: ACC001
          type: string
        created_at:
          description: 创建时间
          example: '2024-01-01T00:00:00Z'
          type: string
        currency:
          description: 货币代码
          example: BRL
          type: string
        id:
          description: 账户ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        merchant_id:
          description: 商户ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        metadata:
          additionalProperties: true
          description: 元数据
          type: object
        payment_method:
          description: 'Issue #401'
          example: pix
          type: string
        status:
          description: 状态
          example: active
          type: string
        tenant_id:
          description: 租户ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        updated_at:
          description: 更新时间
          example: '2024-01-01T00:00:00Z'
          type: string
      type: object
    psp_com_internal_merchant_app.MerchantBalanceSummary:
      additionalProperties:
        $ref: '#/components/schemas/psp_com_internal_merchant_app.CurrencyBalance'
      type: object
    psp_com_internal_merchant_app.MerchantDetailResponse:
      properties:
        accounts:
          description: 关联账户
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.MerchantAccountResponse
          type: array
        activated_at:
          description: 激活时间
          example: '2024-01-01T00:00:00Z'
          type: string
        address_line1:
          description: 地址行1
          example: Av. Paulista 1000
          type: string
        address_line2:
          description: 地址行2
          example: Sala 100
          type: string
        balances:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.MerchantBalanceSummary
          description: 余额汇总（按币种，可选）
        business_model:
          description: 商业模式
          example: B2C
          type: string
        city:
          description: 城市
          example: São Paulo
          type: string
        country_code:
          description: 国家代码
          example: BR
          type: string
        created_at:
          description: 创建时间
          example: '2024-01-01T00:00:00Z'
          type: string
        created_by:
          description: 'Issue #619: 创建人'
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        deleted_at:
          description: 删除时间
          example: '2024-01-01T00:00:00Z'
          type: string
        email:
          description: 邮箱
          example: contact@lojaexemplo.com.br
          type: string
        id:
          description: 商户ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        industry:
          description: 行业
          example: retail
          type: string
        kyb_status:
          description: KYB状态
          example: verified
          type: string
        legal_name:
          description: 法人名称
          example: Loja Exemplo Comércio LTDA
          type: string
        mcc:
          description: MCC代码
          example: '5734'
          type: string
        merchant_code:
          description: 商户代码
          example: MCH001
          type: string
        merchant_name:
          description: 商户名称
          example: Loja Exemplo LTDA
          type: string
        merchant_type:
          description: 商户类型
          example: company
          type: string
        metadata:
          additionalProperties: true
          description: 元数据
          type: object
        onboarding_id:
          description: 'Issue #619: 入网申请ID'
          example: 720e8400-e29b-41d4-a716-446655440001
          type: string
        other:
          description: 其他联系方式
          example: 'Line: lojaexemplo'
          type: string
        owner_user_id:
          description: 'Issue #333'
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        phone:
          description: 电话
          example: '+5511999999999'
          type: string
        postal_code:
          description: 邮编
          example: '01310000'
          type: string
        risk_level:
          description: 风险等级
          example: low
          type: string
        state:
          description: 州/省
          example: SP
          type: string
        status:
          description: 状态
          example: active
          type: string
        suspended_at:
          description: 暂停时间
          example: '2024-01-01T00:00:00Z'
          type: string
        tax_id:
          description: 'Issue #619: 税号'
          example: '12345678000190'
          type: string
        telegram:
          description: Telegram
          example: '@lojaexemplo'
          type: string
        tenant_id:
          description: 租户ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        total_accounts:
          description: 账户总数
          type: integer
        total_users:
          description: 用户总数
          type: integer
        updated_at:
          description: 更新时间
          example: '2024-01-01T00:00:00Z'
          type: string
        updated_by:
          description: 'Issue #619: 更新人'
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        users:
          description: 关联用户
          items:
            $ref: '#/components/schemas/psp_com_internal_merchant_app.UserResponse'
          type: array
        website:
          description: 网站
          example: 'https://www.lojaexemplo.com.br'
          type: string
        whatsapp:
          description: WhatsApp
          example: '+5511999999999'
          type: string
      type: object
    psp_com_internal_merchant_app.MerchantKYBResponse:
      properties:
        approved_at:
          description: 批准时间
          type: string
        business_license:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.BusinessLicense
          description: 营业执照
        company:
          allOf:
            - $ref: '#/components/schemas/psp_com_internal_merchant_app.CompanyInfo'
          description: 企业信息
        created_at:
          description: 时间戳
          type: string
        documents:
          description: 文档列表
          items:
            $ref: '#/components/schemas/psp_com_internal_merchant_app.KYBDocument'
          type: array
        id:
          description: 基本信息
          type: string
        legal_rep:
          allOf:
            - $ref: '#/components/schemas/psp_com_internal_merchant_app.LegalRepInfo'
          description: 法人代表信息
        merchant_id:
          description: 商户 ID
          type: string
        metadata:
          additionalProperties: true
          description: 元数据
          type: object
        registered_address:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.RegisteredAddress
          description: 注册地址
        rejected_at:
          description: 拒绝时间
          type: string
        review:
          allOf:
            - $ref: '#/components/schemas/psp_com_internal_merchant_app.ReviewInfo'
          description: 审核信息
        risk:
          allOf:
            - $ref: '#/components/schemas/psp_com_internal_merchant_app.RiskInfo'
          description: 风险信息
        status:
          description: 'KYB 状态: pending, submitted, in_review, verified, rejected, expired'
          type: string
        submitted_at:
          description: 提交时间
          type: string
        ubo_info:
          description: UBO 信息
          items:
            $ref: '#/components/schemas/psp_com_internal_merchant_app.UBOInfo'
          type: array
        updated_at:
          description: 更新时间
          type: string
      type: object
    psp_com_internal_merchant_app.MerchantKYBStats:
      properties:
        in_review:
          description: 审核中
          example: 5
          type: integer
        pending:
          description: 待审核
          example: 10
          type: integer
        rejected:
          description: 已拒绝
          example: 5
          type: integer
        verified:
          description: 已验证
          example: 100
          type: integer
      type: object
    psp_com_internal_merchant_app.MerchantPricingResponse:
      properties:
        accounts:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_merchant_app.AccountPricingResponse
          type: array
        merchant_code:
          type: string
        merchant_id:
          type: string
        merchant_name:
          type: string
      type: object
    psp_com_internal_merchant_app.MerchantResponse:
      properties:
        activated_at:
          description: 激活时间
          example: '2024-01-01T00:00:00Z'
          type: string
        address_line1:
          description: 地址行1
          example: Av. Paulista 1000
          type: string
        address_line2:
          description: 地址行2
          example: Sala 100
          type: string
        balances:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.MerchantBalanceSummary
          description: 余额汇总（按币种，可选）
        business_model:
          description: 商业模式
          example: B2C
          type: string
        city:
          description: 城市
          example: São Paulo
          type: string
        country_code:
          description: 国家代码
          example: BR
          type: string
        created_at:
          description: 创建时间
          example: '2024-01-01T00:00:00Z'
          type: string
        created_by:
          description: 'Issue #619: 创建人'
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        deleted_at:
          description: 删除时间
          example: '2024-01-01T00:00:00Z'
          type: string
        email:
          description: 邮箱
          example: contact@lojaexemplo.com.br
          type: string
        id:
          description: 商户ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        industry:
          description: 行业
          example: retail
          type: string
        kyb_status:
          description: KYB状态
          example: verified
          type: string
        legal_name:
          description: 法人名称
          example: Loja Exemplo Comércio LTDA
          type: string
        mcc:
          description: MCC代码
          example: '5734'
          type: string
        merchant_code:
          description: 商户代码
          example: MCH001
          type: string
        merchant_name:
          description: 商户名称
          example: Loja Exemplo LTDA
          type: string
        merchant_type:
          description: 商户类型
          example: company
          type: string
        metadata:
          additionalProperties: true
          description: 元数据
          type: object
        onboarding_id:
          description: 'Issue #619: 入网申请ID'
          example: 720e8400-e29b-41d4-a716-446655440001
          type: string
        other:
          description: 其他联系方式
          example: 'Line: lojaexemplo'
          type: string
        owner_user_id:
          description: 'Issue #333'
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        phone:
          description: 电话
          example: '+5511999999999'
          type: string
        postal_code:
          description: 邮编
          example: '01310000'
          type: string
        risk_level:
          description: 风险等级
          example: low
          type: string
        state:
          description: 州/省
          example: SP
          type: string
        status:
          description: 状态
          example: active
          type: string
        suspended_at:
          description: 暂停时间
          example: '2024-01-01T00:00:00Z'
          type: string
        tax_id:
          description: 'Issue #619: 税号'
          example: '12345678000190'
          type: string
        telegram:
          description: Telegram
          example: '@lojaexemplo'
          type: string
        tenant_id:
          description: 租户ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        updated_at:
          description: 更新时间
          example: '2024-01-01T00:00:00Z'
          type: string
        updated_by:
          description: 'Issue #619: 更新人'
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        website:
          description: 网站
          example: 'https://www.lojaexemplo.com.br'
          type: string
        whatsapp:
          description: WhatsApp
          example: '+5511999999999'
          type: string
      type: object
    psp_com_internal_merchant_app.MerchantStatsResponse:
      properties:
        kyb_stats:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.MerchantKYBStats
          description: 按 KYB 状态统计
        status_stats:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.MerchantStatusStats
          description: 按状态统计
        total:
          description: 总数统计
          example: 143
          type: integer
      type: object
    psp_com_internal_merchant_app.MerchantStatusStats:
      properties:
        active:
          description: 活跃
          example: 100
          type: integer
        closed:
          description: 已关闭
          example: 3
          type: integer
        pending:
          description: 待激活
          example: 10
          type: integer
        rejected:
          description: 已拒绝
          example: 2
          type: integer
        suspended:
          description: 已暂停
          example: 5
          type: integer
      type: object
    psp_com_internal_merchant_app.MerchantUserAdminResponse:
      properties:
        avatar_url:
          type: string
        created_at:
          type: string
        email:
          type: string
        full_name:
          type: string
        id:
          type: string
        last_login_at:
          type: string
        merchant_code:
          type: string
        merchant_id:
          type: string
        merchant_name:
          type: string
        mfa_setup_completed:
          type: boolean
        phone:
          type: string
        require_mfa:
          type: boolean
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        user_type:
          type: string
        username:
          type: string
      type: object
    psp_com_internal_merchant_app.OnboardingResponse:
      properties:
        application_id:
          description: 申请编号
          example: ONB-2024-00001
          type: string
        business_name:
          description: 商户名称
          example: Loja Exemplo LTDA
          type: string
        business_type:
          description: 商户类型
          example: company
          type: string
        contact_email:
          description: 联系邮箱
          example: contact@lojaexemplo.com.br
          type: string
        contact_other:
          description: 其他联系方式
          example: 'Line: lojaexemplo'
          type: string
        contact_phone:
          description: 联系电话
          example: '+5511999999999'
          type: string
        contact_telegram:
          description: Telegram
          example: '@lojaexemplo'
          type: string
        contact_whatsapp:
          description: WhatsApp
          example: '+5511999999999'
          type: string
        country_code:
          description: 国家代码
          example: BR
          type: string
        created_at:
          description: 时间戳
          example: '2024-01-01T00:00:00Z'
          type: string
        current_step:
          description: 当前步骤
          example: basic_info
          type: string
        documents:
          description: 文档和元数据
          items:
            type: integer
          type: array
        id:
          description: 入驻申请 ID
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        industry_code:
          description: 行业代码
          example: '5734'
          type: string
        legal_entity_name:
          description: 法人名称
          example: Loja Exemplo Comércio LTDA
          type: string
        metadata:
          description: 元数据
          items:
            type: integer
          type: array
        onboarding_status:
          description: 状态信息
          example: submitted
          type: string
        rejection_reason:
          description: 拒绝原因
          example: ''
          type: string
        review_notes:
          description: 审核备注
          example: 资料齐全，审核通过
          type: string
        reviewed_at:
          description: 审核时间
          example: '2024-01-02T00:00:00Z'
          type: string
        reviewed_by:
          description: 审核人
          example: admin@psp.com
          type: string
        submitted_at:
          description: 审核信息
          example: '2024-01-01T00:00:00Z'
          type: string
        tax_id:
          description: 税号
          example: '12345678000190'
          type: string
        tenant_id:
          description: 租户 ID
          example: 550e8400-e29b-41d4-a716-446655440001
          type: string
        updated_at:
          description: 更新时间
          example: '2024-01-01T00:00:00Z'
          type: string
        website:
          description: 网站
          example: 'https://www.lojaexemplo.com.br'
          type: string
      type: object
    psp_com_internal_merchant_app.OnboardingStatsResponse:
      properties:
        status_stats:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.OnboardingStatusStats
          description: 按状态统计
        step_stats:
          allOf:
            - $ref: >-
                #/components/schemas/psp_com_internal_merchant_app.OnboardingStepStats
          description: 按步骤统计
        total:
          description: 全部入驻申请数量
          example: 143
          type: integer
      type: object
    psp_com_internal_merchant_app.OnboardingStatusStats:
      properties:
        approved:
          description: 已批准
          example: 100
          type: integer
        archived:
          description: 已归档
          example: 3
          type: integer
        draft:
          description: 草稿
          example: 10
          type: integer
        rejected:
          description: 已拒绝
          example: 5
          type: integer
        submitted:
          description: 已提交
          example: 20
          type: integer
        under_review:
          description: 审核中
          example: 5
          type: integer
      type: object
    psp_com_internal_merchant_app.OnboardingStepStats:
      properties:
        api_setup:
          description: API 设置
          example: 2
          type: integer
        basic_info:
          description: 基本信息
          example: 10
          type: integer
        completed:
          description: 已完成
          example: 100
          type: integer
        documents_upload:
          description: 文档上传
          example: 8
          type: integer
        fee_config:
          description: 费率配置
          example: 3
          type: integer
        kyb_verification:
          description: 企业认证
          example: 5
          type: integer
      type: object
    psp_com_internal_merchant_app.PasskeyAuthenticationOptionsResponse:
      properties:
        allow_credentials:
          description: 允许的凭证列表
          items:
            additionalProperties: {}
            type: object
          type: array
        challenge:
          description: Base64 URL 编码的 challenge
          type: string
        raw_options:
          additionalProperties: true
          type: object
        rp_id:
          description: Relying Party ID
          type: string
        timeout:
          description: 超时时间（毫秒）
          type: integer
        user_verification:
          description: 用户验证要求
          type: string
      type: object
    psp_com_internal_merchant_app.PasskeyBindResponse:
      properties:
        created_at:
          type: string
        credential_id:
          description: Base64 URL 编码
          type: string
        device_name:
          type: string
        mfa_id:
          type: string
      type: object
    psp_com_internal_merchant_app.RegisteredAddress:
      properties:
        address_line1:
          description: 地址行1
          type: string
        address_line2:
          description: 地址行2
          type: string
        city:
          description: 城市
          type: string
        country_code:
          description: 国家代码
          type: string
        postal_code:
          description: 邮编
          type: string
        state:
          description: 州/省
          type: string
      type: object
    psp_com_internal_merchant_app.RejectMerchantRequest:
      properties:
        reason:
          maxLength: 500
          minLength: 1
          type: string
      required:
        - reason
      type: object
    psp_com_internal_merchant_app.RejectWithdrawalRequest:
      properties:
        reason:
          example: risk control
          type: string
      required:
        - reason
      type: object
    psp_com_internal_merchant_app.ResetMerchantRequest:
      properties:
        reason:
          maxLength: 500
          minLength: 1
          type: string
      required:
        - reason
      type: object
    psp_com_internal_merchant_app.ReviewInfo:
      properties:
        rejection_reason:
          description: 拒绝原因
          type: string
        review_notes:
          description: 审核备注
          type: string
        reviewed_at:
          description: 审核时间
          type: string
        reviewed_by:
          description: 审核人 ID
          type: string
      type: object
    psp_com_internal_merchant_app.RiskInfo:
      properties:
        external_risk_score:
          description: 外部风险评分
          type: integer
        risk_level:
          description: '风险等级: low, medium, high, critical'
          type: string
        risk_score:
          description: 综合风险分数 (0-100)
          type: integer
      type: object
    psp_com_internal_merchant_app.SecretResponse:
      properties:
        created_at:
          type: string
        environment:
          type: string
        expires_at:
          type: string
        id:
          type: string
        key_algorithm:
          type: string
        key_name:
          type: string
        merchant_id:
          type: string
        public_key:
          type: string
        status:
          type: string
      type: object
    psp_com_internal_merchant_app.SetDefaultPricingRequest:
      properties:
        accumulation_period:
          description: 累计周期
          type: string
        cost_rate:
          description: 成本费率（平台成本）
          type: number
        effective_from:
          type: string
        fee_type:
          enum:
            - simple
            - tiered
          type: string
        fixed_fee:
          description: 固定费用（分）
          type: integer
        max_fee:
          description: 最高费用（分）
          type: integer
        min_fee:
          description: 最低费用（分）
          type: integer
        payment_method:
          enum:
            - pix
            - spei
            - credit_card
            - debit_card
            - bank_slip
            - wire
          type: string
        percentage_rate:
          description: 简单费率配置（fee_type = simple）
          type: number
        tiers:
          description: 阶梯计费配置（fee_type = tiered）
          items:
            $ref: '#/components/schemas/psp_com_internal_merchant_app.FeeTierDTO'
          type: array
        transaction_type:
          enum:
            - invoice_paid
            - invoice_refund
            - transfer_success
            - transfer_failed
            - transfer_refund
          type: string
      required:
        - fee_type
        - payment_method
        - transaction_type
      type: object
    psp_com_internal_merchant_app.SetMerchantPricingRequest:
      properties:
        account_id:
          type: string
        accumulation_period:
          type: string
        cost_rate:
          description: 成本费率
          type: number
        effective_from:
          type: string
        effective_to:
          type: string
        fee_type:
          enum:
            - simple
            - tiered
          type: string
        fixed_fee:
          type: integer
        max_fee:
          type: integer
        min_fee:
          type: integer
        percentage_rate:
          description: 简单费率配置（fee_type = simple）
          type: number
        tiers:
          description: 阶梯计费配置（fee_type = tiered）
          items:
            $ref: '#/components/schemas/psp_com_internal_merchant_app.FeeTierDTO'
          type: array
        transaction_type:
          enum:
            - invoice_paid
            - invoice_refund
            - transfer_success
            - transfer_failed
            - transfer_refund
          type: string
      required:
        - account_id
        - effective_from
        - fee_type
        - transaction_type
      type: object
    psp_com_internal_merchant_app.StatusAuditLogResponse:
      properties:
        created_at:
          type: string
        id:
          type: string
        merchant_id:
          type: string
        new_status:
          type: string
        old_status:
          type: string
        operator_id:
          type: string
        reason:
          type: string
        tenant_id:
          type: string
      type: object
    psp_com_internal_merchant_app.SuspendMerchantRequest:
      properties:
        reason:
          maxLength: 500
          minLength: 1
          type: string
      required:
        - reason
      type: object
    psp_com_internal_merchant_app.UBOInfo:
      properties:
        is_pep:
          description: 是否政治敏感人物 (Politically Exposed Person)
          type: boolean
        name:
          description: 姓名
          type: string
        nationality:
          description: 国籍
          type: string
        ownership:
          description: 持股比例 (0-100)
          type: number
        tax_id:
          description: 税号
          type: string
      type: object
    psp_com_internal_merchant_app.UpdateIPWhitelistStatusRequest:
      properties:
        is_active:
          description: IsActive 是否启用
          type: boolean
        reason:
          description: Reason 变更原因（必填，用于审计）
          maxLength: 500
          minLength: 1
          type: string
      required:
        - reason
      type: object
    psp_com_internal_merchant_app.UpdateKYBStatusRequest:
      properties:
        kyb_status:
          description: KYB状态
          enum:
            - pending
            - in_review
            - verified
            - rejected
          example: verified
          type: string
      required:
        - kyb_status
      type: object
    psp_com_internal_merchant_app.UpdateMerchantRequest:
      properties:
        address_line1:
          description: 地址行1
          example: Av. Atlântica 100
          maxLength: 255
          type: string
        address_line2:
          description: 地址行2
          example: Cobertura 20
          maxLength: 255
          type: string
        business_model:
          description: 商业模式
          example: B2C
          maxLength: 50
          type: string
        city:
          description: 城市
          example: Rio de Janeiro
          maxLength: 100
          type: string
        country_code:
          description: 地址信息
          example: BR
          type: string
        email:
          description: 联系信息
          example: newemail@lojaexemplo.com.br
          maxLength: 200
          type: string
        industry:
          description: 行业
          example: retail
          maxLength: 50
          type: string
        mcc:
          description: 行业分类
          example: '5734'
          maxLength: 10
          type: string
        metadata:
          additionalProperties: true
          description: |-
            元数据
            Issue #2986: 添加 metadata 验证器
          type: object
        other:
          description: 其他联系方式
          example: 'Line: newexample'
          maxLength: 255
          type: string
        owner_user_id:
          description: '运营信息 (Issue #333)'
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        phone:
          description: 电话
          example: '+5511888888888'
          maxLength: 50
          type: string
        postal_code:
          description: 邮编
          example: '22040000'
          maxLength: 20
          type: string
        state:
          description: 州/省
          example: RJ
          maxLength: 50
          type: string
        telegram:
          description: Telegram
          example: '@newexample'
          maxLength: 100
          type: string
        website:
          description: 网站
          example: 'https://www.newsite.com.br'
          maxLength: 500
          type: string
        whatsapp:
          description: WhatsApp
          example: '+5511888888888'
          maxLength: 50
          type: string
      type: object
    psp_com_internal_merchant_app.UpdateOnboardingStatusRequest:
      properties:
        action:
          description: 操作类型
          enum:
            - start_review
            - approve
            - reject
            - archive
          example: approve
          type: string
        rejection_reason:
          description: 拒绝原因（reject 时必填）
          example: ''
          maxLength: 1000
          type: string
        review_notes:
          description: 审核备注
          example: 资料齐全，审核通过
          maxLength: 1000
          type: string
      required:
        - action
      type: object
    psp_com_internal_merchant_app.UpdateOnboardingStatusResponse:
      properties:
        action:
          description: 执行的操作
          example: approve
          type: string
        changed_at:
          description: 变更时间
          example: '2024-01-02T00:00:00Z'
          type: string
        new_status:
          description: 变更后状态
          example: approved
          type: string
        old_status:
          description: 变更前状态
          example: under_review
          type: string
        success:
          description: 是否成功
          example: true
          type: boolean
      type: object
    psp_com_internal_merchant_app.UpdateRiskLevelRequest:
      properties:
        risk_level:
          description: 风险等级
          enum:
            - low
            - medium
            - high
            - critical
          example: low
          type: string
      required:
        - risk_level
      type: object
    psp_com_internal_merchant_app.UpdateUserRequest:
      properties:
        email:
          type: string
        full_name:
          type: string
        phone:
          type: string
      type: object
    psp_com_internal_merchant_app.UserResponse:
      properties:
        created_at:
          type: string
        email:
          type: string
        full_name:
          type: string
        id:
          type: string
        last_login_at:
          type: string
        merchant_id:
          type: string
        mfa_enabled:
          type: boolean
        password_changed:
          type: string
        phone:
          type: string
        roles:
          items:
            type: string
          type: array
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_merchant_app.WithdrawalAdminResponse:
      properties:
        account_id:
          type: string
        amount:
          type: integer
        approved_at:
          type: string
        approved_by:
          type: string
        created_at:
          type: string
        currency:
          type: string
        id:
          type: string
        merchant_code:
          type: string
        merchant_id:
          type: string
        merchant_name:
          type: string
        reason:
          type: string
        reviewed_at:
          type: string
        reviewed_by:
          type: string
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_merchant_app.WithdrawalAdminSummary:
      properties:
        approved_amount:
          type: integer
        approved_count:
          type: integer
        canceled_amount:
          type: integer
        canceled_count:
          type: integer
        completed_amount:
          type: integer
        completed_count:
          type: integer
        failed_amount:
          type: integer
        failed_count:
          type: integer
        pending_amount:
          type: integer
        pending_count:
          type: integer
        processing_amount:
          type: integer
        processing_count:
          type: integer
        reviewed_amount:
          type: integer
        reviewed_count:
          type: integer
        total_amount:
          type: integer
        total_count:
          type: integer
      type: object
    psp_com_internal_monitor_app.AcknowledgeAlertRequest:
      properties:
        acknowledged_by:
          type: string
      required:
        - acknowledged_by
      type: object
    psp_com_internal_monitor_app.Alert:
      properties:
        acknowledged_at:
          type: string
        acknowledged_by:
          type: string
        created_at:
          type: string
        current_value:
          type: number
        description:
          type: string
        id:
          type: integer
        metadata:
          additionalProperties: true
          type: object
        resolution:
          description: 'Issue #2359: 解决说明'
          type: string
        resolved_at:
          type: string
        resolved_by:
          description: 'Issue #2359: 解决人'
          type: string
        severity:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.AlertSeverity'
        status:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.AlertStatus'
        tenant_id:
          type: string
        threshold:
          type: number
        title:
          type: string
        type:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.AlertType'
      type: object
    psp_com_internal_monitor_app.AlertRuleResponse:
      properties:
        condition:
          type: string
        cooldown_seconds:
          type: integer
        created_at:
          type: string
        enabled:
          type: boolean
        id:
          type: string
        metric:
          type: string
        name:
          type: string
        notify_channels:
          items:
            $ref: '#/components/schemas/psp_com_internal_monitor_app.NotifyChannelDTO'
          type: array
        severity:
          type: string
        tenant_id:
          type: string
        threshold:
          type: number
        updated_at:
          type: string
        version:
          type: integer
      type: object
    psp_com_internal_monitor_app.AlertSeverity:
      enum:
        - critical
        - warning
        - info
      type: string
      x-enum-varnames:
        - AlertSeverityCritical
        - AlertSeverityWarning
        - AlertSeverityInfo
    psp_com_internal_monitor_app.AlertStatsResponse:
      properties:
        by_severity:
          additionalProperties:
            format: int64
            type: integer
          type: object
        by_status:
          additionalProperties:
            format: int64
            type: integer
          type: object
        by_type:
          additionalProperties:
            format: int64
            type: integer
          type: object
        recent_count:
          description: 最近24小时
          type: integer
        resolved_today:
          description: 今日解决数
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_monitor_app.AlertStatus:
      enum:
        - active
        - acknowledged
        - resolved
      type: string
      x-enum-varnames:
        - AlertStatusActive
        - AlertStatusAcknowledged
        - AlertStatusResolved
    psp_com_internal_monitor_app.AlertSummary:
      properties:
        info:
          type: integer
        critical:
          type: integer
        total:
          type: integer
        warning:
          type: integer
      type: object
    psp_com_internal_monitor_app.AlertType:
      enum:
        - success_rate
        - error_rate
        - latency
        - channel_down
        - volume_spike
        - volume_drop
        - settlement
        - system
      type: string
      x-enum-varnames:
        - AlertTypeSuccessRate
        - AlertTypeErrorRate
        - AlertTypeLatency
        - AlertTypeChannelDown
        - AlertTypeVolumeSpike
        - AlertTypeVolumeDrop
        - AlertTypeSettlement
        - AlertTypeSystem
    psp_com_internal_monitor_app.CPUStatsDTO:
      properties:
        cores:
          type: integer
        load_avg_1:
          type: number
        load_avg_15:
          type: number
        load_avg_5:
          type: number
        usage_percent:
          type: number
      type: object
    psp_com_internal_monitor_app.CacheHealthResponse:
      properties:
        cluster_mode:
          description: 是否集群模式
          type: boolean
        cluster_size:
          description: 集群节点数
          type: integer
        error_message:
          description: 错误信息
          type: string
        is_connected:
          description: 是否连接
          type: boolean
        last_check:
          description: 最后检查时间
          type: string
        latency_ms:
          description: 延迟 (毫秒)
          type: number
        master_count:
          description: Master 节点数
          type: integer
        slave_count:
          description: Slave 节点数
          type: integer
        status:
          description: 'healthy, degraded, down'
          type: string
      type: object
    psp_com_internal_monitor_app.CacheStatsResponse:
      properties:
        blocked_clients:
          description: 阻塞的客户端数
          type: integer
        connected_clients:
          description: 连接的客户端数
          type: integer
        evicted_keys:
          description: 被驱逐的 key 数量
          type: integer
        expired_keys:
          description: 过期的 key 数量
          type: integer
        hit_rate:
          description: 命中率 (%)
          type: number
        keys_by_type:
          additionalProperties:
            format: int64
            type: integer
          description: 按类型统计的 key 数量
          type: object
        max_memory:
          description: 最大内存 (bytes)
          type: integer
        memory_by_type:
          additionalProperties:
            format: int64
            type: integer
          description: 按类型统计的内存使用
          type: object
        memory_usage_rate:
          description: 内存使用率 (%)
          type: number
        miss_rate:
          description: 未命中率 (%)
          type: number
        ops_per_second:
          description: 每秒操作数
          type: number
        timestamp:
          type: string
        total_keys:
          type: integer
        type_stats:
          description: 按类型详细统计
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_monitor_app.CacheTypeStatsResponse
          type: array
        uptime_seconds:
          description: 运行时长 (秒)
          type: integer
        used_memory:
          description: 已使用内存 (bytes)
          type: integer
      type: object
    psp_com_internal_monitor_app.CacheTypeStatsResponse:
      properties:
        avg_ttl:
          description: 平均 TTL (秒)
          type: integer
        cache_type:
          description: 缓存类型
          type: string
        key_count:
          description: key 数量
          type: integer
        memory_usage:
          description: 内存使用 (bytes)
          type: integer
        sample_keys:
          description: 示例 key
          items:
            type: string
          type: array
      type: object
    psp_com_internal_monitor_app.ChannelStats:
      properties:
        amount:
          type: integer
        avg_latency:
          type: number
        channel_code:
          type: string
        channel_name:
          type: string
        count:
          type: integer
        success_rate:
          type: number
      type: object
    psp_com_internal_monitor_app.ChannelStatusItem:
      properties:
        average_latency_ms:
          type: number
        channel_code:
          type: string
        channel_name:
          type: string
        last_transaction:
          type: string
        status:
          description: 'healthy, degraded, critical, offline'
          type: string
        success_rate:
          type: number
        transaction_count:
          type: integer
      type: object
    psp_com_internal_monitor_app.ClearCacheRequest:
      properties:
        cache_type:
          description: 缓存类型，空表示所有类型
          type: string
        dry_run:
          description: 是否仅模拟执行
          type: boolean
        max_keys:
          description: 最大删除数量，0 表示不限
          type: integer
        pattern:
          description: 额外的 key pattern
          type: string
        tenant_id:
          description: 租户 ID，空表示所有租户
          type: string
      type: object
    psp_com_internal_monitor_app.ClearCacheResponse:
      properties:
        affected_types:
          description: 影响的缓存类型
          items:
            type: string
          type: array
        deleted_count:
          description: 删除的 key 数量
          type: integer
        dry_run:
          description: 是否为 DryRun 模式
          type: boolean
        duration_ms:
          description: 执行时长 (毫秒)
          type: number
        error_message:
          description: 错误信息
          type: string
        freed_memory:
          description: 释放的内存 (bytes)
          type: integer
        sample_deleted_keys:
          description: 示例删除的 key
          items:
            type: string
          type: array
        scanned_count:
          description: 扫描的 key 数量
          type: integer
      type: object
    psp_com_internal_monitor_app.CreateAlertRuleRequest:
      properties:
        condition:
          type: string
        cooldown_seconds:
          minimum: 0
          type: integer
        metric:
          type: string
        name:
          maxLength: 200
          type: string
        notify_channels:
          items:
            $ref: '#/components/schemas/psp_com_internal_monitor_app.NotifyChannelDTO'
          minItems: 1
          type: array
        severity:
          enum:
            - critical
            - warning
            - info
          type: string
        threshold:
          minimum: 0
          type: number
      required:
        - condition
        - metric
        - name
        - notify_channels
        - severity
      type: object
    psp_com_internal_monitor_app.DashboardResponse:
      properties:
        alert_summary:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.AlertSummary'
        channel_status:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_monitor_app.ChannelStatusItem
          type: array
        last_updated:
          type: string
        overview:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.OverviewMetrics'
        real_time_metrics:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.RealTimeMetrics'
        refresh_interval:
          description: 建议刷新间隔（秒）
          type: integer
        system_health:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.SystemHealth'
        timestamp:
          type: string
      type: object
    psp_com_internal_monitor_app.DatabasePoolDTO:
      properties:
        host:
          type: string
        active_connections:
          type: integer
        avg_query_time_ms:
          type: number
        database:
          type: string
        idle_connections:
          type: integer
        max_connections:
          type: integer
        max_idle_time_ms:
          type: integer
        max_lifetime_ms:
          type: integer
        name:
          type: string
        port:
          type: integer
        status:
          type: string
        waiting_requests:
          type: integer
      type: object
    psp_com_internal_monitor_app.DatabaseStatsResponse:
      properties:
        pools:
          items:
            $ref: '#/components/schemas/psp_com_internal_monitor_app.DatabasePoolDTO'
          type: array
        summary:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.DatabaseSummaryDTO'
        timestamp:
          type: string
      type: object
    psp_com_internal_monitor_app.DatabaseSummaryDTO:
      properties:
        active_connections:
          type: integer
        avg_query_time_ms:
          type: number
        healthy_pools:
          type: integer
        total_connections:
          type: integer
        total_pools:
          type: integer
      type: object
    psp_com_internal_monitor_app.DiskStatsDTO:
      properties:
        available_bytes:
          type: integer
        path:
          type: string
        total_bytes:
          type: integer
        usage_percent:
          type: number
        used_bytes:
          type: integer
      type: object
    psp_com_internal_monitor_app.FailedTransaction:
      properties:
        amount:
          type: integer
        channel_code:
          type: string
        created_at:
          type: string
        currency:
          type: string
        error_code:
          type: string
        error_message:
          type: string
        merchant_id:
          type: string
        transaction_id:
          type: string
      type: object
    psp_com_internal_monitor_app.ListAlertRulesResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        rules:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_monitor_app.AlertRuleResponse
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_monitor_app.ListAlertsResponse:
      properties:
        alerts:
          items:
            $ref: '#/components/schemas/psp_com_internal_monitor_app.Alert'
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_monitor_app.MemoryStatsDTO:
      properties:
        available_bytes:
          type: integer
        total_bytes:
          type: integer
        usage_percent:
          type: number
        used_bytes:
          type: integer
      type: object
    psp_com_internal_monitor_app.MetricDataPoint:
      properties:
        error_count:
          type: integer
        latency_p50:
          type: number
        latency_p95:
          type: number
        latency_p99:
          type: number
        success_rate:
          type: number
        timestamp:
          type: string
        transactions:
          type: integer
      type: object
    psp_com_internal_monitor_app.MetricsResponse:
      properties:
        data_points:
          items:
            $ref: '#/components/schemas/psp_com_internal_monitor_app.MetricDataPoint'
          type: array
        end_time:
          type: string
        interval:
          type: string
        start_time:
          type: string
        summary:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.MetricsSummary'
      type: object
    psp_com_internal_monitor_app.MetricsSummary:
      properties:
        average_latency_ms:
          type: number
        error_rate:
          type: number
        peak_tps:
          type: number
        success_rate:
          type: number
        total_transactions:
          type: integer
      type: object
    psp_com_internal_monitor_app.NetworkStatsDTO:
      properties:
        active_connections:
          type: integer
        bytes_received:
          type: integer
        bytes_sent:
          type: integer
        errors_in:
          type: integer
        errors_out:
          type: integer
        packets_received:
          type: integer
        packets_sent:
          type: integer
      type: object
    psp_com_internal_monitor_app.NotifyChannelDTO:
      properties:
        chat_id:
          type: string
        email:
          type: string
        type:
          type: string
        url:
          type: string
      required:
        - type
      type: object
    psp_com_internal_monitor_app.OverviewMetrics:
      properties:
        active_channels:
          type: integer
        active_merchants:
          type: integer
        pending_settlements:
          type: integer
        success_rate:
          type: number
        total_transactions_today:
          type: integer
        total_volume_today:
          type: integer
      type: object
    psp_com_internal_monitor_app.PaymentMethodStats:
      properties:
        amount:
          type: integer
        count:
          type: integer
        method:
          description: 'pix, spei, upi, card'
          type: string
        success_rate:
          type: number
      type: object
    psp_com_internal_monitor_app.QueueInfoDTO:
      properties:
        consumer_count:
          type: integer
        lag_count:
          type: integer
        last_message:
          type: string
        messages_per_sec:
          type: number
        name:
          type: string
        pending_count:
          type: integer
        producer_count:
          type: integer
        status:
          type: string
      type: object
    psp_com_internal_monitor_app.QueueStatsResponse:
      properties:
        queues:
          items:
            $ref: '#/components/schemas/psp_com_internal_monitor_app.QueueInfoDTO'
          type: array
        summary:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.QueueSummaryDTO'
        timestamp:
          type: string
      type: object
    psp_com_internal_monitor_app.QueueSummaryDTO:
      properties:
        healthy_queues:
          type: integer
        total_lag:
          type: integer
        total_pending:
          type: integer
        total_queues:
          type: integer
      type: object
    psp_com_internal_monitor_app.RealTimeMetrics:
      properties:
        average_latency_ms:
          type: number
        error_rate:
          type: number
        tps_current:
          type: number
        tps_peak:
          type: number
        transactions_last_hour:
          type: integer
        volume_last_hour:
          type: integer
      type: object
    psp_com_internal_monitor_app.ResolveAlertRequest:
      properties:
        resolution:
          description: 可选的解决说明
          type: string
        resolved_by:
          type: string
      required:
        - resolved_by
      type: object
    psp_com_internal_monitor_app.ServiceHealthDTO:
      properties:
        endpoint:
          type: string
        error_count:
          type: integer
        last_check:
          type: string
        metadata:
          additionalProperties:
            type: string
          type: object
        name:
          type: string
        response_ms:
          type: number
        status:
          type: string
        success_rate:
          type: number
        uptime_ms:
          type: integer
        version:
          type: string
      type: object
    psp_com_internal_monitor_app.ServicesHealthResponse:
      properties:
        overall:
          type: string
        services:
          items:
            $ref: '#/components/schemas/psp_com_internal_monitor_app.ServiceHealthDTO'
          type: array
        summary:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.ServicesSummaryDTO'
        timestamp:
          type: string
      type: object
    psp_com_internal_monitor_app.ServicesSummaryDTO:
      properties:
        degraded_services:
          type: integer
        down_services:
          type: integer
        healthy_services:
          type: integer
        total_services:
          type: integer
      type: object
    psp_com_internal_monitor_app.SystemHealth:
      properties:
        cache:
          type: string
        channels:
          type: string
        database:
          description: 'healthy, degraded, down'
          type: string
        overall:
          type: string
        queue:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_monitor_app.SystemStatsResponse:
      properties:
        cpu:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.CPUStatsDTO'
        disk:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.DiskStatsDTO'
        memory:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.MemoryStatsDTO'
        network:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.NetworkStatsDTO'
        timestamp:
          type: string
      type: object
    psp_com_internal_monitor_app.ToggleAlertRuleRequest:
      properties:
        enabled:
          type: boolean
        version:
          type: integer
      required:
        - version
      type: object
    psp_com_internal_monitor_app.TransactionMonitorResponse:
      properties:
        by_channel:
          items:
            $ref: '#/components/schemas/psp_com_internal_monitor_app.ChannelStats'
          type: array
        by_payment_method:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_monitor_app.PaymentMethodStats
          type: array
        recent_failures:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_monitor_app.FailedTransaction
          type: array
        summary:
          $ref: '#/components/schemas/psp_com_internal_monitor_app.TransactionSummary'
        timestamp:
          type: string
      type: object
    psp_com_internal_monitor_app.TransactionSummary:
      properties:
        currency:
          type: string
        failed_count:
          type: integer
        pending_count:
          type: integer
        success_amount:
          type: integer
        success_count:
          type: integer
        success_rate:
          type: number
        total_amount:
          type: integer
        total_count:
          type: integer
      type: object
    psp_com_internal_monitor_app.UpdateAlertRuleRequest:
      properties:
        condition:
          type: string
        cooldown_seconds:
          type: integer
        metric:
          type: string
        name:
          type: string
        notify_channels:
          items:
            $ref: '#/components/schemas/psp_com_internal_monitor_app.NotifyChannelDTO'
          type: array
        severity:
          type: string
        threshold:
          type: number
        version:
          type: integer
      required:
        - version
      type: object
    psp_com_internal_monitor_app.WarmupCacheRequest:
      properties:
        batch_size:
          description: 批次大小
          type: integer
        cache_type:
          description: 缓存类型
          type: string
        concurrency:
          description: 并发数
          type: integer
        entity_ids:
          description: 实体 ID 列表，空表示全部
          items:
            type: string
          type: array
        tenant_id:
          description: 租户 ID
          type: string
      required:
        - cache_type
        - tenant_id
      type: object
    psp_com_internal_monitor_app.WarmupCacheResponse:
      properties:
        duration_ms:
          description: 执行时长 (毫秒)
          type: number
        error_message:
          description: 错误信息
          type: string
        failed_count:
          description: 预热失败的数量
          type: integer
        skipped_count:
          description: 跳过的数量
          type: integer
        success_rate:
          description: 成功率 (%)
          type: number
        warmed_count:
          description: 预热成功的数量
          type: integer
      type: object
    psp_com_internal_ops_app.AdminCancelResponse:
      properties:
        canceled_at:
          type: string
        payment_method:
          type: string
        status:
          type: string
        transaction_id:
          type: string
      type: object
    psp_com_internal_ops_app.AdminRefundResponse:
      properties:
        amount:
          type: integer
        completed_at:
          type: string
        created_at:
          type: string
        payment_method:
          type: string
        reason:
          type: string
        refund_id:
          type: string
        status:
          type: string
        transaction_id:
          type: string
      type: object
    psp_com_internal_ops_app.AttachmentResponse:
      properties:
        content_type:
          type: string
        description:
          type: string
        file_name:
          type: string
        file_size:
          type: integer
        id:
          type: string
        operation_id:
          type: string
        uploaded_at:
          type: string
        uploaded_by:
          type: string
        uploaded_by_name:
          type: string
      type: object
    psp_com_internal_ops_app.CorrectionResponse:
      properties:
        approved_at:
          type: string
        approved_by:
          type: string
        approved_by_name:
          type: string
        correction_type:
          type: string
        created_at:
          type: string
        error_message:
          type: string
        executed_at:
          type: string
        id:
          type: string
        metadata:
          additionalProperties: true
          type: object
        original_status:
          type: string
        payment_method:
          type: string
        reason:
          type: string
        reject_reason:
          type: string
        rejected_at:
          type: string
        rejected_by:
          type: string
        rejected_by_name:
          type: string
        requested_at:
          type: string
        requested_by:
          type: string
        requested_by_name:
          type: string
        reviewed_at:
          type: string
        reviewed_by:
          type: string
        reviewed_by_name:
          type: string
        status:
          type: string
        target_status:
          type: string
        transaction_id:
          type: string
        transaction_type:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_ops_app.CreateAdjustmentRequest:
      properties:
        adjustment_type:
          enum:
            - error_correction
            - promotion
            - penalty
            - fee_adjustment
            - other
          type: string
        amount:
          minimum: 1
          type: integer
        currency:
          type: string
        direction:
          enum:
            - credit
            - debit
          type: string
        idempotency_key:
          type: string
        merchant_account_id:
          type: string
        merchant_id:
          type: string
        metadata:
          additionalProperties: true
          description: 'Issue #2986: 添加 metadata 验证器'
          type: object
        reason:
          maxLength: 500
          minLength: 1
          type: string
        reference:
          maxLength: 255
          type: string
        request_notes:
          maxLength: 2000
          type: string
      required:
        - adjustment_type
        - amount
        - currency
        - direction
        - idempotency_key
        - merchant_account_id
        - merchant_id
        - reason
      type: object
    psp_com_internal_ops_app.CreateDepositRequest:
      properties:
        amount:
          minimum: 1
          type: integer
        currency:
          type: string
        idempotency_key:
          type: string
        merchant_account_id:
          type: string
        merchant_id:
          type: string
        metadata:
          additionalProperties: true
          description: 'Issue #2986: 添加 metadata 验证器'
          type: object
        reason:
          maxLength: 500
          minLength: 1
          type: string
        reference:
          maxLength: 255
          type: string
        request_notes:
          maxLength: 2000
          type: string
      required:
        - amount
        - currency
        - idempotency_key
        - merchant_account_id
        - merchant_id
        - reason
      type: object
    psp_com_internal_ops_app.CreateWithdrawalRequest:
      properties:
        amount:
          minimum: 1
          type: integer
        currency:
          description: Supports crypto codes like USDT
          maxLength: 5
          minLength: 3
          type: string
        idempotency_key:
          type: string
        merchant_account_id:
          type: string
        merchant_id:
          type: string
        metadata:
          additionalProperties: true
          description: 'Issue #2986: 添加 metadata 验证器'
          type: object
        reason:
          maxLength: 500
          minLength: 1
          type: string
        request_notes:
          maxLength: 2000
          type: string
        withdrawal_address:
          type: string
        withdrawal_network:
          enum:
            - TRC20
            - ERC20
          type: string
      required:
        - amount
        - currency
        - idempotency_key
        - merchant_account_id
        - merchant_id
        - reason
        - withdrawal_address
        - withdrawal_network
      type: object
    psp_com_internal_ops_app.DownloadURLResponse:
      properties:
        download_url:
          type: string
      type: object
    psp_com_internal_ops_app.FundsOperationActionRequest:
      properties:
        action:
          description: >-
            操作类型: first_approve(初审), final_approve(终审), reject(拒绝),
            confirm_execution(确认执行)
          enum:
            - first_approve
            - final_approve
            - reject
            - confirm_execution
          example: first_approve
          type: string
        notes:
          maxLength: 2000
          type: string
        params:
          additionalProperties: {}
          description: 扩展参数（可选）
          type: object
        reason:
          description: 操作原因/备注（reject 必填，其他可选）
          example: 审批通过
          maxLength: 500
          type: string
      required:
        - action
      type: object
    psp_com_internal_ops_app.FundsOperationActionResponse:
      properties:
        action:
          description: 执行的操作
          example: first_approve
          type: string
        changed_at:
          description: 变更时间
          example: '2024-01-01T00:00:00Z'
          type: string
        new_status:
          description: 变更后状态
          example: pending_final
          type: string
        old_status:
          description: 变更前状态
          example: pending_first
          type: string
        success:
          description: 操作是否成功
          example: true
          type: boolean
      type: object
    psp_com_internal_ops_app.FundsOperationResponse:
      properties:
        adjustment_type:
          type: string
        amount:
          type: integer
        created_at:
          type: string
        currency:
          type: string
        direction:
          type: string
        error_message:
          type: string
        executed_at:
          type: string
        executed_by:
          type: string
        executed_by_name:
          type: string
        execution_notes:
          type: string
        final_approval_notes:
          type: string
        final_approved_at:
          type: string
        final_approved_by:
          type: string
        final_approved_by_name:
          type: string
        first_approval_notes:
          type: string
        first_approved_at:
          type: string
        first_approved_by:
          type: string
        first_approved_by_name:
          type: string
        funds_hold_id:
          type: string
        id:
          type: string
        ledger_entry_id:
          type: string
        merchant_account_id:
          type: string
        merchant_id:
          type: string
        metadata:
          additionalProperties: true
          type: object
        operation_type:
          type: string
        reason:
          type: string
        reference:
          type: string
        reject_reason:
          type: string
        reject_stage:
          type: string
        rejected_at:
          type: string
        rejected_by:
          type: string
        rejected_by_name:
          type: string
        request_notes:
          type: string
        requested_at:
          type: string
        requested_by:
          type: string
        requested_by_name:
          type: string
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        withdrawal_address:
          type: string
        withdrawal_network:
          type: string
      type: object
    psp_com_internal_ops_app.ListOperationsResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        operations:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_ops_app.FundsOperationResponse
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_ops_app.RiskApprovalResponse:
      properties:
        approved_at:
          type: string
        reason:
          type: string
        rejected_at:
          type: string
        state:
          description: 'queued (if approved), risk_rejected (if rejected)'
          type: string
        status:
          description: 'approved, rejected'
          type: string
        transaction_id:
          type: string
      type: object
    psp_com_internal_ops_import.ImportError:
      properties:
        error:
          type: string
        field:
          type: string
        row:
          type: integer
      type: object
    psp_com_internal_ops_import.ImportResult:
      properties:
        errors:
          items:
            $ref: '#/components/schemas/psp_com_internal_ops_import.ImportError'
          type: array
        failure_count:
          type: integer
        success_count:
          type: integer
        task_id:
          type: string
      type: object
    psp_com_internal_ops_import.ImportTaskResponse:
      properties:
        completed_at:
          type: string
        created_at:
          type: string
        created_by:
          type: string
        created_by_name:
          type: string
        errors:
          items:
            $ref: '#/components/schemas/psp_com_internal_ops_import.ImportError'
          type: array
        failure_count:
          type: integer
        file_name:
          type: string
        file_size:
          type: integer
        id:
          type: string
        processed_rows:
          type: integer
        result_summary:
          additionalProperties: true
          type: object
        started_at:
          type: string
        status:
          type: string
        success_count:
          type: integer
        task_type:
          type: string
        tenant_id:
          type: string
        total_rows:
          type: integer
      type: object
    psp_com_internal_ops_import.ListImportTasksResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        tasks:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_ops_import.ImportTaskResponse
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_payment_core_app.PaymentRefundResponse:
      properties:
        amount:
          type: integer
        channel_id:
          type: string
        completed_at:
          type: string
        created_at:
          type: string
        currency:
          type: string
        failed_at:
          type: string
        failure_code:
          type: string
        failure_reason:
          type: string
        final_approval_notes:
          type: string
        final_approved_at:
          type: string
        final_approved_by:
          description: 审批信息 - 终审
          type: string
        final_approved_by_name:
          type: string
        first_approval_notes:
          type: string
        first_approved_at:
          type: string
        first_approved_by:
          description: 审批信息 - 初审
          type: string
        first_approved_by_name:
          type: string
        id:
          type: string
        merchant_id:
          type: string
        metadata:
          additionalProperties: true
          type: object
        original_intent_id:
          type: string
        payment_method:
          type: string
        provider_refund_id:
          type: string
        reason:
          type: string
        refund_number:
          type: string
        refunded_amount:
          type: integer
        rejected_at:
          type: string
        rejected_by:
          description: 拒绝信息
          type: string
        rejected_by_name:
          type: string
        rejection_level:
          description: '"first" 或 "final"'
          type: string
        rejection_reason:
          type: string
        state:
          description: 二级状态
          type: string
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        webhook_sent:
          type: boolean
        webhook_url:
          type: string
      type: object
    psp_com_internal_payment_core_app.RefundApprovalRequest:
      properties:
        notes:
          maxLength: 500
          type: string
      type: object
    psp_com_internal_payment_core_app.RefundRejectRequest:
      properties:
        reason:
          maxLength: 500
          type: string
      required:
        - reason
      type: object
    psp_com_internal_payment_creditcard_app.CreateDisputeRequest:
      properties:
        amount:
          type: integer
        cardholder_reason:
          type: string
        currency:
          type: string
        evidence_deadline:
          type: string
        invoice_id:
          type: string
        provider_dispute_id:
          type: string
        reason:
          $ref: >-
            #/components/schemas/psp_com_internal_payment_creditcard_domain_valueobjects.DisputeReason
      required:
        - amount
        - currency
        - evidence_deadline
        - invoice_id
        - provider_dispute_id
        - reason
      type: object
    psp_com_internal_payment_creditcard_app.DisputeResponse:
      properties:
        acknowledged_at:
          type: string
        amount:
          type: integer
        cardholder_reason:
          type: string
        channel_id:
          type: string
        created_at:
          type: string
        currency:
          type: string
        days_until_deadline:
          type: integer
        dispute_number:
          type: string
        evidence_deadline:
          type: string
        evidence_submitted_at:
          type: string
        evidence_url:
          type: string
        id:
          type: string
        invoice_id:
          type: string
        merchant_id:
          type: string
        provider_dispute_id:
          type: string
        provider_reference_id:
          type: string
        reason:
          type: string
        refund_id:
          type: string
        refund_required:
          type: boolean
        resolution:
          type: string
        resolved_at:
          type: string
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_payment_creditcard_app.DisputeSummaryResponse:
      properties:
        expired_amount:
          type: integer
        expired_count:
          type: integer
        lost_amount:
          type: integer
        lost_count:
          type: integer
        open_amount:
          type: integer
        open_count:
          type: integer
        pending_evidence_count:
          type: integer
        total_amount:
          type: integer
        total_count:
          type: integer
        under_review_amount:
          type: integer
        under_review_count:
          type: integer
        win_rate:
          type: number
        won_amount:
          type: integer
        won_count:
          type: integer
      type: object
    psp_com_internal_payment_creditcard_app.ListDisputesResponse:
      properties:
        disputes:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_payment_creditcard_app.DisputeResponse
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_payment_creditcard_app.ResolveDisputeRequest:
      properties:
        provider_response:
          type: string
        resolution:
          enum:
            - won
            - lost
            - expired
          type: string
      required:
        - resolution
      type: object
    psp_com_internal_payment_creditcard_app.SubmitEvidenceRequest:
      properties:
        evidence_url:
          type: string
      required:
        - evidence_url
      type: object
    psp_com_internal_payment_creditcard_domain_valueobjects.DisputeReason:
      enum:
        - fraud
        - product_not_received
        - product_unacceptable
        - duplicate
        - credit_not_processed
        - incorrect_amount
        - general
      type: string
      x-enum-varnames:
        - DisputeReasonFraud
        - DisputeReasonProductNotReceived
        - DisputeReasonProductUnacceptable
        - DisputeReasonDuplicate
        - DisputeReasonCreditNotProcessed
        - DisputeReasonIncorrectAmount
        - DisputeReasonGeneral
    psp_com_internal_recon_app.CreateDifferenceRequest:
      properties:
        actual_amount:
          type: integer
        batch_id:
          type: string
        currency:
          type: string
        description:
          type: string
        difference_category:
          enum:
            - channel_recon
            - merchant_recon
            - ledger_recon
            - system_error
          type: string
        difference_type:
          enum:
            - amount_mismatch
            - missing_transaction
            - duplicate_transaction
            - timing_difference
            - fee_mismatch
            - status_mismatch
            - currency_mismatch
            - unknown
          type: string
        entity_id:
          type: string
        entity_type:
          enum:
            - invoice
            - transfer
            - refund
            - channel_statement
            - merchant_statement
            - ledger_entry
          type: string
        expected_amount:
          type: integer
        severity:
          enum:
            - low
            - medium
            - high
            - critical
          type: string
      required:
        - batch_id
        - currency
        - description
        - difference_category
        - difference_type
        - entity_type
        - severity
      type: object
    psp_com_internal_recon_app.CreateReconBatchRequest:
      properties:
        batch_type:
          enum:
            - channel_recon
            - merchant_recon
            - ledger_recon
            - manual_recon
          type: string
        entity_id:
          type: string
        entity_type:
          enum:
            - channel
            - merchant
            - platform
            - all
          type: string
        recon_period_end:
          type: string
        recon_period_start:
          type: string
      required:
        - batch_type
        - entity_type
        - recon_period_end
        - recon_period_start
      type: object
    psp_com_internal_recon_app.ReconBatchActionRequest:
      properties:
        action:
          description: 操作类型
          enum:
            - start
            - complete
          example: start
          type: string
        params:
          additionalProperties: {}
          description: 扩展参数
          type: object
        reason:
          description: 操作原因
          example: 启动对账
          maxLength: 500
          type: string
      required:
        - action
      type: object
    psp_com_internal_recon_app.ReconBatchActionResponse:
      properties:
        action:
          description: 执行的操作
          example: start
          type: string
        changed_at:
          description: 变更时间
          example: '2024-01-01T00:00:00Z'
          type: string
        new_status:
          description: 变更后状态
          example: processing
          type: string
        old_status:
          description: 变更前状态
          example: pending
          type: string
        success:
          description: 操作是否成功
          example: true
          type: boolean
      type: object
    psp_com_internal_recon_app.ReconBatchDTO:
      properties:
        batch_number:
          type: string
        batch_type:
          enum:
            - channel_recon
            - merchant_recon
            - ledger_recon
            - manual_recon
          type: string
        completed_at:
          type: string
        created_at:
          type: string
        discrepancy_amount:
          type: integer
        discrepancy_count:
          type: integer
        executed_by:
          type: string
        execution_notes:
          type: string
        id:
          type: string
        matched_amount:
          type: integer
        matched_records:
          type: integer
        recon_entity_id:
          type: string
        recon_entity_type:
          enum:
            - channel
            - merchant
            - platform
            - all
          type: string
        recon_period_end:
          type: string
        recon_period_start:
          type: string
        started_at:
          type: string
        status:
          enum:
            - pending
            - processing
            - completed
            - failed
            - canceled
          type: string
        tenant_id:
          type: string
        total_amount:
          type: integer
        total_records:
          type: integer
        unmatched_records:
          type: integer
        updated_at:
          type: string
      type: object
    psp_com_internal_recon_app.ReconDifferenceActionRequest:
      properties:
        action:
          description: 操作类型
          enum:
            - assign
            - resolve
          example: resolve
          type: string
        assignee_id:
          description: 指派人ID（assign时使用）
          type: string
        params:
          additionalProperties: {}
          description: 扩展参数
          type: object
        reason:
          description: 操作原因
          example: 差异已处理
          maxLength: 500
          type: string
        resolution:
          description: 解决方案（resolve时使用）
          maxLength: 1000
          type: string
      required:
        - action
      type: object
    psp_com_internal_recon_app.ReconDifferenceActionResponse:
      properties:
        action:
          description: 执行的操作
          example: resolve
          type: string
        changed_at:
          description: 变更时间
          example: '2024-01-01T00:00:00Z'
          type: string
        new_status:
          description: 变更后状态
          example: resolved
          type: string
        old_status:
          description: 变更前状态
          example: pending
          type: string
        success:
          description: 操作是否成功
          example: true
          type: boolean
      type: object
    psp_com_internal_recon_app.ReconDifferenceDTO:
      properties:
        actual_amount:
          type: integer
        assigned_at:
          type: string
        assigned_to:
          type: string
        batch_id:
          type: string
        created_at:
          type: string
        currency:
          type: string
        description:
          type: string
        difference_amount:
          type: integer
        difference_category:
          enum:
            - channel_recon
            - merchant_recon
            - ledger_recon
            - system_error
          type: string
        difference_type:
          enum:
            - amount_mismatch
            - missing_transaction
            - duplicate_transaction
            - timing_difference
            - fee_mismatch
            - status_mismatch
            - currency_mismatch
            - unknown
          type: string
        entity_id:
          type: string
        entity_type:
          enum:
            - invoice
            - transfer
            - refund
            - channel_statement
            - merchant_statement
            - ledger_entry
          type: string
        expected_amount:
          type: integer
        id:
          type: string
        identified_at:
          type: string
        metadata:
          type: object
        resolution_action:
          enum:
            - approved
            - adjustment_created
            - refund_issued
            - disputed
            - waived
            - manual_review
          type: string
        resolution_notes:
          type: string
        resolved_at:
          type: string
        resolved_by:
          type: string
        root_cause:
          type: string
        severity:
          enum:
            - low
            - medium
            - high
            - critical
          type: string
        status:
          enum:
            - open
            - in_progress
            - resolved
            - waived
            - escalated
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_report_app.BalanceSummaryDTO:
      properties:
        active_accounts:
          type: integer
        available_balance:
          type: integer
        currency:
          type: string
        frozen_balance:
          type: integer
        net_flow:
          type: integer
        pending_balance:
          type: integer
        snapshot_time:
          description: 时间点
          type: string
        total_accounts:
          description: 账户统计
          type: integer
        total_balance:
          description: 余额统计
          type: integer
        total_inflow:
          description: 变动统计
          type: integer
        total_outflow:
          type: integer
      type: object
    psp_com_internal_report_app.FeeSummaryDTO:
      properties:
        average_fee:
          type: integer
        channel_fees:
          additionalProperties:
            format: int64
            type: integer
          description: 按通道分
          type: object
        currency:
          type: string
        end_date:
          type: string
        payment_fee:
          description: 按类型分
          type: integer
        refund_fee:
          type: integer
        start_date:
          description: 时间范围
          type: string
        total_count:
          type: integer
        total_fee:
          description: 总计
          type: integer
        transfer_fee:
          type: integer
        withdraw_fee:
          type: integer
      type: object
    psp_com_internal_report_app.GetChannelPerformanceOutput:
      properties:
        channels:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_report_domain_valueobjects.ChannelPerformance
          type: array
      type: object
    psp_com_internal_report_app.GetDashboardOutput:
      properties:
        available_balance:
          type: integer
        frozen_balance:
          type: integer
        last_7_days_stats:
          description: 趋势数据
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_report_domain_valueobjects.DailyStatistics
          type: array
        pending_discrepancies:
          type: integer
        pending_settlement:
          description: 结算概览
          type: integer
        reconciliation_match_rate:
          type: number
        today_fee_amount:
          type: integer
        today_reconciliations:
          description: 对账概览
          type: integer
        today_settled_amount:
          type: integer
        today_success_rate:
          type: number
        today_transaction_amount:
          type: integer
        today_transaction_count:
          description: 今日概览
          type: integer
        total_balance:
          description: 余额概览
          type: integer
      type: object
    psp_com_internal_report_app.GetMerchantPerformanceOutput:
      properties:
        merchants:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_report_domain_valueobjects.MerchantPerformance
          type: array
      type: object
    psp_com_internal_report_app.GetTransactionReportOutput:
      properties:
        dailyStats:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_report_domain_valueobjects.DailyStatistics
          type: array
        summary:
          $ref: >-
            #/components/schemas/psp_com_internal_report_domain_valueobjects.TransactionSummary
      type: object
    psp_com_internal_report_app.ReconciliationSummaryDTO:
      properties:
        completed_tasks:
          type: integer
        end_date:
          type: string
        failed_tasks:
          type: integer
        match_rate:
          type: number
        matched_records:
          type: integer
        mismatched_records:
          type: integer
        partial_tasks:
          type: integer
        pending_discrepancies:
          type: integer
        resolved_discrepancies:
          type: integer
        start_date:
          description: 时间范围
          type: string
        success_rate:
          type: number
        total_amount_difference:
          description: 金额差异
          type: integer
        total_discrepancies:
          description: 差异统计
          type: integer
        total_records:
          description: 记录统计
          type: integer
        total_tasks:
          description: 任务统计
          type: integer
      type: object
    psp_com_internal_report_app.SettlementSummaryDTO:
      properties:
        completed_count:
          type: integer
        currency:
          type: string
        end_date:
          type: string
        failed_count:
          type: integer
        pending_count:
          type: integer
        start_date:
          description: 时间范围
          type: string
        t0_amount:
          type: integer
        t0_count:
          description: 按周期统计
          type: integer
        t1_amount:
          type: integer
        t1_count:
          type: integer
        tn_amount:
          type: integer
        tn_count:
          type: integer
        total_fee_amount:
          type: integer
        total_net_amount:
          type: integer
        total_settled_amount:
          description: 金额统计
          type: integer
        total_settlements:
          description: 结算统计
          type: integer
      type: object
    psp_com_internal_report_domain_valueobjects.ChannelPerformance:
      type: object
    psp_com_internal_report_domain_valueobjects.DailyStatistics:
      type: object
    psp_com_internal_report_domain_valueobjects.MerchantPerformance:
      type: object
    psp_com_internal_report_domain_valueobjects.TransactionSummary:
      type: object
    psp_com_internal_risk_app.AMLCaseResponse:
      properties:
        assigned_at:
          type: string
        assigned_to:
          type: string
        business_id:
          type: string
        business_type:
          type: string
        case_number:
          type: string
        case_type:
          type: string
        created_at:
          type: string
        created_by:
          type: string
        description:
          type: string
        id:
          type: string
        investigation_started_at:
          type: string
        merchant_id:
          type: string
        metadata:
          additionalProperties: true
          type: object
        priority:
          type: string
        resolution:
          type: string
        resolution_notes:
          type: string
        resolved_at:
          type: string
        risk_level:
          type: string
        sar_filed:
          type: boolean
        sar_filed_at:
          type: string
        sar_reference:
          type: string
        screening_result:
          additionalProperties: true
          type: object
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_risk_app.AddBlacklistRequest:
      properties:
        added_by:
          type: string
        expires_at:
          type: string
        list_type:
          description: 'cpf_cnpj, email, phone, ip, device_id, card_bin'
          type: string
        notes:
          type: string
        reason:
          type: string
        source_details:
          description: 来源详情
          type: string
        source_type:
          description: 'manual, system, external'
          type: string
        value:
          type: string
      required:
        - list_type
        - reason
        - value
      type: object
    psp_com_internal_risk_app.AddGlobalBlacklistRequest:
      properties:
        added_by:
          type: string
        expires_at:
          type: string
        list_type:
          description: 'ip, email, phone, cpf_cnpj, device_id'
          type: string
        notes:
          type: string
        reason:
          type: string
        source_details:
          description: 来源详情
          type: string
        source_type:
          description: 'manual, system, external'
          type: string
        value:
          type: string
      required:
        - list_type
        - reason
        - value
      type: object
    psp_com_internal_risk_app.AddInvestigationNotesRequest:
      properties:
        notes:
          type: string
      required:
        - notes
      type: object
    psp_com_internal_risk_app.AddWhitelistRequest:
      properties:
        added_by:
          type: string
        expires_at:
          type: string
        list_type:
          type: string
        notes:
          type: string
        reason:
          type: string
        source_details:
          type: string
        source_type:
          type: string
        value:
          type: string
      required:
        - list_type
        - reason
        - value
      type: object
    psp_com_internal_risk_app.AssignCaseRequest:
      properties:
        analyst_id:
          type: string
      required:
        - analyst_id
      type: object
    psp_com_internal_risk_app.BlacklistResponse:
      properties:
        added_by:
          type: string
        created_at:
          type: string
        expires_at:
          type: string
        id:
          type: string
        list_type:
          type: string
        notes:
          type: string
        reason:
          type: string
        source_details:
          type: string
        source_type:
          type: string
        tenant_id:
          type: string
        value:
          type: string
      type: object
    psp_com_internal_risk_app.CreateRiskRuleRequest:
      properties:
        action:
          description: 'block, review, alert, log, approve'
          type: string
        action_params:
          additionalProperties: true
          description: 动作参数
          type: object
        applies_to:
          description: '适用范围: all, invoice, transfer, refund'
          type: string
        description:
          description: 规则描述
          type: string
        merchant_id:
          type: string
        payment_method:
          type: string
        priority:
          maximum: 1000
          minimum: 0
          type: integer
        risk_score:
          description: 风险分数 0-100
          type: integer
        rule_code:
          type: string
        rule_config:
          additionalProperties: true
          type: object
        rule_name:
          type: string
        rule_type:
          description: 'amount_limit, frequency_limit, etc.'
          type: string
        severity:
          description: 'low, medium, high, critical'
          type: string
        transaction_type:
          type: string
      required:
        - action
        - priority
        - rule_code
        - rule_config
        - rule_name
        - rule_type
        - severity
      type: object
    psp_com_internal_risk_app.DimensionScoreDTO:
      properties:
        dimension:
          type: string
        evaluated_at:
          type: string
        factors:
          items:
            $ref: '#/components/schemas/psp_com_internal_risk_app.ScoreFactorDTO'
          type: array
        score:
          type: integer
        weight:
          type: number
      type: object
    psp_com_internal_risk_app.EvaluateMerchantRiskRequest:
      properties:
        evaluation_notes:
          type: string
        merchant_id:
          type: string
        trigger_reason:
          description: 'manual, scheduled, auto'
          type: string
      required:
        - merchant_id
      type: object
    psp_com_internal_risk_app.EvaluateMerchantRiskResponse:
      properties:
        dimension_scores:
          items:
            $ref: '#/components/schemas/psp_com_internal_risk_app.DimensionScoreDTO'
          type: array
        evaluated_at:
          type: string
        merchant_id:
          type: string
        overall_score:
          type: integer
        previous_score:
          type: integer
        profile_id:
          type: string
        requires_review:
          type: boolean
        risk_level:
          type: string
        score_change:
          type: integer
      type: object
    psp_com_internal_risk_app.FileSARRequest:
      properties:
        filing_notes:
          type: string
        sar_reference:
          type: string
      required:
        - sar_reference
      type: object
    psp_com_internal_risk_app.GlobalBlacklistResponse:
      properties:
        added_by:
          type: string
        created_at:
          type: string
        expires_at:
          type: string
        id:
          type: string
        list_type:
          type: string
        notes:
          type: string
        reason:
          type: string
        source_details:
          type: string
        source_type:
          type: string
        value:
          type: string
      type: object
    psp_com_internal_risk_app.LimitRequest:
      properties:
        alert_threshold:
          description: 告警阈值（0-1.0）
          type: number
        currency:
          type: string
        daily_limit:
          minimum: 0
          type: integer
        merchant_limit:
          description: 仅通道使用
          minimum: 0
          type: integer
        monthly_limit:
          minimum: 0
          type: integer
        single_max:
          minimum: 0
          type: integer
        single_min:
          minimum: 0
          type: integer
      required:
        - currency
      type: object
    psp_com_internal_risk_app.LimitResponse:
      properties:
        alert_threshold:
          type: number
        created_at:
          type: string
        currency:
          type: string
        daily_limit:
          type: integer
        id:
          type: string
        merchant_limit:
          type: integer
        monthly_limit:
          type: integer
        single_max:
          type: integer
        single_min:
          type: integer
        subject_id:
          type: string
        subject_type:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_risk_app.ListAMLCasesResponse:
      properties:
        cases:
          items:
            $ref: '#/components/schemas/psp_com_internal_risk_app.AMLCaseResponse'
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_risk_app.ListBlacklistResponse:
      properties:
        entries:
          items:
            $ref: '#/components/schemas/psp_com_internal_risk_app.BlacklistResponse'
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_risk_app.ListGlobalBlacklistResponse:
      properties:
        entries:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_risk_app.GlobalBlacklistResponse
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_risk_app.ListHighRiskMerchantsResponse:
      properties:
        limit:
          type: integer
        merchants:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_risk_app.MerchantRiskSummaryDTO
          type: array
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_risk_app.ListMerchantRiskHistoryResponse:
      properties:
        history:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_risk_app.MerchantRiskHistoryDTO
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_risk_app.ListRiskRulesResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        rules:
          items:
            $ref: '#/components/schemas/psp_com_internal_risk_app.RiskRuleResponse'
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_risk_app.ListWhitelistResponse:
      properties:
        entries:
          items:
            $ref: '#/components/schemas/psp_com_internal_risk_app.WhitelistResponse'
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_risk_app.MarkFalsePositiveRequest:
      properties:
        reason:
          type: string
      required:
        - reason
      type: object
    psp_com_internal_risk_app.MerchantRiskHistoryDTO:
      properties:
        created_at:
          type: string
        dimension_scores:
          items:
            $ref: '#/components/schemas/psp_com_internal_risk_app.DimensionScoreDTO'
          type: array
        evaluated_at:
          type: string
        evaluated_by:
          type: string
        evaluation_notes:
          type: string
        evaluation_type:
          type: string
        id:
          type: string
        overall_score:
          type: integer
        previous_score:
          type: integer
        profile_id:
          type: string
        risk_level:
          type: string
        score_change:
          type: integer
        trigger_reason:
          type: string
      type: object
    psp_com_internal_risk_app.MerchantRiskProfileResponse:
      properties:
        created_at:
          type: string
        dimension_scores:
          items:
            $ref: '#/components/schemas/psp_com_internal_risk_app.DimensionScoreDTO'
          type: array
        evaluated_at:
          type: string
        evaluated_by:
          type: string
        evaluation_notes:
          type: string
        merchant_id:
          type: string
        overall_score:
          type: integer
        previous_score:
          type: integer
        profile_id:
          type: string
        risk_level:
          type: string
        score_change:
          type: integer
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        version:
          type: integer
      type: object
    psp_com_internal_risk_app.MerchantRiskSummaryDTO:
      properties:
        evaluated_at:
          type: string
        merchant_id:
          type: string
        overall_score:
          type: integer
        profile_id:
          type: string
        risk_level:
          type: string
        score_change:
          type: integer
      type: object
    psp_com_internal_risk_app.ResolveCaseRequest:
      properties:
        resolution:
          description: 'approved, blocked, reported_to_authorities, false_positive'
          type: string
        resolution_notes:
          type: string
      required:
        - resolution
        - resolution_notes
      type: object
    psp_com_internal_risk_app.RiskRuleResponse:
      properties:
        action:
          type: string
        created_at:
          type: string
        created_by:
          type: string
        id:
          type: string
        is_active:
          type: boolean
        merchant_id:
          type: string
        metadata:
          additionalProperties: true
          type: object
        payment_method:
          type: string
        priority:
          type: integer
        rule_code:
          type: string
        rule_config:
          additionalProperties: true
          type: object
        rule_name:
          type: string
        rule_type:
          type: string
        severity:
          type: string
        tenant_id:
          type: string
        transaction_type:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_risk_app.ScoreFactorDTO:
      properties:
        description:
          type: string
        impact:
          type: integer
        name:
          type: string
        value:
          type: string
      type: object
    psp_com_internal_risk_app.UpdateRiskRuleRequest:
      properties:
        action:
          type: string
        action_params:
          additionalProperties: true
          type: object
        applies_to:
          type: string
        description:
          type: string
        merchant_id:
          type: string
        payment_method:
          type: string
        priority:
          type: integer
        risk_score:
          type: integer
        rule_config:
          additionalProperties: true
          type: object
        rule_name:
          type: string
        rule_type:
          type: string
        severity:
          type: string
        transaction_type:
          type: string
      type: object
    psp_com_internal_risk_app.UsageResponse:
      properties:
        currency:
          type: string
        limit_amount:
          type: integer
        period_key:
          type: string
        period_type:
          type: string
        subject_id:
          type: string
        subject_type:
          type: string
        updated_at:
          type: string
        usage_percent:
          type: number
        used_amount:
          type: integer
      type: object
    psp_com_internal_risk_app.WhitelistResponse:
      properties:
        added_by:
          type: string
        created_at:
          type: string
        expires_at:
          type: string
        id:
          type: string
        list_type:
          type: string
        notes:
          type: string
        reason:
          type: string
        source_details:
          type: string
        source_type:
          type: string
        tenant_id:
          type: string
        value:
          type: string
      type: object
    psp_com_internal_scheduler_app.HistoryItemDTO:
      properties:
        duration_ms:
          type: integer
        finished_at:
          type: string
        id:
          type: string
        message:
          type: string
        started_at:
          type: string
        status:
          type: string
        triggered_by:
          type: string
      type: object
    psp_com_internal_scheduler_app.JobDTO:
      properties:
        tags:
          items:
            type: string
          type: array
        description:
          type: string
        failures:
          type: integer
        id:
          type: string
        is_manual:
          type: boolean
        last_run_at:
          type: string
        last_status:
          type: string
        name:
          type: string
        next_run_at:
          type: string
        owner:
          type: string
        schedule:
          type: string
        status:
          type: string
        successes:
          type: integer
      type: object
    psp_com_internal_scheduler_app.JobDetailResponse:
      properties:
        tags:
          items:
            type: string
          type: array
        description:
          type: string
        failures:
          type: integer
        id:
          type: string
        is_manual:
          type: boolean
        last_run_at:
          type: string
        last_status:
          type: string
        name:
          type: string
        next_run_at:
          type: string
        owner:
          type: string
        schedule:
          type: string
        status:
          type: string
        successes:
          type: integer
      type: object
    psp_com_internal_scheduler_app.JobHistoryResponse:
      properties:
        limit:
          type: integer
        offset:
          type: integer
        records:
          items:
            $ref: '#/components/schemas/psp_com_internal_scheduler_app.HistoryItemDTO'
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_scheduler_app.ListJobsResponse:
      properties:
        jobs:
          items:
            $ref: '#/components/schemas/psp_com_internal_scheduler_app.JobDTO'
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_scheduler_app.SchedulerStats:
      properties:
        last_failure_at:
          type: string
        paused_jobs:
          type: integer
        running_jobs:
          type: integer
        success_rate:
          type: number
        total_jobs:
          type: integer
      type: object
    psp_com_internal_scheduler_app.TriggerJobResponse:
      properties:
        execution_id:
          type: string
        job:
          $ref: '#/components/schemas/psp_com_internal_scheduler_app.JobDTO'
        message:
          type: string
        triggered_at:
          type: string
      type: object
    psp_com_internal_settlement_app.SettlementActionRequest:
      properties:
        action:
          description: >-
            操作类型: execute(执行), retry(重试), cancel(取消), approve(审批通过),
            reject(审批拒绝)
          enum:
            - execute
            - retry
            - cancel
            - approve
            - reject
          example: approve
          type: string
        params:
          additionalProperties: {}
          description: 扩展参数（可选）
          type: object
        reason:
          description: 操作原因/备注（cancel/reject 必填，approve 可选）
          example: 审核通过
          maxLength: 500
          type: string
      required:
        - action
      type: object
    psp_com_internal_settlement_app.SettlementActionResponse:
      properties:
        action:
          description: 执行的操作
          example: approve
          type: string
        changed_at:
          description: 变更时间
          example: '2024-01-01T00:00:00Z'
          type: string
        new_status:
          description: 变更后状态
          example: approved
          type: string
        old_status:
          description: 变更前状态
          example: pending_review
          type: string
        success:
          description: 操作是否成功
          example: true
          type: boolean
      type: object
    psp_com_internal_systemconfig_app.APIRateLimits:
      properties:
        burst_size:
          type: integer
        requests_per_minute:
          type: integer
        requests_per_second:
          type: integer
      type: object
    psp_com_internal_systemconfig_app.CategoryResponse:
      properties:
        code:
          type: string
        config_count:
          type: integer
        created_at:
          type: string
        depth:
          type: integer
        description:
          type: string
        display_order:
          type: integer
        icon:
          type: string
        id:
          type: string
        is_system:
          type: boolean
        name:
          type: string
        parent_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_systemconfig_app.CategoryTreeNode:
      properties:
        children:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_systemconfig_app.CategoryTreeNode
          type: array
        code:
          type: string
        config_count:
          type: integer
        description:
          type: string
        display_order:
          type: integer
        icon:
          type: string
        id:
          type: string
        is_system:
          type: boolean
        name:
          type: string
      type: object
    psp_com_internal_systemconfig_app.CategoryTreeResponse:
      properties:
        tree:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_systemconfig_app.CategoryTreeNode
          type: array
      type: object
    psp_com_internal_systemconfig_app.ConfigItem:
      properties:
        category:
          type: string
        description:
          type: string
        id:
          type: string
        is_readonly:
          type: boolean
        is_sensitive:
          type: boolean
        key:
          type: string
        updated_at:
          type: string
        value:
          type: string
        value_type:
          type: string
        version:
          type: integer
      type: object
    psp_com_internal_systemconfig_app.ConfigVersion:
      properties:
        change_reason:
          type: string
        changed_at:
          type: string
        changed_by:
          type: string
        config_id:
          type: string
        id:
          type: string
        new_value:
          type: string
        old_value:
          type: string
      type: object
    psp_com_internal_systemconfig_app.CreateCategoryRequest:
      properties:
        code:
          type: string
        description:
          type: string
        icon:
          type: string
        name:
          type: string
        parent_id:
          type: string
      required:
        - code
        - name
      type: object
    psp_com_internal_systemconfig_app.ListCategoriesResponse:
      properties:
        categories:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_systemconfig_app.CategoryResponse
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_systemconfig_app.ListConfigsResponse:
      properties:
        configs:
          items:
            $ref: '#/components/schemas/psp_com_internal_systemconfig_app.ConfigItem'
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_systemconfig_app.ListVersionsResponse:
      properties:
        total:
          type: integer
        versions:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_systemconfig_app.ConfigVersion
          type: array
      type: object
    psp_com_internal_systemconfig_app.MoveCategoryRequestBody:
      properties:
        new_parent_id:
          description: null for root level
          type: string
      type: object
    psp_com_internal_systemconfig_app.PaymentRateLimits:
      properties:
        requests_per_minute:
          type: integer
      type: object
    psp_com_internal_systemconfig_app.RateLimitItem:
      properties:
        description:
          type: string
        is_readonly:
          type: boolean
        key:
          type: string
        value:
          type: string
      type: object
    psp_com_internal_systemconfig_app.RateLimitsConfig:
      properties:
        api:
          $ref: '#/components/schemas/psp_com_internal_systemconfig_app.APIRateLimits'
        enabled:
          type: boolean
        items:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_systemconfig_app.RateLimitItem
          type: array
        payment:
          $ref: >-
            #/components/schemas/psp_com_internal_systemconfig_app.PaymentRateLimits
        webhook:
          $ref: >-
            #/components/schemas/psp_com_internal_systemconfig_app.WebhookRateLimits
      type: object
    psp_com_internal_systemconfig_app.UpdateCategoryRequest:
      properties:
        description:
          type: string
        icon:
          type: string
        name:
          type: string
      required:
        - name
      type: object
    psp_com_internal_systemconfig_app.UpdateConfigRequest:
      properties:
        reason:
          type: string
        value:
          type: string
      required:
        - value
      type: object
    psp_com_internal_systemconfig_app.UpdateRateLimitsRequest:
      properties:
        api:
          $ref: '#/components/schemas/psp_com_internal_systemconfig_app.APIRateLimits'
        enabled:
          type: boolean
        payment:
          $ref: >-
            #/components/schemas/psp_com_internal_systemconfig_app.PaymentRateLimits
        webhook:
          $ref: >-
            #/components/schemas/psp_com_internal_systemconfig_app.WebhookRateLimits
      required:
        - api
        - payment
        - webhook
      type: object
    psp_com_internal_systemconfig_app.WebhookRateLimits:
      properties:
        requests_per_minute:
          type: integer
      type: object
    psp_com_internal_telegram_app.ActivateAlertRequest:
      properties:
        activated_by:
          type: string
      required:
        - activated_by
      type: object
    psp_com_internal_telegram_app.ActivateBindingRequest:
      properties:
        binding_id:
          type: string
        updated_by:
          type: string
      required:
        - binding_id
        - updated_by
      type: object
    psp_com_internal_telegram_app.ActivateLargeTransactionRuleRequest:
      properties:
        activated_by:
          type: string
      required:
        - activated_by
      type: object
    psp_com_internal_telegram_app.BalanceAlertDTO:
      properties:
        alert_threshold:
          type: integer
        alert_type:
          type: string
        bot_group_binding_id:
          type: string
        cooldown_minutes:
          type: integer
        created_at:
          type: string
        created_by:
          type: string
        currency:
          type: string
        id:
          type: string
        last_notified_at:
          type: string
        merchant_account_id:
          type: string
        mute_until:
          type: string
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        updated_by:
          type: string
        version:
          type: integer
      type: object
    psp_com_internal_telegram_app.CreateGroupBindingRequest:
      properties:
        bot_id:
          type: string
        created_by:
          type: string
        enabled_features:
          description: Permission strings
          items:
            type: string
          type: array
        linked_account_ids:
          items:
            type: string
          type: array
        menu_config:
          description: JSON string
          type: string
        merchant_id:
          type: string
        telegram_chat_id:
          type: integer
        tenant_id:
          type: string
      required:
        - bot_id
        - created_by
        - merchant_id
        - telegram_chat_id
        - tenant_id
      type: object
    psp_com_internal_telegram_app.DeactivateAlertRequest:
      properties:
        deactivated_by:
          type: string
      required:
        - deactivated_by
      type: object
    psp_com_internal_telegram_app.DeactivateBindingRequest:
      properties:
        binding_id:
          type: string
        updated_by:
          type: string
      required:
        - binding_id
        - updated_by
      type: object
    psp_com_internal_telegram_app.DeactivateLargeTransactionRuleRequest:
      properties:
        deactivated_by:
          type: string
      required:
        - deactivated_by
      type: object
    psp_com_internal_telegram_app.DisableFeatureRequest:
      properties:
        binding_id:
          type: string
        feature:
          description: Permission string
          type: string
        updated_by:
          type: string
      required:
        - binding_id
        - feature
        - updated_by
      type: object
    psp_com_internal_telegram_app.EnableFeatureRequest:
      properties:
        binding_id:
          type: string
        feature:
          description: Permission string
          type: string
        updated_by:
          type: string
      required:
        - binding_id
        - feature
        - updated_by
      type: object
    psp_com_internal_telegram_app.GroupBindingResponse:
      properties:
        bot_id:
          type: string
        chat_title:
          type: string
        created_at:
          type: integer
        created_by:
          type: string
        enabled_features:
          items:
            type: string
          type: array
        id:
          type: string
        linked_account_ids:
          items:
            type: string
          type: array
        menu_config:
          type: string
        merchant_id:
          type: string
        status:
          $ref: >-
            #/components/schemas/psp_com_internal_telegram_domain_enums.BindingStatus
        telegram_chat_id:
          type: integer
        tenant_id:
          type: string
        updated_at:
          type: integer
        updated_by:
          type: string
        version:
          type: integer
      type: object
    psp_com_internal_telegram_app.HandlerCreateBalanceAlertRequest:
      properties:
        alert_threshold:
          minimum: 1
          type: integer
        alert_type:
          enum:
            - below
            - above
          type: string
        bot_group_binding_id:
          type: string
        cooldown_minutes:
          minimum: 1
          type: integer
        created_by:
          type: string
        currency:
          type: string
        merchant_account_id:
          type: string
        tenant_id:
          type: string
      required:
        - alert_threshold
        - alert_type
        - bot_group_binding_id
        - cooldown_minutes
        - created_by
        - currency
        - merchant_account_id
        - tenant_id
      type: object
    psp_com_internal_telegram_app.HandlerCreateLargeTransactionRuleRequest:
      properties:
        bot_group_binding_id:
          type: string
        created_by:
          type: string
        currency:
          type: string
        merchant_account_id:
          type: string
        min_amount:
          minimum: 1
          type: integer
        notify_payment_types:
          items:
            type: string
          type: array
        tenant_id:
          type: string
      required:
        - bot_group_binding_id
        - created_by
        - currency
        - min_amount
        - notify_payment_types
        - tenant_id
      type: object
    psp_com_internal_telegram_app.HandlerMuteAlertRequest:
      properties:
        duration_minutes:
          minimum: 1
          type: integer
        muted_by:
          type: string
      required:
        - duration_minutes
        - muted_by
      type: object
    psp_com_internal_telegram_app.HandlerUpdateBalanceAlertRequest:
      properties:
        alert_threshold:
          minimum: 1
          type: integer
        cooldown_minutes:
          minimum: 1
          type: integer
        updated_by:
          type: string
      required:
        - alert_threshold
        - cooldown_minutes
        - updated_by
      type: object
    psp_com_internal_telegram_app.HandlerUpdateLargeTransactionRuleRequest:
      properties:
        min_amount:
          minimum: 1
          type: integer
        notify_payment_types:
          items:
            type: string
          type: array
        updated_by:
          type: string
      required:
        - min_amount
        - notify_payment_types
        - updated_by
      type: object
    psp_com_internal_telegram_app.LargeTransactionRuleDTO:
      properties:
        bot_group_binding_id:
          type: string
        created_at:
          type: string
        created_by:
          type: string
        currency:
          type: string
        id:
          type: string
        merchant_account_id:
          type: string
        min_amount:
          type: integer
        notify_payment_types:
          items:
            type: string
          type: array
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        updated_by:
          type: string
        version:
          type: integer
      type: object
    psp_com_internal_telegram_app.ListBalanceAlertsResponse:
      properties:
        alerts:
          items:
            $ref: '#/components/schemas/psp_com_internal_telegram_app.BalanceAlertDTO'
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_telegram_app.ListGroupBindingsResponse:
      properties:
        bindings:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_telegram_app.GroupBindingResponse
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_telegram_app.OrderConfirmationDTO:
      properties:
        bot_group_binding_id:
          type: string
        confirm_comment:
          type: string
        confirmation_type:
          type: string
        confirmed_at:
          type: string
        confirmed_by:
          type: string
        created_at:
          type: string
        expires_at:
          type: string
        id:
          type: string
        invoice_id:
          type: string
        invoice_number:
          type: string
        merchant_id:
          type: string
        payment_method:
          type: string
        status:
          type: string
        telegram_message_id:
          type: integer
        tenant_id:
          type: string
        updated_at:
          type: string
        version:
          type: integer
      type: object
    psp_com_internal_telegram_app.UpdateLinkedAccountsRequest:
      properties:
        binding_id:
          type: string
        linked_account_ids:
          items:
            type: string
          type: array
        updated_by:
          type: string
      required:
        - binding_id
        - linked_account_ids
        - updated_by
      type: object
    psp_com_internal_telegram_domain_enums.BindingStatus:
      enum:
        - pending
        - active
        - inactive
        - suspended
      type: string
      x-enum-comments:
        BindingStatusActive: 已激活
        BindingStatusInactive: 已停用
        BindingStatusPending: 待验证
        BindingStatusSuspended: 已暂停
      x-enum-descriptions:
        - 待验证
        - 已激活
        - 已停用
        - 已暂停
      x-enum-varnames:
        - BindingStatusPending
        - BindingStatusActive
        - BindingStatusInactive
        - BindingStatusSuspended
    psp_com_internal_tenant_app.AssignRoleRequest:
      properties:
        role_id:
          type: string
      required:
        - role_id
      type: object
    psp_com_internal_tenant_app.AssignUserRoleRequest:
      properties:
        role_id:
          type: string
      required:
        - role_id
      type: object
    psp_com_internal_tenant_app.AuthLoginRequest:
      properties:
        device_fingerprint:
          type: string
        email:
          type: string
        password:
          minLength: 8
          type: string
        tenant_id:
          type: string
      required:
        - email
        - password
        - tenant_id
      type: object
    psp_com_internal_tenant_app.AuthLoginResponse:
      properties:
        access_token:
          type: string
        expires_in:
          type: integer
        mfa_token:
          type: string
        refresh_token:
          type: string
        requires_mfa:
          type: boolean
        user:
          $ref: '#/components/schemas/psp_com_internal_tenant_app.AuthUserDTO'
      type: object
    psp_com_internal_tenant_app.AuthRefreshTokenRequest:
      properties:
        refresh_token:
          type: string
      required:
        - refresh_token
      type: object
    psp_com_internal_tenant_app.AuthUserDTO:
      properties:
        email:
          type: string
        id:
          type: string
        name:
          type: string
        role:
          type: string
        tenant_id:
          type: string
      type: object
    psp_com_internal_tenant_app.AuthVerifyMFARequest:
      properties:
        device_fingerprint:
          type: string
        device_name:
          type: string
        passkey_credential:
          items:
            type: integer
          type: array
        tenant_id:
          type: string
        totp_code:
          type: string
        trust_device:
          type: boolean
        user_id:
          type: string
      required:
        - tenant_id
        - user_id
      type: object
    psp_com_internal_tenant_app.BindPasskeyInput:
      properties:
        attestation_response:
          additionalProperties: true
          type: object
        device_name:
          type: string
      required:
        - attestation_response
      type: object
    psp_com_internal_tenant_app.ChangePasswordRequest:
      properties:
        new_password:
          minLength: 8
          type: string
      required:
        - new_password
      type: object
    psp_com_internal_tenant_app.CheckPermissionRequest:
      properties:
        permission:
          type: string
      required:
        - permission
      type: object
    psp_com_internal_tenant_app.CheckPermissionResponse:
      properties:
        checked_at:
          type: string
        has_permission:
          type: boolean
        results:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_tenant_app.PermissionCheckResult
          type: array
      type: object
    psp_com_internal_tenant_app.CheckPermissionsRequest:
      properties:
        permissions:
          items:
            type: string
          minItems: 1
          type: array
        require_all:
          description: 'true: AND, false: OR'
          type: boolean
      required:
        - permissions
      type: object
    psp_com_internal_tenant_app.CreateRoleRequest:
      properties:
        code:
          maxLength: 50
          minLength: 2
          type: string
        description:
          maxLength: 500
          type: string
        name:
          maxLength: 100
          minLength: 2
          type: string
        permissions:
          items:
            type: string
          type: array
        priority:
          maximum: 1000
          minimum: 0
          type: integer
        role_type:
          enum:
            - super_admin
            - admin
            - operator
            - viewer
            - custom
          type: string
      required:
        - code
        - name
        - role_type
      type: object
    psp_com_internal_tenant_app.CreateTenantUserRequest:
      properties:
        email:
          type: string
        name:
          type: string
        password:
          minLength: 8
          type: string
        role_id:
          type: string
        tenant_id:
          type: string
      required:
        - email
        - name
        - password
        - role_id
      type: object
    psp_com_internal_tenant_app.ListUsersResponse:
      properties:
        total:
          type: integer
        users:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_tenant_app.TenantUserResponse
          type: array
      type: object
    psp_com_internal_tenant_app.MFAMethodInfo:
      properties:
        created_at:
          type: string
        device_name:
          type: string
        id:
          type: string
        is_active:
          type: boolean
        is_primary:
          type: boolean
        last_used_at:
          type: string
        type:
          type: string
      type: object
    psp_com_internal_tenant_app.MFAMethodsResponse:
      properties:
        methods:
          items:
            $ref: '#/components/schemas/psp_com_internal_tenant_app.MFAMethodInfo'
          type: array
      type: object
    psp_com_internal_tenant_app.MFAStatusResponse:
      properties:
        backup_codes_left:
          type: integer
        last_used_at:
          type: string
        mfa_enabled:
          type: boolean
        passkey_count:
          type: integer
        totp_configured:
          type: boolean
      type: object
    psp_com_internal_tenant_app.MeMFAMethodResponse:
      properties:
        created_at:
          description: 创建时间
          type: string
        device_name:
          description: 设备名称 (Passkey)
          type: string
        id:
          description: MFA ID
          type: string
        is_enabled:
          description: 是否启用
          type: boolean
        is_primary:
          description: 是否为主要方法
          type: boolean
        last_used_at:
          description: 最后使用时间
          type: string
        type:
          description: MFA 类型 (totp/passkey)
          type: string
      type: object
    psp_com_internal_tenant_app.MeMFAMethodsResponse:
      properties:
        methods:
          description: MFA 方法列表
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_tenant_app.MeMFAMethodResponse
          type: array
      type: object
    psp_com_internal_tenant_app.MeMFAStatusResponse:
      properties:
        has_mfa:
          description: 是否已配置 MFA
          type: boolean
        methods_count:
          description: 已配置的 MFA 方法数量
          type: integer
        mfa_enabled:
          description: MFA 是否已启用
          type: boolean
        primary_type:
          description: 主要 MFA 类型 (totp/passkey)
          type: string
      type: object
    psp_com_internal_tenant_app.MePermissionsResponse:
      properties:
        permissions:
          description: '权限代码列表,如 ["merchants:view", "merchants:create"]'
          items:
            type: string
          type: array
        roles:
          description: '角色名称列表,如 ["admin", "operator"]'
          items:
            type: string
          type: array
      type: object
    psp_com_internal_tenant_app.MeTOTPBindRequest:
      properties:
        setup_id:
          description: 设置 ID
          type: string
        verify_code:
          description: TOTP 验证码
          type: string
      required:
        - setup_id
        - verify_code
      type: object
    psp_com_internal_tenant_app.MeTOTPBindResponse:
      properties:
        message:
          description: 提示信息
          type: string
        success:
          description: 是否成功
          type: boolean
      type: object
    psp_com_internal_tenant_app.MeTOTPSetupResponse:
      properties:
        backup_codes:
          description: 备用码列表
          items:
            type: string
          type: array
        expires_at:
          description: 设置过期时间
          type: string
        secret:
          description: Base32 编码的 TOTP 密钥
          type: string
        setup_id:
          description: '设置 ID,用于后续绑定'
          type: string
        tenant_name:
          description: 租户名称(用作 TOTP issuer)
          type: string
        username:
          description: 用户名/邮箱(用于 TOTP 标签)
          type: string
      type: object
    psp_com_internal_tenant_app.PermissionCheckResult:
      properties:
        allowed:
          type: boolean
        permission:
          type: string
      type: object
    psp_com_internal_tenant_app.PermissionListResponse:
      properties:
        permissions:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_tenant_app.PermissionResponse
          type: array
        total:
          type: integer
      type: object
    psp_com_internal_tenant_app.PermissionResponse:
      properties:
        action:
          type: string
        category:
          type: string
        code:
          type: string
        description:
          type: string
        name:
          type: string
        resource:
          type: string
      type: object
    psp_com_internal_tenant_app.RegenerateBackupCodesInput:
      properties:
        verify_code:
          type: string
      required:
        - verify_code
      type: object
    psp_com_internal_tenant_app.RevokeAllTokensRequest:
      properties:
        reason:
          description: >-
            Reason 撤销原因（必填）

            可选值: password_change, security_breach, admin_action, mfa_reset,
            account_locked, user_request
          type: string
      required:
        - reason
      type: object
    psp_com_internal_tenant_app.RevokeTokenResponse:
      properties:
        message:
          type: string
        success:
          type: boolean
      type: object
    psp_com_internal_tenant_app.RoleResponse:
      properties:
        code:
          type: string
        created_at:
          type: string
        description:
          type: string
        id:
          type: string
        is_active:
          type: boolean
        is_system:
          type: boolean
        name:
          type: string
        permissions:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_tenant_app.PermissionResponse
          type: array
        priority:
          type: integer
        role_type:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_tenant_app.RoleSummaryResponse:
      properties:
        code:
          type: string
        description:
          type: string
        id:
          type: string
        is_active:
          type: boolean
        is_system:
          type: boolean
        name:
          type: string
        permission_count:
          type: integer
        priority:
          type: integer
        role_type:
          type: string
      type: object
    psp_com_internal_tenant_app.SetPrimaryMFAInput:
      properties:
        mfa_id:
          type: string
      required:
        - mfa_id
      type: object
    psp_com_internal_tenant_app.SetRolePermissionsRequest:
      properties:
        permissions:
          items:
            type: string
          type: array
      required:
        - permissions
      type: object
    psp_com_internal_tenant_app.TOTPBindInput:
      properties:
        setup_id:
          type: string
        verify_code:
          type: string
      required:
        - setup_id
        - verify_code
      type: object
    psp_com_internal_tenant_app.TenantPasskeyAuthOptionsResponse:
      properties:
        allow_credentials:
          items:
            additionalProperties: {}
            type: object
          type: array
        challenge:
          type: string
        raw_options:
          additionalProperties: true
          type: object
        rp_id:
          type: string
        timeout:
          type: integer
        user_verification:
          type: string
      type: object
    psp_com_internal_tenant_app.TenantPasskeyBindResponse:
      properties:
        created_at:
          type: string
        credential_id:
          type: string
        device_name:
          type: string
        mfa_id:
          type: string
      type: object
    psp_com_internal_tenant_app.TenantPasskeyRegistrationOptionsResponse:
      properties:
        attestation:
          type: string
        authenticator:
          additionalProperties: {}
          type: object
        challenge:
          type: string
        exclude_credentials:
          items:
            additionalProperties: {}
            type: object
          type: array
        pub_key_cred_params:
          items:
            additionalProperties: {}
            type: object
          type: array
        raw_options:
          additionalProperties: true
          type: object
        rp_id:
          type: string
        rp_name:
          type: string
        timeout:
          type: integer
        user_display_name:
          type: string
        user_id:
          type: string
        user_name:
          type: string
      type: object
    psp_com_internal_tenant_app.TenantPasskeyVerifyResponse:
      properties:
        credential_id:
          type: string
        last_used_at:
          type: string
        success:
          type: boolean
      type: object
    psp_com_internal_tenant_app.TenantRegenerateBackupCodesResponse:
      properties:
        backupCodes:
          items:
            type: string
          type: array
      type: object
    psp_com_internal_tenant_app.TenantTOTPInitResponse:
      properties:
        backup_codes:
          description: 备用码
          items:
            type: string
          type: array
        expires_at:
          description: 过期时间
          type: string
        secret:
          description: Base32 编码的 TOTP 密钥
          type: string
        setup_id:
          description: Pending 设置 ID
          type: string
        tenant_name:
          description: 租户名称（用作 TOTP issuer）
          type: string
        username:
          description: 用户名/邮箱（用于 TOTP 标签）
          type: string
      type: object
    psp_com_internal_tenant_app.TenantUserResponse:
      properties:
        created_at:
          type: string
        email:
          type: string
        id:
          type: string
        keycloak_user_id:
          type: string
        mfa_enabled:
          type: boolean
        name:
          type: string
        role_code:
          type: string
        role_id:
          type: string
        role_name:
          type: string
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
      type: object
    psp_com_internal_tenant_app.UpdateRoleRequest:
      properties:
        description:
          maxLength: 500
          type: string
        is_active:
          type: boolean
        name:
          maxLength: 100
          minLength: 2
          type: string
        priority:
          maximum: 1000
          minimum: 0
          type: integer
      type: object
    psp_com_internal_tenant_app.UpdateTenantUserRequest:
      properties:
        name:
          type: string
        role_id:
          type: string
      type: object
    psp_com_internal_tenant_app.UserPermissionsResponse:
      properties:
        effective_at:
          type: string
        permission_codes:
          items:
            type: string
          type: array
        roles:
          items:
            $ref: '#/components/schemas/psp_com_internal_tenant_app.UserRoleResponse'
          type: array
        user_id:
          type: string
      type: object
    psp_com_internal_tenant_app.UserRoleResponse:
      properties:
        assigned_at:
          type: string
        role_code:
          type: string
        role_id:
          type: string
        role_name:
          type: string
      type: object
    psp_com_internal_tenant_app.VerifyPasskeyInput:
      properties:
        assertion_response:
          additionalProperties: true
          type: object
      required:
        - assertion_response
      type: object
    psp_com_internal_transaction_app.GetTransactionHistoryResponse:
      properties:
        histories:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_transaction_app.TransactionStatusHistoryDTO
          type: array
        transaction_id:
          example: 650e8400-e29b-41d4-a716-446655440000
          type: string
      type: object
    psp_com_internal_transaction_app.GetTransactionResponse:
      properties:
        events:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_transaction_app.TransactionStatusHistoryDTO
          type: array
        transaction:
          $ref: >-
            #/components/schemas/psp_com_internal_transaction_app.TransactionExtendedDTO
      type: object
    psp_com_internal_transaction_app.SearchResponse:
      properties:
        limit:
          example: 20
          type: integer
        offset:
          example: 0
          type: integer
        total:
          example: 100
          type: integer
        transactions:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_transaction_app.TransactionDTO
          type: array
      type: object
    psp_com_internal_transaction_app.TransactionDTO:
      properties:
        account_name:
          example: ACC001
          type: string
        amount:
          description: 金额字符串
          example: '100.00'
          type: string
        authorized_at:
          description: |-
            TIMELINE 信息
            AuthorizedAt 授权时间（风控通过并请求上游的时间）
          example: '2024-01-01T12:00:30Z'
          type: string
        channel_code:
          description: ChannelCode 渠道代码（唯一标识符）
          example: sitobank_pix_br_001
          type: string
        channel_fee:
          example: '0.50'
          type: string
        channel_id:
          description: |-
            ROUTE & CHANNEL 信息
            ChannelID 实际使用的支付渠道ID
          example: 850e8400-e29b-41d4-a716-446655440003
          type: string
        channel_name:
          description: ChannelName 渠道名称（可读性描述）
          example: Sitobank PIX Channel
          type: string
        completed_at:
          description: CompletedAt 完成时间（交易到达终态的时间：paid/failed/cancelled/expired）
          example: '2024-01-01T12:01:00Z'
          type: string
        created_at:
          example: '2024-01-01T12:00:00Z'
          type: string
        currency:
          example: BRL
          type: string
        customer_email:
          example: john@example.com
          type: string
        customer_name:
          description: 客户信息（从 JSON 解析）
          example: John Doe
          type: string
        customer_tax_id:
          example: '12345678901'
          type: string
        failure_reason:
          example: Insufficient funds
          type: string
        merchant_account_id:
          example: 730e8400-e29b-41d4-a716-446655440002
          type: string
        merchant_fee:
          example: '1.50'
          type: string
        merchant_id:
          example: 720e8400-e29b-41d4-a716-446655440001
          type: string
        merchant_name:
          description: 扩展字段
          example: Test Merchant
          type: string
        merchant_order_id:
          example: ORDER-123456
          type: string
        net_amount:
          description: 计算字段：Amount - MerchantFee
          example: '98.00'
          type: string
        original_intent_id:
          description: 退款特有字段（仅 invoice_refund 和 transfer_refund 有值）
          example: 650e8400-e29b-41d4-a716-446655440000
          type: string
        original_order_id:
          description: 原始商户订单号
          example: ORDER-123456
          type: string
        payment_method:
          example: pix
          type: string
        provider_code:
          description: ProviderCode 通道提供商代码
          example: sitobank
          type: string
        provider_name:
          description: ProviderName 通道提供商名称
          example: Sitobank
          type: string
        provider_refund_id:
          description: 渠道退款 ID
          example: PROV-RF-789
          type: string
        provider_transaction_id:
          example: E2E-789
          type: string
        provider_type:
          description: >-
            ProviderType 通道提供商类型：bank(银行), gateway(支付网关), aggregator(聚合商),
            psp(支付服务商)
          example: bank
          type: string
        reason:
          description: 退款原因
          example: Customer request
          type: string
        refund_number:
          description: 退款单号
          example: RF-12345
          type: string
        refunded_amount:
          description: 已退款金额
          example: '50.00'
          type: string
        risk_decision:
          description: >-
            RiskDecision 风控决策：approved(通过), rejected(拒绝), pending_review(待审核),
            flagged(标记)
          example: approved
          type: string
        risk_level:
          description: >-
            RiskLevel 风险等级：low(0-24), medium(25-49), high(50-79),
            critical(80-100)
          example: medium
          type: string
        risk_score:
          description: |-
            风险评分信息
            RiskScore 风险评分（0-100，越高风险越大）
          example: '45.50'
          type: string
        routing_algorithm:
          description: >-
            RoutingAlgorithm 路由算法：priority(优先级), weighted(加权), smart(智能路由),
            least_cost(最低成本)
          example: priority
          type: string
        routing_strategy_id:
          description: RoutingStrategyID 使用的路由策略ID（fallback路由时为空）
          example: 950e8400-e29b-41d4-a716-446655440004
          type: string
        state:
          example: payment_received
          type: string
        status:
          example: completed
          type: string
        tenant_id:
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        transaction_id:
          example: 650e8400-e29b-41d4-a716-446655440000
          type: string
        transaction_type:
          description: 'invoice, invoice_refund, transfer, transfer_refund'
          example: invoice
          type: string
        updated_at:
          example: '2024-01-01T12:01:00Z'
          type: string
        webhook_status:
          description: 'sent, pending, failed, none'
          example: sent
          type: string
      type: object
    psp_com_internal_transaction_app.TransactionExtendedDTO:
      properties:
        account_name:
          example: ACC001
          type: string
        amount:
          description: 金额字符串
          example: '100.00'
          type: string
        authorized_at:
          description: |-
            TIMELINE 信息
            AuthorizedAt 授权时间（风控通过并请求上游的时间）
          example: '2024-01-01T12:00:30Z'
          type: string
        channel_code:
          description: ChannelCode 渠道代码（唯一标识符）
          example: sitobank_pix_br_001
          type: string
        channel_fee:
          example: '0.50'
          type: string
        channel_id:
          description: |-
            ROUTE & CHANNEL 信息
            ChannelID 实际使用的支付渠道ID
          example: 850e8400-e29b-41d4-a716-446655440003
          type: string
        channel_name:
          description: ChannelName 渠道名称（可读性描述）
          example: Sitobank PIX Channel
          type: string
        completed_at:
          description: CompletedAt 完成时间（交易到达终态的时间：paid/failed/cancelled/expired）
          example: '2024-01-01T12:01:00Z'
          type: string
        created_at:
          example: '2024-01-01T12:00:00Z'
          type: string
        currency:
          example: BRL
          type: string
        customer_email:
          example: john@example.com
          type: string
        customer_name:
          description: 客户信息（从 JSON 解析）
          example: John Doe
          type: string
        customer_tax_id:
          example: '12345678901'
          type: string
        failure_reason:
          example: Insufficient funds
          type: string
        merchant_account_id:
          example: 730e8400-e29b-41d4-a716-446655440002
          type: string
        merchant_fee:
          example: '1.50'
          type: string
        merchant_id:
          example: 720e8400-e29b-41d4-a716-446655440001
          type: string
        merchant_name:
          description: 扩展字段
          example: Test Merchant
          type: string
        merchant_order_id:
          example: ORDER-123456
          type: string
        net_amount:
          description: 计算字段：Amount - MerchantFee
          example: '98.00'
          type: string
        original_intent_id:
          description: 退款特有字段（仅 invoice_refund 和 transfer_refund 有值）
          example: 650e8400-e29b-41d4-a716-446655440000
          type: string
        original_order_id:
          description: 原始商户订单号
          example: ORDER-123456
          type: string
        payment_method:
          example: pix
          type: string
        provider_code:
          description: ProviderCode 通道提供商代码
          example: sitobank
          type: string
        provider_name:
          description: ProviderName 通道提供商名称
          example: Sitobank
          type: string
        provider_refund_id:
          description: 渠道退款 ID
          example: PROV-RF-789
          type: string
        provider_transaction_id:
          example: E2E-789
          type: string
        provider_type:
          description: >-
            ProviderType 通道提供商类型：bank(银行), gateway(支付网关), aggregator(聚合商),
            psp(支付服务商)
          example: bank
          type: string
        reason:
          description: 退款原因
          example: Customer request
          type: string
        refund_number:
          description: 退款单号
          example: RF-12345
          type: string
        refunded_amount:
          description: 已退款金额
          example: '50.00'
          type: string
        risk_decision:
          description: >-
            RiskDecision 风控决策：approved(通过), rejected(拒绝), pending_review(待审核),
            flagged(标记)
          example: approved
          type: string
        risk_level:
          description: >-
            RiskLevel 风险等级：low(0-24), medium(25-49), high(50-79),
            critical(80-100)
          example: medium
          type: string
        risk_score:
          description: |-
            风险评分信息
            RiskScore 风险评分（0-100，越高风险越大）
          example: '45.50'
          type: string
        routing_algorithm:
          description: >-
            RoutingAlgorithm 路由算法：priority(优先级), weighted(加权), smart(智能路由),
            least_cost(最低成本)
          example: priority
          type: string
        routing_strategy_id:
          description: RoutingStrategyID 使用的路由策略ID（fallback路由时为空）
          example: 950e8400-e29b-41d4-a716-446655440004
          type: string
        state:
          example: payment_received
          type: string
        status:
          example: completed
          type: string
        tenant_id:
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        transaction_id:
          example: 650e8400-e29b-41d4-a716-446655440000
          type: string
        transaction_type:
          description: 'invoice, invoice_refund, transfer, transfer_refund'
          example: invoice
          type: string
        updated_at:
          example: '2024-01-01T12:01:00Z'
          type: string
        webhook_status:
          description: 'sent, pending, failed, none'
          example: sent
          type: string
      type: object
    psp_com_internal_transaction_app.TransactionStatusHistoryDTO:
      properties:
        created_at:
          example: '2024-01-01T12:00:00Z'
          type: string
        id:
          example: 750e8400-e29b-41d4-a716-446655440000
          type: string
        metadata:
          additionalProperties: {}
          type: object
        new_status:
          example: completed
          type: string
        old_status:
          example: pending
          type: string
        operator_id:
          example: 720e8400-e29b-41d4-a716-446655440002
          type: string
        operator_type:
          description: 'system, user, admin'
          example: system
          type: string
        reason:
          example: Payment successful
          type: string
      type: object
    psp_com_internal_treasury_app.BatchImportRatesRequest:
      properties:
        import_type:
          description: 'scheduled, manual, api'
          example: manual
          type: string
        rates:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_treasury_app.CreateExchangeRateRequest
          type: array
        source:
          example: bank_api
          type: string
        source_ref:
          example: IMPORT-2024-001
          type: string
      required:
        - rates
        - source
      type: object
    psp_com_internal_treasury_app.CreateExchangeRateRequest:
      properties:
        ask_rate:
          example: '5.55'
          type: string
        base_currency:
          example: USD
          type: string
        bid_rate:
          example: '5.45'
          type: string
        mid_rate:
          example: '5.50'
          type: string
        quote_currency:
          example: BRL
          type: string
        source:
          example: internal
          type: string
        source_ref:
          example: BCB-2024-001
          type: string
        validity_mins:
          description: 有效期(分钟)，默认15
          example: 15
          type: integer
      required:
        - ask_rate
        - base_currency
        - bid_rate
        - mid_rate
        - quote_currency
        - source
      type: object
    psp_com_internal_treasury_app.CreateMarkupConfigRequest:
      properties:
        base_currency:
          example: USD
          type: string
        default_markup_rate:
          example: '0.5'
          type: string
        merchant_id:
          example: merchant-001
          type: string
        quote_currency:
          example: BRL
          type: string
        scope:
          example: merchant
          type: string
        tiers:
          items:
            $ref: '#/components/schemas/psp_com_internal_treasury_app.MarkupTierDTO'
          type: array
      required:
        - default_markup_rate
        - scope
      type: object
    psp_com_internal_treasury_app.CurrencyConfigDTO:
      properties:
        currency:
          example: USD
          type: string
        is_enabled:
          example: true
          type: boolean
        is_settlement_currency:
          example: true
          type: boolean
        max_amount:
          example: '1000000'
          type: string
        min_amount:
          example: '100'
          type: string
      type: object
    psp_com_internal_treasury_app.EnableCurrencyRequest:
      properties:
        currency:
          example: USD
          type: string
        is_settlement_currency:
          example: true
          type: boolean
      required:
        - currency
      type: object
    psp_com_internal_treasury_app.FXConvertRequest:
      properties:
        business_id:
          example: inv-001
          type: string
        business_type:
          description: 'invoice, transfer, settlement'
          example: invoice
          type: string
        idempotency_key:
          example: fx-convert-001
          type: string
        merchant_id:
          example: merchant-001
          type: string
        source_amount:
          example: '1000.00'
          type: string
        source_currency:
          example: USD
          type: string
        target_amount:
          example: '5500.00'
          type: string
        target_currency:
          example: BRL
          type: string
      required:
        - business_id
        - business_type
        - idempotency_key
        - merchant_id
        - source_currency
        - target_currency
      type: object
    psp_com_internal_treasury_app.FXQuoteRequest:
      properties:
        merchant_id:
          description: 商户ID (用于获取 Markup 配置)
          example: merchant-001
          type: string
        source_amount:
          description: 源金额 (与 target_amount 二选一)
          example: '1000.00'
          type: string
        source_currency:
          example: USD
          type: string
        target_amount:
          description: 目标金额 (与 source_amount 二选一)
          example: '5500.00'
          type: string
        target_currency:
          example: BRL
          type: string
      required:
        - source_currency
        - target_currency
      type: object
    psp_com_internal_treasury_app.MarkupTierDTO:
      properties:
        currency:
          example: USD
          type: string
        markup_rate:
          example: '0.3'
          type: string
        max_amount:
          example: '10000'
          type: string
        min_amount:
          example: '0'
          type: string
      type: object
    psp_com_internal_treasury_app.UpdateCurrencyWhitelistRequest:
      properties:
        currencies:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_treasury_app.CurrencyConfigDTO
          type: array
      required:
        - currencies
      type: object
    psp_com_internal_treasury_app.UpdateMarkupConfigRequest:
      properties:
        default_markup_rate:
          example: '0.6'
          type: string
        is_active:
          example: true
          type: boolean
        tiers:
          items:
            $ref: '#/components/schemas/psp_com_internal_treasury_app.MarkupTierDTO'
          type: array
      type: object
    psp_com_internal_webhook_app.ProviderStats:
      properties:
        completed_count:
          type: integer
        failed_count:
          type: integer
        provider:
          type: string
        success_rate:
          type: number
        total_count:
          type: integer
      type: object
    psp_com_internal_webhook_app.TimeRangeStats:
      properties:
        completed_count:
          type: integer
        failed_count:
          type: integer
        success_rate:
          type: number
        total_count:
          type: integer
      type: object
    psp_com_internal_webhook_app.WebhookLogStats:
      properties:
        avg_process_time_ms:
          description: 平均处理时间
          type: integer
        by_provider:
          additionalProperties:
            $ref: '#/components/schemas/psp_com_internal_webhook_app.ProviderStats'
          type: object
        by_type:
          additionalProperties:
            $ref: '#/components/schemas/psp_com_internal_webhook_app.WebhookTypeStats'
          type: object
        completed_count:
          type: integer
        dlq_count:
          type: integer
        failed_count:
          type: integer
        last_24_hours:
          $ref: '#/components/schemas/psp_com_internal_webhook_app.TimeRangeStats'
        last_7_days:
          $ref: '#/components/schemas/psp_com_internal_webhook_app.TimeRangeStats'
        pending_count:
          type: integer
        success_rate:
          description: 成功率 (%)
          type: number
        total_count:
          type: integer
      type: object
    psp_com_internal_webhook_app.WebhookTypeStats:
      properties:
        completed_count:
          type: integer
        failed_count:
          type: integer
        success_rate:
          type: number
        total_count:
          type: integer
        webhook_type:
          type: string
      type: object
    psp_com_internal_webhook_merchant_app.DeliveryDetail:
      properties:
        completed_at:
          type: string
        created_at:
          type: string
        event_id:
          type: string
        event_type:
          type: string
        failed_at:
          type: string
        http_status_code:
          type: integer
        id:
          type: string
        latency_ms:
          type: number
        max_retries:
          type: integer
        merchant_id:
          type: string
        message:
          type: string
        next_retry_at:
          type: string
        payload:
          additionalProperties: true
          type: object
        response_body:
          type: string
        retry_count:
          type: integer
        status:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        url:
          type: string
      type: object
    psp_com_internal_webhook_merchant_app.DeliveryListResult:
      properties:
        items:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_webhook_merchant_app.DeliveryDetail
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_internal_webhook_merchant_app.DeliveryStatsResult:
      properties:
        avg_latency_ms:
          type: number
        avg_retry:
          type: number
        failed:
          type: integer
        success:
          type: integer
        success_rate:
          type: number
        total:
          type: integer
      type: object
    psp_com_internal_webhook_merchant_app.RotateSecretResult:
      properties:
        message:
          type: string
        rotated_at:
          type: string
        secret:
          type: string
      type: object
    psp_com_internal_webhook_merchant_app.WebhookConfigView:
      properties:
        enabled:
          type: boolean
        headers:
          additionalProperties:
            type: string
          type: object
        merchant_id:
          type: string
        secret_masked:
          type: string
        tenant_id:
          type: string
        updated_at:
          type: string
        url:
          type: string
      type: object
    psp_com_pkg_apierror.APIError:
      properties:
        code:
          $ref: '#/components/schemas/psp_com_pkg_apierror.Code'
        details: {}
        message:
          type: string
      type: object
    psp_com_pkg_apierror.Code:
      enum:
        - SUCCESS
        - INTERNAL_ERROR
        - INVALID_REQUEST
        - VALIDATION_ERROR
        - UNAUTHORIZED
        - FORBIDDEN
        - NOT_FOUND
        - CONFLICT
        - TOO_MANY_REQUESTS
        - REQUEST_TIMEOUT
        - NOT_IMPLEMENTED
        - SERVICE_UNAVAILABLE
        - MERCHANT_NOT_FOUND
        - MERCHANT_INACTIVE
        - MERCHANT_SUSPENDED
        - IP_NOT_WHITELISTED
        - INVALID_SIGNATURE
        - SIGNATURE_INVALID
        - SIGNATURE_EXPIRED
        - DUPLICATE_IDEMPOTENCY_KEY
        - INVOICE_NOT_FOUND
        - INVOICE_EXPIRED
        - INVOICE_ALREADY_PAID
        - INVOICE_CANCELED
        - INVOICE_ALREADY_CANCELED
        - INVOICE_CANNOT_CANCEL
        - INVOICE_AML_BLOCKED
        - INVALID_AMOUNT
        - INVALID_CURRENCY
        - TRANSFER_NOT_FOUND
        - TRANSFER_FAILED
        - TRANSFER_PENDING
        - INSUFFICIENT_FUNDS
        - INVALID_BENEFICIARY
        - REFUND_NOT_FOUND
        - REFUND_FAILED
        - REFUND_NOT_ALLOWED
        - REFUND_AMOUNT_EXCEEDED
        - ACCOUNT_NOT_FOUND
        - ACCOUNT_FROZEN
        - ACCOUNT_CLOSED
        - INSUFFICIENT_BALANCE
        - BANK_ACCOUNT_NOT_FOUND
        - FEE_NOT_FOUND
        - INVALID_PERCENTAGE_RATE
        - INVALID_ALERT_THRESHOLD
        - RISK_REJECTED
        - RISK_REVIEW
        - AML_CHECK_FAILED
        - CHANNEL_NOT_AVAILABLE
        - CHANNEL_TIMEOUT
        - CHANNEL_ERROR
        - ROUTING_STRATEGY_CODE_DUPLICATE
        - USER_NOT_FOUND
        - INVALID_PASSWORD
        - PASSWORD_TOO_WEAK
        - EMAIL_ALREADY_EXISTS
        - AGENT_NOT_FOUND
        - AGENT_CODE_DUPLICATE
        - AGENT_INVALID_STATUS
        - AGENT_ALREADY_ACTIVE
        - AGENT_ALREADY_SUSPENDED
        - COMMISSION_RULE_NOT_FOUND
        - COMMISSION_RULE_LIMIT_REACHED
        - ACCOUNT_LOCKED
        - ACCOUNT_INACTIVE
        - INVALID_CREDENTIALS
        - INVALID_MFA_CODE
        - INVALID_TOKEN
        - MFA_ALREADY_BOUND
        - MFA_SETUP_EXPIRED
        - MFA_SETUP_NOT_FOUND
        - MFA_NOT_FOUND
        - WEBAUTHN_NOT_CONFIGURED
      type: string
      x-enum-comments:
        CodeAccountInactive: 账户已停用
        CodeAccountLocked: 账户已锁定
        CodeInvalidAlertThreshold: 'Issue #2983: 告警阈值必须在 0-1.0 范围内'
        CodeInvalidCredentials: 凭证无效
        CodeInvalidMFACode: MFA 验证码无效
        CodeInvalidPercentageRate: 'Issue #2983: 费率必须在 0-1.0 范围内'
        CodeInvalidToken: Token 无效
        CodeMFAAlreadyBound: MFA 已绑定
        CodeMFANotFound: MFA 配置不存在
        CodeMFASetupExpired: MFA 设置已过期
        CodeMFASetupNotFound: MFA 设置不存在
        CodeServiceUnavailable: 服务暂时不可用
        CodeValidationError: 参数验证失败
        CodeWebAuthnNotConfigured: WebAuthn 未配置
      x-enum-descriptions:
        - ''
        - ''
        - ''
        - 参数验证失败
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - 服务暂时不可用
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - 'Issue #2983: 费率必须在 0-1.0 范围内'
        - 'Issue #2983: 告警阈值必须在 0-1.0 范围内'
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - ''
        - 账户已锁定
        - 账户已停用
        - 凭证无效
        - MFA 验证码无效
        - Token 无效
        - MFA 已绑定
        - MFA 设置已过期
        - MFA 设置不存在
        - MFA 配置不存在
        - WebAuthn 未配置
      x-enum-varnames:
        - CodeSuccess
        - CodeInternalError
        - CodeInvalidRequest
        - CodeValidationError
        - CodeUnauthorized
        - CodeForbidden
        - CodeNotFound
        - CodeConflict
        - CodeTooManyRequests
        - CodeRequestTimeout
        - CodeNotImplemented
        - CodeServiceUnavailable
        - CodeMerchantNotFound
        - CodeMerchantInactive
        - CodeMerchantSuspended
        - CodeIPNotWhitelisted
        - CodeInvalidSignature
        - CodeSignatureInvalid
        - CodeSignatureExpired
        - CodeDuplicateIdempotencyKey
        - CodeInvoiceNotFound
        - CodeInvoiceExpired
        - CodeInvoiceAlreadyPaid
        - CodeInvoiceCanceled
        - CodeInvoiceAlreadyCanceled
        - CodeInvoiceCannotCancel
        - CodeInvoiceAMLBlocked
        - CodeInvalidAmount
        - CodeInvalidCurrency
        - CodeTransferNotFound
        - CodeTransferFailed
        - CodeTransferPending
        - CodeInsufficientFunds
        - CodeInvalidBeneficiary
        - CodeRefundNotFound
        - CodeRefundFailed
        - CodeRefundNotAllowed
        - CodeRefundAmountExceeded
        - CodeAccountNotFound
        - CodeAccountFrozen
        - CodeAccountClosed
        - CodeInsufficientBalance
        - CodeBankAccountNotFound
        - CodeFeeNotFound
        - CodeInvalidPercentageRate
        - CodeInvalidAlertThreshold
        - CodeRiskRejected
        - CodeRiskReview
        - CodeAMLCheckFailed
        - CodeChannelNotAvailable
        - CodeChannelTimeout
        - CodeChannelError
        - CodeRoutingStrategyCodeDuplicate
        - CodeUserNotFound
        - CodeInvalidPassword
        - CodePasswordTooWeak
        - CodeEmailAlreadyExists
        - CodeAgentNotFound
        - CodeAgentCodeDuplicate
        - CodeAgentInvalidStatus
        - CodeAgentAlreadyActive
        - CodeAgentAlreadySuspended
        - CodeCommissionRuleNotFound
        - CodeCommissionRuleLimitReached
        - CodeAccountLocked
        - CodeAccountInactive
        - CodeInvalidCredentials
        - CodeInvalidMFACode
        - CodeInvalidToken
        - CodeMFAAlreadyBound
        - CodeMFASetupExpired
        - CodeMFASetupNotFound
        - CodeMFANotFound
        - CodeWebAuthnNotConfigured
    psp_com_pkg_response.PaginatedResponse-psp_com_internal_admin_app_HandlerWebhookEventDTO:
      properties:
        items:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_admin_app.HandlerWebhookEventDTO
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_pkg_response.PaginatedResponse-psp_com_internal_ledger_app_AccountWithBalance:
      properties:
        items:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_ledger_app.AccountWithBalance
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    psp_com_pkg_response.PaginatedResponse-psp_com_internal_tenant_app_RoleSummaryResponse:
      properties:
        items:
          items:
            $ref: >-
              #/components/schemas/psp_com_internal_tenant_app.RoleSummaryResponse
          type: array
        limit:
          type: integer
        offset:
          type: integer
        total:
          type: integer
      type: object
    time.Duration:
      enum:
        - -9223372036854776000
        - 9223372036854776000
        - 1
        - 1000
        - 1000000
        - 1000000000
        - 60000000000
        - 3600000000000
        - -9223372036854776000
        - 9223372036854776000
        - 1
        - 1000
        - 1000000
        - 1000000000
        - 60000000000
        - 3600000000000
      format: int64
      type: integer
      x-enum-varnames:
        - minDuration
        - maxDuration
        - Nanosecond
        - Microsecond
        - Millisecond
        - Second
        - Minute
        - Hour
        - minDuration
        - maxDuration
        - Nanosecond
        - Microsecond
        - Millisecond
        - Second
        - Minute
        - Hour
  securitySchemes:
    ApiKeyAuth:
      description: 商户 API Key (用于特定 M2M 场景)
      in: header
      name: X-API-Key
      type: apiKey
    BearerAuth:
      description: 'Keycloak JWT Bearer Token. 格式: "Bearer {token}"'
      in: header
      name: Authorization
      type: apiKey

